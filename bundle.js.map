{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap 0670878ab57bc0a6d557","webpack:///./~/riot/riot.js","webpack:///./src/helper.js","webpack:///./~/alerty/dist/js/alerty.js","webpack:///./~/pikaday/pikaday_standalone.js","webpack:///./src/components/cart/autocomplete.tag","webpack:///./src/components/cart/cartitem.tag","webpack:///./src/components/cart/cartitems.tag","webpack:///./src/components/cart/cartproductitems.tag","webpack:///./src/components/product/addproduct.tag","webpack:///./src/components/product/productitem.tag","webpack:///./src/components/product/productitems.tag","webpack:///./src/components/sales/salesitem.tag","webpack:///./src/pages/about.tag","webpack:///./src/pages/configurations.tag","webpack:///./src/pages/database.tag","webpack:///./src/pages/help.tag","webpack:///./src/pages/home.tag","webpack:///./src/pages/print.tag","webpack:///./src/pages/products.tag","webpack:///./src/pages/sales.tag","webpack:///./src/event-helper.js","webpack:///./src/index.js","webpack:///./src/router.js","webpack:///./src/stores/cartstore.js","webpack:///./src/stores/productstore.js","webpack:///./src/stores/salestore.js","webpack:///./src/stores/shopstore.js","webpack:///./~/riotcontrol/riotcontrol.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///(webpack)/buildin/module.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_RESULT__","window","undefined","mkitem","expr","key","val","item","pos","unmountRedundant","items","tags","t","i","length","j","splice","unmount","moveNestedTags","child","Object","keys","forEach","tagName","tag","isArray","each","moveChildTag","addVirtual","src","target","sib","el","_root","_virts","nextSibling","insertBefore","appendChild","push","moveVirtual","len","_each","dom","parent","remAttr","hasKeys","mustReorder","getAttr","T_STRING","getTagName","impl","__tagImpl","tmpl","getOuterHTML","useRoot","SPECIAL_TAGS_REGEX","test","root","parentNode","ref","document","createTextNode","getTag","isOption","toLowerCase","oldItems","isVirtual","loopKeys","one","removeChild","stub","on","itemsLength","_mustReorder","oldPos","n","frag","createDocumentFragment","map","T_OBJECT","indexOf","Tag","isLoop","hasImpl","cloneNode","innerHTML","mount","firstChild","update","childNodes","_item","defineProperty","FIREFOX","multiple","__riot1374","selectedIndex","slice","parseNamedElements","childTags","forceParsingNamed","walk","nodeType","initChildTag","setNamed","parseExpressions","expressions","addExpr","extra","hasExpr","extend","attr","type","nodeValue","attributes","name","bool","split","value","a","conf","updateOpts","ctx","self","opts","toCamel","normalizeData","data","T_UNDEF","isWritable","inheritFrom","k","mustSync","RESERVED_WORDS_BLACKLIST","contains","propsInSyncWithParent","onChildUpdate","toggle","isMount","evt","riot","observable","this","inherit","cleanUpData","_tag","isMounted","__uid","mkdom","isInherited","isObject","trigger","rAF","arguments","mix","instance","obj","proto","props","mixin","isFunction","getPrototypeOf","concat","getOwnPropertyNames","descriptor","hasGetterSetter","getOwnPropertyDescriptor","get","set","hasOwnProperty","bind","init","globalMixin","GLOBAL_MIXIN","_parent","fn","attrs","walkAttributes","v","setAttr","isInStub","keepRootTag","ptag","tagIndex","__virtualDom","getImmediateCustomParentTag","_riot_id","RIOT_TAG_IS","RIOT_TAG","off","setEventHandler","handler","e","event","currentTarget","srcElement","which","charCode","keyCode","preventDefault","returnValue","preventUpdate","insertTo","node","before","add","remove","attrName","IE_VERSION","inStub","style","display","startsWith","RIOT_PREFIX","els","T_FUNCTION","outerHTML","container","mkEl","setInnerHTML","html","doc","DOMParser","parseFromString","ownerDocument","importNode","documentElement","isSVGTag","SVG_TAGS_LIST","removeAttribute","string","replace","_","toUpperCase","getAttribute","xlink","XLINK_REGEX","exec","setAttributeNS","XLINK_NS","setAttribute","addChildTag","cachedTag","newPos","options","enumerable","writable","configurable","namedTag","args","arr","Array","o","re","isSvg","createElementNS","createElement","$$","selector","querySelectorAll","$","querySelector","create","getNamedKey","isArr","str","mountTo","_innerHTML","brackets","styleManager","version","settings","documentMode","InstallTrigger","onEachEvent","es","l","callbacks","prototype","defineProperties","events","typed","cb","apply","fns","arglen","busy","DEFAULT_PARSER","path","DEFAULT_SECOND_PARSER","filter","RegExp","REPLACE","match","debounce","delay","clearTimeout","setTimeout","start","autoExec","debouncedEmit","emit","win","ADD_EVENT_LISTENER","POPSTATE","HASHCHANGE","clickEvent","click","Router","central","s","normalize","isString","getPathFromRoot","href","loc","RE_ORIGIN","getPathFromBase","base","force","first","isRoot","emitStackLevel","MAX_EMIT_STACK_LEVEL","emitStack","current","TRIGGER","shift","metaKey","ctrlKey","shiftKey","defaultPrevented","nodeName","HAS_ATTRIBUTE","go","title","shouldReplace","hist","replaceState","pushState","routeFound","parser","secondParser","mainRouter","route","EVENT_LISTENER","REMOVE_EVENT_LISTENER","history","location","prot","ontouchstart","started","second","third","r","some","action","newSubRouter","router","stop","arg","fn2","query","q","readyState","UNDEF","_loopback","_rewrite","bp","_cache","source","global","REGLOB","_create","pair","DEFAULT","_pairs","UNSUPPORTED","Error","NEED_ESCAPE","S_QBLOCKS","_brackets","reOrIdx","_regex","_reset","cachedBrackets","_setSettings","b","_settings","R_MLCOMMS","R_STRINGS","FINDBRACES","(","[","{","_bp","unescapeStr","isexpr","parts","skipBraces","ch","ix","recch","lastIndex","index","trim","array","_tmpl","_logErr","err","errorHandler","riotData","_getTmpl","Function","list","qstr","RE_DQUOTE","_parseExpr","join","RE_QBMARK","asText","mm","lv","ir","RE_BREND","cnt","jsb","RE_QBLOCK","div","CH_IDEXPR","RE_CSNAME","rightContext","_wrapExpr","tb","JS_VARNAME","mvar","JS_CONTEXT","JS_NOPROPS","haveRaw","hasRaw","clearCache","String","fromCharCode","_mkdom","templ","replaceYield","tblTags","specialTags","tname","select","rootEls","childElementCount","reHasYield","reYieldSrc","text","reYieldDest","def","reYieldAll","tr","th","td","col","_riot","styleNode","cssTextProp","stylesToInject","userNode","newNode","replaceChild","getElementsByTagName","styleSheet","css","inject","cssText","w","lastTime","raf","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","navigator","userAgent","nowtime","Date","now","timeout","Math","max","util","mixins","globals","_id","g","store","tag2","addRiotTags","selectAllTags","pushTags","riotTag","allTags","nodeList","_el","vdom","addCommas","nStr","x","x1","x2","rgx","avoidDup","nObj","noDup","uniq","JSON","stringify","parse","formattedTime","timestamp","dateOnly","timezone","date","day","getDate","month","getMonth","year","getFullYear","hours","getHours","minutes","getMinutes","seconds","getSeconds","substr","fromTimestampToString","ts","separator","toTimestamp","commonUse","addClass","cls","elClass","className","blank","added","removeClass","removed","hasClass","elClassList","addEvent","func","addEventListener","attachEvent","removeEvent","removeEventListener","detachEvent","removeElement","setUid","prefix","floor","random","getElementById","Alerty","Dialog","defaults","okLabel","cancelLabel","time","previousCallback","template","setup","content","onOk","onCancel","$oldModal","_callback","$wrapper","$modal","$overlay","$title","$message","$btnArea","$btnOk","$btnCancel","$prompt","$input","detect","body","focus","inputType","inputPlaceholder","inputValue","place","bgColor","backgroundColor","fontColor","color","marginTop","offsetHeight","bindEvent","that","close","callback","toasts","alert","confirm","prompt","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","factory","moment","hasMoment","hasEventListeners","sto","capture","fireEvent","eventName","ev","createEvent","initEvent","dispatchEvent","createEventObject","cn","toString","isDate","isNaN","getTime","isWeekend","getDay","isLeapYear","getDaysInMonth","setToStartOfDay","setHours","compareDates","to","from","overwrite","prop","hasProp","adjustCalendar","calendar","ceil","abs","field","bound","position","reposition","format","defaultDate","setDefaultDate","firstDay","minDate","maxDate","yearRange","showWeekNumber","minYear","maxYear","minMonth","maxMonth","startRange","endRange","isRTL","yearSuffix","showMonthAfterYear","numberOfMonths","mainCalendar","i18n","previousMonth","nextMonth","months","weekdays","weekdaysShort","theme","onSelect","onOpen","onClose","onDraw","renderDayName","abbr","renderDay","isEmpty","isDisabled","isToday","isSelected","isInRange","isStartRange","isEndRange","renderWeek","d","y","onejan","weekNum","renderRow","days","reverse","renderBody","rows","renderHead","renderTitle","refYear","monthHtml","yearHtml","_o","isMinYear","isMaxYear","prev","next","renderTable","Pikaday","defDate","config","_onMouseDown","_v","setDate","hide","blur","prevMonth","_c","_onChange","gotoMonth","gotoYear","_onInputChange","firedBy","isValid","toDate","show","_onInputFocus","_onInputClick","_onInputBlur","pEl","activeElement","_b","_onClick","onchange","gotoDate","nom","fallback","disableWeekends","disableDayFn","parseInt","setMinDate","setMaxDate","_d","toDateString","getMoment","setMoment","preventOnSelect","isMoment","draw","min","firstVisibleDate","lastVisibleDate","visibleDate","newCalendar","calendars","setMonth","adjustCalendars","gotoToday","setStartRange","setEndRange","_y","_m","render","adjustPosition","width","height","viewportWidth","viewportHeight","scrollTop","left","top","clientRect","offsetWidth","innerWidth","clientWidth","innerHeight","clientHeight","pageYOffset","getBoundingClientRect","pageXOffset","bottom","offsetLeft","offsetTop","offsetParent","cells","after","dayConfig","row","unshift","isVisible","destroy","reset","_this","filtered","active","mode","acinput","selection","complete","control","EVT","cartSearchItem","selected","txt","save","cartSaveItem","cartEditItemOn","cartSaveItemSuccess","cartUpdateItemSuccess","cartSearchItemSuccess","searchitems","cartRemoveItemSuccess","cancelCart","_helperJs","price_","price","subtotal_","qty","cartRemoveItem","qty_","edit__","item__","parseFloat","created","edit_","focus__","setSelectionRange","alerty","isReady","total","total_","total_items","kembalian","kembalian_","cash_","isMinus","isCartEmpty","isNewUser","isProductReady","cartLoadItems","tot","tot_items","someThing","updateTotal","status","cartLoadItemsSuccess","allowAdd","find","cancelCartSuccess","oninp","cash","bayar","createdOn","salesitems","salesTotal","sales","subtotal","sumBy","discount","payment","salesSave","cancel_","hold_","salesSaveSuccess","salesId","productItems","productLoadItems_","productLoadItemsSuccess_","docs","size_","size","ENTER_KEY","item_error","price_error","oninputitem","oninputprice","prize__","id_edit","disabled","prize_","stock","is_edit","idvalue","productSaveItem","console","log","cancel","productEditItemOn","price_single_","isUpdated","price_update_","oninputprice_single","price_single","edit","item_single","productRemoveItem","clearSearch","countItems","page","productLoadItems","productLoadItemsSuccess","range","total_rows","pageSize","done","productSaveItemSuccess","productUpdateItemSuccess","productRemoveItemSuccess","index__","productSearchItem","productSearchItemSuccess","clearAction","search","assign","isDetail","created_","grandtotal_","itemTotal","AppVersion","shopname","timezoneData","shopLoadData","shopLoadDataSuccess","shop","hourdiff","shopSaveName","edit_timezone","newTimezone","shopSaveTimezone","shopSaveSuccess","shopUpdateSuccess","salesItems","disc","disctotal","grandtotal","ready","cid","salesGet","sid","print","salesGetSuccess","salesitem","disctotal_","backpage","loadSalesData","setCurrentDate","getCurrentDate","setCurrentPage","getCurrentPage","pikaday","no_data","currentDate","currentPage","currentDateLabel","choosenDate","choosenDate_","params","salesLoadItems","salesLoadItemsSuccess","salesTotalSuccess","currDate","currPage","exportCsv","dataHeader","csvContent","dataTotal","encodedUri","link","dataString","value_","prop_","encodeURI","_interopRequireDefault","__esModule","default","_db","_riotcontrol","_riotcontrol2","shopSaveData","cancelCartPrintSuccess","salesSearchItem","salesSearchItemSuccess","clearDb","clearDbSuccess","focusQty","PouchDB","db","pageSizeProductCart","offset","_pikaday","_pikaday2","mrShop","include_docs","then","result","Mousetrap","bindGlobal","getElementsByClassName","classList","_classCallCheck","Constructor","TypeError","_createClass","protoProps","staticProps","routeState","view","_currentView","_views","_defaultView","_handleRoute","_loadView","CartStore","cartStore","cartItems","bindEvents","cartTriggerChangeds","clearDB","allDocs","startkey","endkey","Promise","all","rev","createIndex","fields","ddoc","$gt","sort","getIndexes","indexes","deleteIndex","cartAddTodo","put","cartUpdateTodo","origDoc","_rev","cartRemoveTodo","regexp","$regex","_myId","addStore","ProductStore","productStore","edit_id","pageSizeCart","productsTriggerChangeds","limit","skip","productAddTodo","productUpdateTodo","productRemoveTodo","SaleStore","saleStore","salesTriggerChangeds","salesTotalTriggerChangeds","grandTotal","startdate","enddate","$lt","$gte","$lte","ShopStore","shopStore","myMapReduceFun2","uu","shopUpdateData","updatedOn","updated","RiotControl","_stores","api","__webpack_amd_options__","webpackPolyfill","deprecate","paths","children"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!*****************!*\\\n  !*** multi app ***!\n  \\*****************/\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(/*! ./src/index.js */22);\n\n\n/***/ },\n/* 1 */\n/*!************************!*\\\n  !*** ./~/riot/riot.js ***!\n  \\************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* Riot v2.6.4, @license MIT */\n\t\n\t;(function(window, undefined) {\n\t  'use strict';\n\tvar riot = { version: 'v2.6.4', settings: {} },\n\t  // be aware, internal usage\n\t  // ATTENTION: prefix the global dynamic variables with `__`\n\t\n\t  // counter to give a unique id to all the Tag instances\n\t  __uid = 0,\n\t  // tags instances cache\n\t  __virtualDom = [],\n\t  // tags implementation cache\n\t  __tagImpl = {},\n\t\n\t  /**\n\t   * Const\n\t   */\n\t  GLOBAL_MIXIN = '__global_mixin',\n\t\n\t  // riot specific prefixes\n\t  RIOT_PREFIX = 'riot-',\n\t  RIOT_TAG = RIOT_PREFIX + 'tag',\n\t  RIOT_TAG_IS = 'data-is',\n\t\n\t  // for typeof == '' comparisons\n\t  T_STRING = 'string',\n\t  T_OBJECT = 'object',\n\t  T_UNDEF  = 'undefined',\n\t  T_FUNCTION = 'function',\n\t  XLINK_NS = 'http://www.w3.org/1999/xlink',\n\t  XLINK_REGEX = /^xlink:(\\w+)/,\n\t  // special native tags that cannot be treated like the others\n\t  SPECIAL_TAGS_REGEX = /^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,\n\t  RESERVED_WORDS_BLACKLIST = /^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|parent|opts|trigger|o(?:n|ff|ne))$/,\n\t  // SVG tags list https://www.w3.org/TR/SVG/attindex.html#PresentationAttributes\n\t  SVG_TAGS_LIST = ['altGlyph', 'animate', 'animateColor', 'circle', 'clipPath', 'defs', 'ellipse', 'feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feFlood', 'feGaussianBlur', 'feImage', 'feMerge', 'feMorphology', 'feOffset', 'feSpecularLighting', 'feTile', 'feTurbulence', 'filter', 'font', 'foreignObject', 'g', 'glyph', 'glyphRef', 'image', 'line', 'linearGradient', 'marker', 'mask', 'missing-glyph', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect', 'stop', 'svg', 'switch', 'symbol', 'text', 'textPath', 'tref', 'tspan', 'use'],\n\t\n\t  // version# for IE 8-11, 0 for others\n\t  IE_VERSION = (window && window.document || {}).documentMode | 0,\n\t\n\t  // detect firefox to fix #1374\n\t  FIREFOX = window && !!window.InstallTrigger\n\t/* istanbul ignore next */\n\triot.observable = function(el) {\n\t\n\t  /**\n\t   * Extend the original object or create a new empty one\n\t   * @type { Object }\n\t   */\n\t\n\t  el = el || {}\n\t\n\t  /**\n\t   * Private variables\n\t   */\n\t  var callbacks = {},\n\t    slice = Array.prototype.slice\n\t\n\t  /**\n\t   * Private Methods\n\t   */\n\t\n\t  /**\n\t   * Helper function needed to get and loop all the events in a string\n\t   * @param   { String }   e - event string\n\t   * @param   {Function}   fn - callback\n\t   */\n\t  function onEachEvent(e, fn) {\n\t    var es = e.split(' '), l = es.length, i = 0\n\t    for (; i < l; i++) {\n\t      var name = es[i]\n\t      if (name) fn(name, i)\n\t    }\n\t  }\n\t\n\t  /**\n\t   * Public Api\n\t   */\n\t\n\t  // extend the el object adding the observable methods\n\t  Object.defineProperties(el, {\n\t    /**\n\t     * Listen to the given space separated list of `events` and\n\t     * execute the `callback` each time an event is triggered.\n\t     * @param  { String } events - events ids\n\t     * @param  { Function } fn - callback function\n\t     * @returns { Object } el\n\t     */\n\t    on: {\n\t      value: function(events, fn) {\n\t        if (typeof fn != 'function')  return el\n\t\n\t        onEachEvent(events, function(name, pos) {\n\t          (callbacks[name] = callbacks[name] || []).push(fn)\n\t          fn.typed = pos > 0\n\t        })\n\t\n\t        return el\n\t      },\n\t      enumerable: false,\n\t      writable: false,\n\t      configurable: false\n\t    },\n\t\n\t    /**\n\t     * Removes the given space separated list of `events` listeners\n\t     * @param   { String } events - events ids\n\t     * @param   { Function } fn - callback function\n\t     * @returns { Object } el\n\t     */\n\t    off: {\n\t      value: function(events, fn) {\n\t        if (events == '*' && !fn) callbacks = {}\n\t        else {\n\t          onEachEvent(events, function(name, pos) {\n\t            if (fn) {\n\t              var arr = callbacks[name]\n\t              for (var i = 0, cb; cb = arr && arr[i]; ++i) {\n\t                if (cb == fn) arr.splice(i--, 1)\n\t              }\n\t            } else delete callbacks[name]\n\t          })\n\t        }\n\t        return el\n\t      },\n\t      enumerable: false,\n\t      writable: false,\n\t      configurable: false\n\t    },\n\t\n\t    /**\n\t     * Listen to the given space separated list of `events` and\n\t     * execute the `callback` at most once\n\t     * @param   { String } events - events ids\n\t     * @param   { Function } fn - callback function\n\t     * @returns { Object } el\n\t     */\n\t    one: {\n\t      value: function(events, fn) {\n\t        function on() {\n\t          el.off(events, on)\n\t          fn.apply(el, arguments)\n\t        }\n\t        return el.on(events, on)\n\t      },\n\t      enumerable: false,\n\t      writable: false,\n\t      configurable: false\n\t    },\n\t\n\t    /**\n\t     * Execute all callback functions that listen to\n\t     * the given space separated list of `events`\n\t     * @param   { String } events - events ids\n\t     * @returns { Object } el\n\t     */\n\t    trigger: {\n\t      value: function(events) {\n\t\n\t        // getting the arguments\n\t        var arglen = arguments.length - 1,\n\t          args = new Array(arglen),\n\t          fns\n\t\n\t        for (var i = 0; i < arglen; i++) {\n\t          args[i] = arguments[i + 1] // skip first argument\n\t        }\n\t\n\t        onEachEvent(events, function(name, pos) {\n\t\n\t          fns = slice.call(callbacks[name] || [], 0)\n\t\n\t          for (var i = 0, fn; fn = fns[i]; ++i) {\n\t            if (fn.busy) continue\n\t            fn.busy = 1\n\t            fn.apply(el, fn.typed ? [name].concat(args) : args)\n\t            if (fns[i] !== fn) { i-- }\n\t            fn.busy = 0\n\t          }\n\t\n\t          if (callbacks['*'] && name != '*')\n\t            el.trigger.apply(el, ['*', name].concat(args))\n\t\n\t        })\n\t\n\t        return el\n\t      },\n\t      enumerable: false,\n\t      writable: false,\n\t      configurable: false\n\t    }\n\t  })\n\t\n\t  return el\n\t\n\t}\n\t/* istanbul ignore next */\n\t;(function(riot) {\n\t\n\t/**\n\t * Simple client-side router\n\t * @module riot-route\n\t */\n\t\n\t\n\tvar RE_ORIGIN = /^.+?\\/\\/+[^\\/]+/,\n\t  EVENT_LISTENER = 'EventListener',\n\t  REMOVE_EVENT_LISTENER = 'remove' + EVENT_LISTENER,\n\t  ADD_EVENT_LISTENER = 'add' + EVENT_LISTENER,\n\t  HAS_ATTRIBUTE = 'hasAttribute',\n\t  REPLACE = 'replace',\n\t  POPSTATE = 'popstate',\n\t  HASHCHANGE = 'hashchange',\n\t  TRIGGER = 'trigger',\n\t  MAX_EMIT_STACK_LEVEL = 3,\n\t  win = typeof window != 'undefined' && window,\n\t  doc = typeof document != 'undefined' && document,\n\t  hist = win && history,\n\t  loc = win && (hist.location || win.location), // see html5-history-api\n\t  prot = Router.prototype, // to minify more\n\t  clickEvent = doc && doc.ontouchstart ? 'touchstart' : 'click',\n\t  started = false,\n\t  central = riot.observable(),\n\t  routeFound = false,\n\t  debouncedEmit,\n\t  base, current, parser, secondParser, emitStack = [], emitStackLevel = 0\n\t\n\t/**\n\t * Default parser. You can replace it via router.parser method.\n\t * @param {string} path - current path (normalized)\n\t * @returns {array} array\n\t */\n\tfunction DEFAULT_PARSER(path) {\n\t  return path.split(/[/?#]/)\n\t}\n\t\n\t/**\n\t * Default parser (second). You can replace it via router.parser method.\n\t * @param {string} path - current path (normalized)\n\t * @param {string} filter - filter string (normalized)\n\t * @returns {array} array\n\t */\n\tfunction DEFAULT_SECOND_PARSER(path, filter) {\n\t  var re = new RegExp('^' + filter[REPLACE](/\\*/g, '([^/?#]+?)')[REPLACE](/\\.\\./, '.*') + '$'),\n\t    args = path.match(re)\n\t\n\t  if (args) return args.slice(1)\n\t}\n\t\n\t/**\n\t * Simple/cheap debounce implementation\n\t * @param   {function} fn - callback\n\t * @param   {number} delay - delay in seconds\n\t * @returns {function} debounced function\n\t */\n\tfunction debounce(fn, delay) {\n\t  var t\n\t  return function () {\n\t    clearTimeout(t)\n\t    t = setTimeout(fn, delay)\n\t  }\n\t}\n\t\n\t/**\n\t * Set the window listeners to trigger the routes\n\t * @param {boolean} autoExec - see route.start\n\t */\n\tfunction start(autoExec) {\n\t  debouncedEmit = debounce(emit, 1)\n\t  win[ADD_EVENT_LISTENER](POPSTATE, debouncedEmit)\n\t  win[ADD_EVENT_LISTENER](HASHCHANGE, debouncedEmit)\n\t  doc[ADD_EVENT_LISTENER](clickEvent, click)\n\t  if (autoExec) emit(true)\n\t}\n\t\n\t/**\n\t * Router class\n\t */\n\tfunction Router() {\n\t  this.$ = []\n\t  riot.observable(this) // make it observable\n\t  central.on('stop', this.s.bind(this))\n\t  central.on('emit', this.e.bind(this))\n\t}\n\t\n\tfunction normalize(path) {\n\t  return path[REPLACE](/^\\/|\\/$/, '')\n\t}\n\t\n\tfunction isString(str) {\n\t  return typeof str == 'string'\n\t}\n\t\n\t/**\n\t * Get the part after domain name\n\t * @param {string} href - fullpath\n\t * @returns {string} path from root\n\t */\n\tfunction getPathFromRoot(href) {\n\t  return (href || loc.href)[REPLACE](RE_ORIGIN, '')\n\t}\n\t\n\t/**\n\t * Get the part after base\n\t * @param {string} href - fullpath\n\t * @returns {string} path from base\n\t */\n\tfunction getPathFromBase(href) {\n\t  return base[0] == '#'\n\t    ? (href || loc.href || '').split(base)[1] || ''\n\t    : (loc ? getPathFromRoot(href) : href || '')[REPLACE](base, '')\n\t}\n\t\n\tfunction emit(force) {\n\t  // the stack is needed for redirections\n\t  var isRoot = emitStackLevel == 0, first\n\t  if (MAX_EMIT_STACK_LEVEL <= emitStackLevel) return\n\t\n\t  emitStackLevel++\n\t  emitStack.push(function() {\n\t    var path = getPathFromBase()\n\t    if (force || path != current) {\n\t      central[TRIGGER]('emit', path)\n\t      current = path\n\t    }\n\t  })\n\t  if (isRoot) {\n\t    while (first = emitStack.shift()) first() // stack increses within this call\n\t    emitStackLevel = 0\n\t  }\n\t}\n\t\n\tfunction click(e) {\n\t  if (\n\t    e.which != 1 // not left click\n\t    || e.metaKey || e.ctrlKey || e.shiftKey // or meta keys\n\t    || e.defaultPrevented // or default prevented\n\t  ) return\n\t\n\t  var el = e.target\n\t  while (el && el.nodeName != 'A') el = el.parentNode\n\t\n\t  if (\n\t    !el || el.nodeName != 'A' // not A tag\n\t    || el[HAS_ATTRIBUTE]('download') // has download attr\n\t    || !el[HAS_ATTRIBUTE]('href') // has no href attr\n\t    || el.target && el.target != '_self' // another window or frame\n\t    || el.href.indexOf(loc.href.match(RE_ORIGIN)[0]) == -1 // cross origin\n\t  ) return\n\t\n\t  if (el.href != loc.href\n\t    && (\n\t      el.href.split('#')[0] == loc.href.split('#')[0] // internal jump\n\t      || base[0] != '#' && getPathFromRoot(el.href).indexOf(base) !== 0 // outside of base\n\t      || base[0] == '#' && el.href.split(base)[0] != loc.href.split(base)[0] // outside of #base\n\t      || !go(getPathFromBase(el.href), el.title || doc.title) // route not found\n\t    )) return\n\t\n\t  e.preventDefault()\n\t}\n\t\n\t/**\n\t * Go to the path\n\t * @param {string} path - destination path\n\t * @param {string} title - page title\n\t * @param {boolean} shouldReplace - use replaceState or pushState\n\t * @returns {boolean} - route not found flag\n\t */\n\tfunction go(path, title, shouldReplace) {\n\t  // Server-side usage: directly execute handlers for the path\n\t  if (!hist) return central[TRIGGER]('emit', getPathFromBase(path))\n\t\n\t  path = base + normalize(path)\n\t  title = title || doc.title\n\t  // browsers ignores the second parameter `title`\n\t  shouldReplace\n\t    ? hist.replaceState(null, title, path)\n\t    : hist.pushState(null, title, path)\n\t  // so we need to set it manually\n\t  doc.title = title\n\t  routeFound = false\n\t  emit()\n\t  return routeFound\n\t}\n\t\n\t/**\n\t * Go to path or set action\n\t * a single string:                go there\n\t * two strings:                    go there with setting a title\n\t * two strings and boolean:        replace history with setting a title\n\t * a single function:              set an action on the default route\n\t * a string/RegExp and a function: set an action on the route\n\t * @param {(string|function)} first - path / action / filter\n\t * @param {(string|RegExp|function)} second - title / action\n\t * @param {boolean} third - replace flag\n\t */\n\tprot.m = function(first, second, third) {\n\t  if (isString(first) && (!second || isString(second))) go(first, second, third || false)\n\t  else if (second) this.r(first, second)\n\t  else this.r('@', first)\n\t}\n\t\n\t/**\n\t * Stop routing\n\t */\n\tprot.s = function() {\n\t  this.off('*')\n\t  this.$ = []\n\t}\n\t\n\t/**\n\t * Emit\n\t * @param {string} path - path\n\t */\n\tprot.e = function(path) {\n\t  this.$.concat('@').some(function(filter) {\n\t    var args = (filter == '@' ? parser : secondParser)(normalize(path), normalize(filter))\n\t    if (typeof args != 'undefined') {\n\t      this[TRIGGER].apply(null, [filter].concat(args))\n\t      return routeFound = true // exit from loop\n\t    }\n\t  }, this)\n\t}\n\t\n\t/**\n\t * Register route\n\t * @param {string} filter - filter for matching to url\n\t * @param {function} action - action to register\n\t */\n\tprot.r = function(filter, action) {\n\t  if (filter != '@') {\n\t    filter = '/' + normalize(filter)\n\t    this.$.push(filter)\n\t  }\n\t  this.on(filter, action)\n\t}\n\t\n\tvar mainRouter = new Router()\n\tvar route = mainRouter.m.bind(mainRouter)\n\t\n\t/**\n\t * Create a sub router\n\t * @returns {function} the method of a new Router object\n\t */\n\troute.create = function() {\n\t  var newSubRouter = new Router()\n\t  // assign sub-router's main method\n\t  var router = newSubRouter.m.bind(newSubRouter)\n\t  // stop only this sub-router\n\t  router.stop = newSubRouter.s.bind(newSubRouter)\n\t  return router\n\t}\n\t\n\t/**\n\t * Set the base of url\n\t * @param {(str|RegExp)} arg - a new base or '#' or '#!'\n\t */\n\troute.base = function(arg) {\n\t  base = arg || '#'\n\t  current = getPathFromBase() // recalculate current path\n\t}\n\t\n\t/** Exec routing right now **/\n\troute.exec = function() {\n\t  emit(true)\n\t}\n\t\n\t/**\n\t * Replace the default router to yours\n\t * @param {function} fn - your parser function\n\t * @param {function} fn2 - your secondParser function\n\t */\n\troute.parser = function(fn, fn2) {\n\t  if (!fn && !fn2) {\n\t    // reset parser for testing...\n\t    parser = DEFAULT_PARSER\n\t    secondParser = DEFAULT_SECOND_PARSER\n\t  }\n\t  if (fn) parser = fn\n\t  if (fn2) secondParser = fn2\n\t}\n\t\n\t/**\n\t * Helper function to get url query as an object\n\t * @returns {object} parsed query\n\t */\n\troute.query = function() {\n\t  var q = {}\n\t  var href = loc.href || current\n\t  href[REPLACE](/[?&](.+?)=([^&]*)/g, function(_, k, v) { q[k] = v })\n\t  return q\n\t}\n\t\n\t/** Stop routing **/\n\troute.stop = function () {\n\t  if (started) {\n\t    if (win) {\n\t      win[REMOVE_EVENT_LISTENER](POPSTATE, debouncedEmit)\n\t      win[REMOVE_EVENT_LISTENER](HASHCHANGE, debouncedEmit)\n\t      doc[REMOVE_EVENT_LISTENER](clickEvent, click)\n\t    }\n\t    central[TRIGGER]('stop')\n\t    started = false\n\t  }\n\t}\n\t\n\t/**\n\t * Start routing\n\t * @param {boolean} autoExec - automatically exec after starting if true\n\t */\n\troute.start = function (autoExec) {\n\t  if (!started) {\n\t    if (win) {\n\t      if (document.readyState == 'complete') start(autoExec)\n\t      // the timeout is needed to solve\n\t      // a weird safari bug https://github.com/riot/route/issues/33\n\t      else win[ADD_EVENT_LISTENER]('load', function() {\n\t        setTimeout(function() { start(autoExec) }, 1)\n\t      })\n\t    }\n\t    started = true\n\t  }\n\t}\n\t\n\t/** Prepare the router **/\n\troute.base()\n\troute.parser()\n\t\n\triot.route = route\n\t})(riot)\n\t/* istanbul ignore next */\n\t\n\t/**\n\t * The riot template engine\n\t * @version v2.4.2\n\t */\n\t/**\n\t * riot.util.brackets\n\t *\n\t * - `brackets    ` - Returns a string or regex based on its parameter\n\t * - `brackets.set` - Change the current riot brackets\n\t *\n\t * @module\n\t */\n\t\n\tvar brackets = (function (UNDEF) {\n\t\n\t  var\n\t    REGLOB = 'g',\n\t\n\t    R_MLCOMMS = /\\/\\*[^*]*\\*+(?:[^*\\/][^*]*\\*+)*\\//g,\n\t\n\t    R_STRINGS = /\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'/g,\n\t\n\t    S_QBLOCKS = R_STRINGS.source + '|' +\n\t      /(?:\\breturn\\s+|(?:[$\\w\\)\\]]|\\+\\+|--)\\s*(\\/)(?![*\\/]))/.source + '|' +\n\t      /\\/(?=[^*\\/])[^[\\/\\\\]*(?:(?:\\[(?:\\\\.|[^\\]\\\\]*)*\\]|\\\\.)[^[\\/\\\\]*)*?(\\/)[gim]*/.source,\n\t\n\t    UNSUPPORTED = RegExp('[\\\\' + 'x00-\\\\x1F<>a-zA-Z0-9\\'\",;\\\\\\\\]'),\n\t\n\t    NEED_ESCAPE = /(?=[[\\]()*+?.^$|])/g,\n\t\n\t    FINDBRACES = {\n\t      '(': RegExp('([()])|'   + S_QBLOCKS, REGLOB),\n\t      '[': RegExp('([[\\\\]])|' + S_QBLOCKS, REGLOB),\n\t      '{': RegExp('([{}])|'   + S_QBLOCKS, REGLOB)\n\t    },\n\t\n\t    DEFAULT = '{ }'\n\t\n\t  var _pairs = [\n\t    '{', '}',\n\t    '{', '}',\n\t    /{[^}]*}/,\n\t    /\\\\([{}])/g,\n\t    /\\\\({)|{/g,\n\t    RegExp('\\\\\\\\(})|([[({])|(})|' + S_QBLOCKS, REGLOB),\n\t    DEFAULT,\n\t    /^\\s*{\\^?\\s*([$\\w]+)(?:\\s*,\\s*(\\S+))?\\s+in\\s+(\\S.*)\\s*}/,\n\t    /(^|[^\\\\]){=[\\S\\s]*?}/\n\t  ]\n\t\n\t  var\n\t    cachedBrackets = UNDEF,\n\t    _regex,\n\t    _cache = [],\n\t    _settings\n\t\n\t  function _loopback (re) { return re }\n\t\n\t  function _rewrite (re, bp) {\n\t    if (!bp) bp = _cache\n\t    return new RegExp(\n\t      re.source.replace(/{/g, bp[2]).replace(/}/g, bp[3]), re.global ? REGLOB : ''\n\t    )\n\t  }\n\t\n\t  function _create (pair) {\n\t    if (pair === DEFAULT) return _pairs\n\t\n\t    var arr = pair.split(' ')\n\t\n\t    if (arr.length !== 2 || UNSUPPORTED.test(pair)) {\n\t      throw new Error('Unsupported brackets \"' + pair + '\"')\n\t    }\n\t    arr = arr.concat(pair.replace(NEED_ESCAPE, '\\\\').split(' '))\n\t\n\t    arr[4] = _rewrite(arr[1].length > 1 ? /{[\\S\\s]*?}/ : _pairs[4], arr)\n\t    arr[5] = _rewrite(pair.length > 3 ? /\\\\({|})/g : _pairs[5], arr)\n\t    arr[6] = _rewrite(_pairs[6], arr)\n\t    arr[7] = RegExp('\\\\\\\\(' + arr[3] + ')|([[({])|(' + arr[3] + ')|' + S_QBLOCKS, REGLOB)\n\t    arr[8] = pair\n\t    return arr\n\t  }\n\t\n\t  function _brackets (reOrIdx) {\n\t    return reOrIdx instanceof RegExp ? _regex(reOrIdx) : _cache[reOrIdx]\n\t  }\n\t\n\t  _brackets.split = function split (str, tmpl, _bp) {\n\t    // istanbul ignore next: _bp is for the compiler\n\t    if (!_bp) _bp = _cache\n\t\n\t    var\n\t      parts = [],\n\t      match,\n\t      isexpr,\n\t      start,\n\t      pos,\n\t      re = _bp[6]\n\t\n\t    isexpr = start = re.lastIndex = 0\n\t\n\t    while ((match = re.exec(str))) {\n\t\n\t      pos = match.index\n\t\n\t      if (isexpr) {\n\t\n\t        if (match[2]) {\n\t          re.lastIndex = skipBraces(str, match[2], re.lastIndex)\n\t          continue\n\t        }\n\t        if (!match[3]) {\n\t          continue\n\t        }\n\t      }\n\t\n\t      if (!match[1]) {\n\t        unescapeStr(str.slice(start, pos))\n\t        start = re.lastIndex\n\t        re = _bp[6 + (isexpr ^= 1)]\n\t        re.lastIndex = start\n\t      }\n\t    }\n\t\n\t    if (str && start < str.length) {\n\t      unescapeStr(str.slice(start))\n\t    }\n\t\n\t    return parts\n\t\n\t    function unescapeStr (s) {\n\t      if (tmpl || isexpr) {\n\t        parts.push(s && s.replace(_bp[5], '$1'))\n\t      } else {\n\t        parts.push(s)\n\t      }\n\t    }\n\t\n\t    function skipBraces (s, ch, ix) {\n\t      var\n\t        match,\n\t        recch = FINDBRACES[ch]\n\t\n\t      recch.lastIndex = ix\n\t      ix = 1\n\t      while ((match = recch.exec(s))) {\n\t        if (match[1] &&\n\t          !(match[1] === ch ? ++ix : --ix)) break\n\t      }\n\t      return ix ? s.length : recch.lastIndex\n\t    }\n\t  }\n\t\n\t  _brackets.hasExpr = function hasExpr (str) {\n\t    return _cache[4].test(str)\n\t  }\n\t\n\t  _brackets.loopKeys = function loopKeys (expr) {\n\t    var m = expr.match(_cache[9])\n\t\n\t    return m\n\t      ? { key: m[1], pos: m[2], val: _cache[0] + m[3].trim() + _cache[1] }\n\t      : { val: expr.trim() }\n\t  }\n\t\n\t  _brackets.array = function array (pair) {\n\t    return pair ? _create(pair) : _cache\n\t  }\n\t\n\t  function _reset (pair) {\n\t    if ((pair || (pair = DEFAULT)) !== _cache[8]) {\n\t      _cache = _create(pair)\n\t      _regex = pair === DEFAULT ? _loopback : _rewrite\n\t      _cache[9] = _regex(_pairs[9])\n\t    }\n\t    cachedBrackets = pair\n\t  }\n\t\n\t  function _setSettings (o) {\n\t    var b\n\t\n\t    o = o || {}\n\t    b = o.brackets\n\t    Object.defineProperty(o, 'brackets', {\n\t      set: _reset,\n\t      get: function () { return cachedBrackets },\n\t      enumerable: true\n\t    })\n\t    _settings = o\n\t    _reset(b)\n\t  }\n\t\n\t  Object.defineProperty(_brackets, 'settings', {\n\t    set: _setSettings,\n\t    get: function () { return _settings }\n\t  })\n\t\n\t  /* istanbul ignore next: in the browser riot is always in the scope */\n\t  _brackets.settings = typeof riot !== 'undefined' && riot.settings || {}\n\t  _brackets.set = _reset\n\t\n\t  _brackets.R_STRINGS = R_STRINGS\n\t  _brackets.R_MLCOMMS = R_MLCOMMS\n\t  _brackets.S_QBLOCKS = S_QBLOCKS\n\t\n\t  return _brackets\n\t\n\t})()\n\t\n\t/**\n\t * @module tmpl\n\t *\n\t * tmpl          - Root function, returns the template value, render with data\n\t * tmpl.hasExpr  - Test the existence of a expression inside a string\n\t * tmpl.loopKeys - Get the keys for an 'each' loop (used by `_each`)\n\t */\n\t\n\tvar tmpl = (function () {\n\t\n\t  var _cache = {}\n\t\n\t  function _tmpl (str, data) {\n\t    if (!str) return str\n\t\n\t    return (_cache[str] || (_cache[str] = _create(str))).call(data, _logErr)\n\t  }\n\t\n\t  _tmpl.haveRaw = brackets.hasRaw\n\t\n\t  _tmpl.hasExpr = brackets.hasExpr\n\t\n\t  _tmpl.loopKeys = brackets.loopKeys\n\t\n\t  // istanbul ignore next\n\t  _tmpl.clearCache = function () { _cache = {} }\n\t\n\t  _tmpl.errorHandler = null\n\t\n\t  function _logErr (err, ctx) {\n\t\n\t    if (_tmpl.errorHandler) {\n\t\n\t      err.riotData = {\n\t        tagName: ctx && ctx.root && ctx.root.tagName,\n\t        _riot_id: ctx && ctx._riot_id  //eslint-disable-line camelcase\n\t      }\n\t      _tmpl.errorHandler(err)\n\t    }\n\t  }\n\t\n\t  function _create (str) {\n\t    var expr = _getTmpl(str)\n\t\n\t    if (expr.slice(0, 11) !== 'try{return ') expr = 'return ' + expr\n\t\n\t    return new Function('E', expr + ';')    // eslint-disable-line no-new-func\n\t  }\n\t\n\t  var\n\t    CH_IDEXPR = String.fromCharCode(0x2057),\n\t    RE_CSNAME = /^(?:(-?[_A-Za-z\\xA0-\\xFF][-\\w\\xA0-\\xFF]*)|\\u2057(\\d+)~):/,\n\t    RE_QBLOCK = RegExp(brackets.S_QBLOCKS, 'g'),\n\t    RE_DQUOTE = /\\u2057/g,\n\t    RE_QBMARK = /\\u2057(\\d+)~/g\n\t\n\t  function _getTmpl (str) {\n\t    var\n\t      qstr = [],\n\t      expr,\n\t      parts = brackets.split(str.replace(RE_DQUOTE, '\"'), 1)\n\t\n\t    if (parts.length > 2 || parts[0]) {\n\t      var i, j, list = []\n\t\n\t      for (i = j = 0; i < parts.length; ++i) {\n\t\n\t        expr = parts[i]\n\t\n\t        if (expr && (expr = i & 1\n\t\n\t            ? _parseExpr(expr, 1, qstr)\n\t\n\t            : '\"' + expr\n\t                .replace(/\\\\/g, '\\\\\\\\')\n\t                .replace(/\\r\\n?|\\n/g, '\\\\n')\n\t                .replace(/\"/g, '\\\\\"') +\n\t              '\"'\n\t\n\t          )) list[j++] = expr\n\t\n\t      }\n\t\n\t      expr = j < 2 ? list[0]\n\t           : '[' + list.join(',') + '].join(\"\")'\n\t\n\t    } else {\n\t\n\t      expr = _parseExpr(parts[1], 0, qstr)\n\t    }\n\t\n\t    if (qstr[0]) {\n\t      expr = expr.replace(RE_QBMARK, function (_, pos) {\n\t        return qstr[pos]\n\t          .replace(/\\r/g, '\\\\r')\n\t          .replace(/\\n/g, '\\\\n')\n\t      })\n\t    }\n\t    return expr\n\t  }\n\t\n\t  var\n\t    RE_BREND = {\n\t      '(': /[()]/g,\n\t      '[': /[[\\]]/g,\n\t      '{': /[{}]/g\n\t    }\n\t\n\t  function _parseExpr (expr, asText, qstr) {\n\t\n\t    expr = expr\n\t          .replace(RE_QBLOCK, function (s, div) {\n\t            return s.length > 2 && !div ? CH_IDEXPR + (qstr.push(s) - 1) + '~' : s\n\t          })\n\t          .replace(/\\s+/g, ' ').trim()\n\t          .replace(/\\ ?([[\\({},?\\.:])\\ ?/g, '$1')\n\t\n\t    if (expr) {\n\t      var\n\t        list = [],\n\t        cnt = 0,\n\t        match\n\t\n\t      while (expr &&\n\t            (match = expr.match(RE_CSNAME)) &&\n\t            !match.index\n\t        ) {\n\t        var\n\t          key,\n\t          jsb,\n\t          re = /,|([[{(])|$/g\n\t\n\t        expr = RegExp.rightContext\n\t        key  = match[2] ? qstr[match[2]].slice(1, -1).trim().replace(/\\s+/g, ' ') : match[1]\n\t\n\t        while (jsb = (match = re.exec(expr))[1]) skipBraces(jsb, re)\n\t\n\t        jsb  = expr.slice(0, match.index)\n\t        expr = RegExp.rightContext\n\t\n\t        list[cnt++] = _wrapExpr(jsb, 1, key)\n\t      }\n\t\n\t      expr = !cnt ? _wrapExpr(expr, asText)\n\t           : cnt > 1 ? '[' + list.join(',') + '].join(\" \").trim()' : list[0]\n\t    }\n\t    return expr\n\t\n\t    function skipBraces (ch, re) {\n\t      var\n\t        mm,\n\t        lv = 1,\n\t        ir = RE_BREND[ch]\n\t\n\t      ir.lastIndex = re.lastIndex\n\t      while (mm = ir.exec(expr)) {\n\t        if (mm[0] === ch) ++lv\n\t        else if (!--lv) break\n\t      }\n\t      re.lastIndex = lv ? expr.length : ir.lastIndex\n\t    }\n\t  }\n\t\n\t  // istanbul ignore next: not both\n\t  var // eslint-disable-next-line max-len\n\t    JS_CONTEXT = '\"in this?this:' + (typeof window !== 'object' ? 'global' : 'window') + ').',\n\t    JS_VARNAME = /[,{][\\$\\w]+(?=:)|(^ *|[^$\\w\\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\\w]))([$_A-Za-z][$\\w]*)/g,\n\t    JS_NOPROPS = /^(?=(\\.[$\\w]+))\\1(?:[^.[(]|$)/\n\t\n\t  function _wrapExpr (expr, asText, key) {\n\t    var tb\n\t\n\t    expr = expr.replace(JS_VARNAME, function (match, p, mvar, pos, s) {\n\t      if (mvar) {\n\t        pos = tb ? 0 : pos + match.length\n\t\n\t        if (mvar !== 'this' && mvar !== 'global' && mvar !== 'window') {\n\t          match = p + '(\"' + mvar + JS_CONTEXT + mvar\n\t          if (pos) tb = (s = s[pos]) === '.' || s === '(' || s === '['\n\t        } else if (pos) {\n\t          tb = !JS_NOPROPS.test(s.slice(pos))\n\t        }\n\t      }\n\t      return match\n\t    })\n\t\n\t    if (tb) {\n\t      expr = 'try{return ' + expr + '}catch(e){E(e,this)}'\n\t    }\n\t\n\t    if (key) {\n\t\n\t      expr = (tb\n\t          ? 'function(){' + expr + '}.call(this)' : '(' + expr + ')'\n\t        ) + '?\"' + key + '\":\"\"'\n\t\n\t    } else if (asText) {\n\t\n\t      expr = 'function(v){' + (tb\n\t          ? expr.replace('return ', 'v=') : 'v=(' + expr + ')'\n\t        ) + ';return v||v===0?v:\"\"}.call(this)'\n\t    }\n\t\n\t    return expr\n\t  }\n\t\n\t  _tmpl.version = brackets.version = 'v2.4.2'\n\t\n\t  return _tmpl\n\t\n\t})()\n\t\n\t/*\n\t  lib/browser/tag/mkdom.js\n\t\n\t  Includes hacks needed for the Internet Explorer version 9 and below\n\t  See: http://kangax.github.io/compat-table/es5/#ie8\n\t       http://codeplanet.io/dropping-ie8/\n\t*/\n\tvar mkdom = (function _mkdom() {\n\t  var\n\t    reHasYield  = /<yield\\b/i,\n\t    reYieldAll  = /<yield\\s*(?:\\/>|>([\\S\\s]*?)<\\/yield\\s*>|>)/ig,\n\t    reYieldSrc  = /<yield\\s+to=['\"]([^'\">]*)['\"]\\s*>([\\S\\s]*?)<\\/yield\\s*>/ig,\n\t    reYieldDest = /<yield\\s+from=['\"]?([-\\w]+)['\"]?\\s*(?:\\/>|>([\\S\\s]*?)<\\/yield\\s*>)/ig\n\t  var\n\t    rootEls = { tr: 'tbody', th: 'tr', td: 'tr', col: 'colgroup' },\n\t    tblTags = IE_VERSION && IE_VERSION < 10\n\t      ? SPECIAL_TAGS_REGEX : /^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/\n\t\n\t  /**\n\t   * Creates a DOM element to wrap the given content. Normally an `DIV`, but can be\n\t   * also a `TABLE`, `SELECT`, `TBODY`, `TR`, or `COLGROUP` element.\n\t   *\n\t   * @param   {string} templ  - The template coming from the custom tag definition\n\t   * @param   {string} [html] - HTML content that comes from the DOM element where you\n\t   *           will mount the tag, mostly the original tag in the page\n\t   * @returns {HTMLElement} DOM element with _templ_ merged through `YIELD` with the _html_.\n\t   */\n\t  function _mkdom(templ, html) {\n\t    var\n\t      match   = templ && templ.match(/^\\s*<([-\\w]+)/),\n\t      tagName = match && match[1].toLowerCase(),\n\t      el = mkEl('div', isSVGTag(tagName))\n\t\n\t    // replace all the yield tags with the tag inner html\n\t    templ = replaceYield(templ, html)\n\t\n\t    /* istanbul ignore next */\n\t    if (tblTags.test(tagName))\n\t      el = specialTags(el, templ, tagName)\n\t    else\n\t      setInnerHTML(el, templ)\n\t\n\t    el.stub = true\n\t\n\t    return el\n\t  }\n\t\n\t  /*\n\t    Creates the root element for table or select child elements:\n\t    tr/th/td/thead/tfoot/tbody/caption/col/colgroup/option/optgroup\n\t  */\n\t  function specialTags(el, templ, tagName) {\n\t    var\n\t      select = tagName[0] === 'o',\n\t      parent = select ? 'select>' : 'table>'\n\t\n\t    // trim() is important here, this ensures we don't have artifacts,\n\t    // so we can check if we have only one element inside the parent\n\t    el.innerHTML = '<' + parent + templ.trim() + '</' + parent\n\t    parent = el.firstChild\n\t\n\t    // returns the immediate parent if tr/th/td/col is the only element, if not\n\t    // returns the whole tree, as this can include additional elements\n\t    if (select) {\n\t      parent.selectedIndex = -1  // for IE9, compatible w/current riot behavior\n\t    } else {\n\t      // avoids insertion of cointainer inside container (ex: tbody inside tbody)\n\t      var tname = rootEls[tagName]\n\t      if (tname && parent.childElementCount === 1) parent = $(tname, parent)\n\t    }\n\t    return parent\n\t  }\n\t\n\t  /*\n\t    Replace the yield tag from any tag template with the innerHTML of the\n\t    original tag in the page\n\t  */\n\t  function replaceYield(templ, html) {\n\t    // do nothing if no yield\n\t    if (!reHasYield.test(templ)) return templ\n\t\n\t    // be careful with #1343 - string on the source having `$1`\n\t    var src = {}\n\t\n\t    html = html && html.replace(reYieldSrc, function (_, ref, text) {\n\t      src[ref] = src[ref] || text   // preserve first definition\n\t      return ''\n\t    }).trim()\n\t\n\t    return templ\n\t      .replace(reYieldDest, function (_, ref, def) {  // yield with from - to attrs\n\t        return src[ref] || def || ''\n\t      })\n\t      .replace(reYieldAll, function (_, def) {        // yield without any \"from\"\n\t        return html || def || ''\n\t      })\n\t  }\n\t\n\t  return _mkdom\n\t\n\t})()\n\t\n\t/**\n\t * Convert the item looped into an object used to extend the child tag properties\n\t * @param   { Object } expr - object containing the keys used to extend the children tags\n\t * @param   { * } key - value to assign to the new object returned\n\t * @param   { * } val - value containing the position of the item in the array\n\t * @returns { Object } - new object containing the values of the original item\n\t *\n\t * The variables 'key' and 'val' are arbitrary.\n\t * They depend on the collection type looped (Array, Object)\n\t * and on the expression used on the each tag\n\t *\n\t */\n\tfunction mkitem(expr, key, val) {\n\t  var item = {}\n\t  item[expr.key] = key\n\t  if (expr.pos) item[expr.pos] = val\n\t  return item\n\t}\n\t\n\t/**\n\t * Unmount the redundant tags\n\t * @param   { Array } items - array containing the current items to loop\n\t * @param   { Array } tags - array containing all the children tags\n\t */\n\tfunction unmountRedundant(items, tags) {\n\t\n\t  var i = tags.length,\n\t    j = items.length,\n\t    t\n\t\n\t  while (i > j) {\n\t    t = tags[--i]\n\t    tags.splice(i, 1)\n\t    t.unmount()\n\t  }\n\t}\n\t\n\t/**\n\t * Move the nested custom tags in non custom loop tags\n\t * @param   { Object } child - non custom loop tag\n\t * @param   { Number } i - current position of the loop tag\n\t */\n\tfunction moveNestedTags(child, i) {\n\t  Object.keys(child.tags).forEach(function(tagName) {\n\t    var tag = child.tags[tagName]\n\t    if (isArray(tag))\n\t      each(tag, function (t) {\n\t        moveChildTag(t, tagName, i)\n\t      })\n\t    else\n\t      moveChildTag(tag, tagName, i)\n\t  })\n\t}\n\t\n\t/**\n\t * Adds the elements for a virtual tag\n\t * @param { Tag } tag - the tag whose root's children will be inserted or appended\n\t * @param { Node } src - the node that will do the inserting or appending\n\t * @param { Tag } target - only if inserting, insert before this tag's first child\n\t */\n\tfunction addVirtual(tag, src, target) {\n\t  var el = tag._root, sib\n\t  tag._virts = []\n\t  while (el) {\n\t    sib = el.nextSibling\n\t    if (target)\n\t      src.insertBefore(el, target._root)\n\t    else\n\t      src.appendChild(el)\n\t\n\t    tag._virts.push(el) // hold for unmounting\n\t    el = sib\n\t  }\n\t}\n\t\n\t/**\n\t * Move virtual tag and all child nodes\n\t * @param { Tag } tag - first child reference used to start move\n\t * @param { Node } src  - the node that will do the inserting\n\t * @param { Tag } target - insert before this tag's first child\n\t * @param { Number } len - how many child nodes to move\n\t */\n\tfunction moveVirtual(tag, src, target, len) {\n\t  var el = tag._root, sib, i = 0\n\t  for (; i < len; i++) {\n\t    sib = el.nextSibling\n\t    src.insertBefore(el, target._root)\n\t    el = sib\n\t  }\n\t}\n\t\n\t\n\t/**\n\t * Manage tags having the 'each'\n\t * @param   { Object } dom - DOM node we need to loop\n\t * @param   { Tag } parent - parent tag instance where the dom node is contained\n\t * @param   { String } expr - string contained in the 'each' attribute\n\t */\n\tfunction _each(dom, parent, expr) {\n\t\n\t  // remove the each property from the original tag\n\t  remAttr(dom, 'each')\n\t\n\t  var mustReorder = typeof getAttr(dom, 'no-reorder') !== T_STRING || remAttr(dom, 'no-reorder'),\n\t    tagName = getTagName(dom),\n\t    impl = __tagImpl[tagName] || { tmpl: getOuterHTML(dom) },\n\t    useRoot = SPECIAL_TAGS_REGEX.test(tagName),\n\t    root = dom.parentNode,\n\t    ref = document.createTextNode(''),\n\t    child = getTag(dom),\n\t    isOption = tagName.toLowerCase() === 'option', // the option tags must be treated differently\n\t    tags = [],\n\t    oldItems = [],\n\t    hasKeys,\n\t    isVirtual = dom.tagName == 'VIRTUAL'\n\t\n\t  // parse the each expression\n\t  expr = tmpl.loopKeys(expr)\n\t\n\t  // insert a marked where the loop tags will be injected\n\t  root.insertBefore(ref, dom)\n\t\n\t  // clean template code\n\t  parent.one('before-mount', function () {\n\t\n\t    // remove the original DOM node\n\t    dom.parentNode.removeChild(dom)\n\t    if (root.stub) root = parent.root\n\t\n\t  }).on('update', function () {\n\t    // get the new items collection\n\t    var items = tmpl(expr.val, parent),\n\t      // create a fragment to hold the new DOM nodes to inject in the parent tag\n\t      frag = document.createDocumentFragment()\n\t\n\t    // object loop. any changes cause full redraw\n\t    if (!isArray(items)) {\n\t      hasKeys = items || false\n\t      items = hasKeys ?\n\t        Object.keys(items).map(function (key) {\n\t          return mkitem(expr, key, items[key])\n\t        }) : []\n\t    }\n\t\n\t    // loop all the new items\n\t    var i = 0,\n\t      itemsLength = items.length\n\t\n\t    for (; i < itemsLength; i++) {\n\t      // reorder only if the items are objects\n\t      var\n\t        item = items[i],\n\t        _mustReorder = mustReorder && typeof item == T_OBJECT && !hasKeys,\n\t        oldPos = oldItems.indexOf(item),\n\t        pos = ~oldPos && _mustReorder ? oldPos : i,\n\t        // does a tag exist in this position?\n\t        tag = tags[pos]\n\t\n\t      item = !hasKeys && expr.key ? mkitem(expr, item, i) : item\n\t\n\t      // new tag\n\t      if (\n\t        !_mustReorder && !tag // with no-reorder we just update the old tags\n\t        ||\n\t        _mustReorder && !~oldPos || !tag // by default we always try to reorder the DOM elements\n\t      ) {\n\t\n\t        tag = new Tag(impl, {\n\t          parent: parent,\n\t          isLoop: true,\n\t          hasImpl: !!__tagImpl[tagName],\n\t          root: useRoot ? root : dom.cloneNode(),\n\t          item: item\n\t        }, dom.innerHTML)\n\t\n\t        tag.mount()\n\t\n\t        if (isVirtual) tag._root = tag.root.firstChild // save reference for further moves or inserts\n\t        // this tag must be appended\n\t        if (i == tags.length || !tags[i]) { // fix 1581\n\t          if (isVirtual)\n\t            addVirtual(tag, frag)\n\t          else frag.appendChild(tag.root)\n\t        }\n\t        // this tag must be insert\n\t        else {\n\t          if (isVirtual)\n\t            addVirtual(tag, root, tags[i])\n\t          else root.insertBefore(tag.root, tags[i].root) // #1374 some browsers reset selected here\n\t          oldItems.splice(i, 0, item)\n\t        }\n\t\n\t        tags.splice(i, 0, tag)\n\t        pos = i // handled here so no move\n\t      } else tag.update(item, true)\n\t\n\t      // reorder the tag if it's not located in its previous position\n\t      if (\n\t        pos !== i && _mustReorder &&\n\t        tags[i] // fix 1581 unable to reproduce it in a test!\n\t      ) {\n\t        // update the DOM\n\t        if (isVirtual)\n\t          moveVirtual(tag, root, tags[i], dom.childNodes.length)\n\t        else if (tags[i].root.parentNode) root.insertBefore(tag.root, tags[i].root)\n\t        // update the position attribute if it exists\n\t        if (expr.pos)\n\t          tag[expr.pos] = i\n\t        // move the old tag instance\n\t        tags.splice(i, 0, tags.splice(pos, 1)[0])\n\t        // move the old item\n\t        oldItems.splice(i, 0, oldItems.splice(pos, 1)[0])\n\t        // if the loop tags are not custom\n\t        // we need to move all their custom tags into the right position\n\t        if (!child && tag.tags) moveNestedTags(tag, i)\n\t      }\n\t\n\t      // cache the original item to use it in the events bound to this node\n\t      // and its children\n\t      tag._item = item\n\t      // cache the real parent tag internally\n\t      defineProperty(tag, '_parent', parent)\n\t    }\n\t\n\t    // remove the redundant tags\n\t    unmountRedundant(items, tags)\n\t\n\t    // insert the new nodes\n\t    root.insertBefore(frag, ref)\n\t    if (isOption) {\n\t\n\t      // #1374 FireFox bug in <option selected={expression}>\n\t      if (FIREFOX && !root.multiple) {\n\t        for (var n = 0; n < root.length; n++) {\n\t          if (root[n].__riot1374) {\n\t            root.selectedIndex = n  // clear other options\n\t            delete root[n].__riot1374\n\t            break\n\t          }\n\t        }\n\t      }\n\t    }\n\t\n\t    // set the 'tags' property of the parent tag\n\t    // if child is 'undefined' it means that we don't need to set this property\n\t    // for example:\n\t    // we don't need store the `myTag.tags['div']` property if we are looping a div tag\n\t    // but we need to track the `myTag.tags['child']` property looping a custom child node named `child`\n\t    if (child) parent.tags[tagName] = tags\n\t\n\t    // clone the items array\n\t    oldItems = items.slice()\n\t\n\t  })\n\t\n\t}\n\t/**\n\t * Object that will be used to inject and manage the css of every tag instance\n\t */\n\tvar styleManager = (function(_riot) {\n\t\n\t  if (!window) return { // skip injection on the server\n\t    add: function () {},\n\t    inject: function () {}\n\t  }\n\t\n\t  var styleNode = (function () {\n\t    // create a new style element with the correct type\n\t    var newNode = mkEl('style')\n\t    setAttr(newNode, 'type', 'text/css')\n\t\n\t    // replace any user node or insert the new one into the head\n\t    var userNode = $('style[type=riot]')\n\t    if (userNode) {\n\t      if (userNode.id) newNode.id = userNode.id\n\t      userNode.parentNode.replaceChild(newNode, userNode)\n\t    }\n\t    else document.getElementsByTagName('head')[0].appendChild(newNode)\n\t\n\t    return newNode\n\t  })()\n\t\n\t  // Create cache and shortcut to the correct property\n\t  var cssTextProp = styleNode.styleSheet,\n\t    stylesToInject = ''\n\t\n\t  // Expose the style node in a non-modificable property\n\t  Object.defineProperty(_riot, 'styleNode', {\n\t    value: styleNode,\n\t    writable: true\n\t  })\n\t\n\t  /**\n\t   * Public api\n\t   */\n\t  return {\n\t    /**\n\t     * Save a tag style to be later injected into DOM\n\t     * @param   { String } css [description]\n\t     */\n\t    add: function(css) {\n\t      stylesToInject += css\n\t    },\n\t    /**\n\t     * Inject all previously saved tag styles into DOM\n\t     * innerHTML seems slow: http://jsperf.com/riot-insert-style\n\t     */\n\t    inject: function() {\n\t      if (stylesToInject) {\n\t        if (cssTextProp) cssTextProp.cssText += stylesToInject\n\t        else styleNode.innerHTML += stylesToInject\n\t        stylesToInject = ''\n\t      }\n\t    }\n\t  }\n\t\n\t})(riot)\n\t\n\t\n\tfunction parseNamedElements(root, tag, childTags, forceParsingNamed) {\n\t\n\t  walk(root, function(dom) {\n\t    if (dom.nodeType == 1) {\n\t      dom.isLoop = dom.isLoop ||\n\t                  (dom.parentNode && dom.parentNode.isLoop || getAttr(dom, 'each'))\n\t                    ? 1 : 0\n\t\n\t      // custom child tag\n\t      if (childTags) {\n\t        var child = getTag(dom)\n\t\n\t        if (child && !dom.isLoop)\n\t          childTags.push(initChildTag(child, {root: dom, parent: tag}, dom.innerHTML, tag))\n\t      }\n\t\n\t      if (!dom.isLoop || forceParsingNamed)\n\t        setNamed(dom, tag, [])\n\t    }\n\t\n\t  })\n\t\n\t}\n\t\n\tfunction parseExpressions(root, tag, expressions) {\n\t\n\t  function addExpr(dom, val, extra) {\n\t    if (tmpl.hasExpr(val)) {\n\t      expressions.push(extend({ dom: dom, expr: val }, extra))\n\t    }\n\t  }\n\t\n\t  walk(root, function(dom) {\n\t    var type = dom.nodeType,\n\t      attr\n\t\n\t    // text node\n\t    if (type == 3 && dom.parentNode.tagName != 'STYLE') addExpr(dom, dom.nodeValue)\n\t    if (type != 1) return\n\t\n\t    /* element */\n\t\n\t    // loop\n\t    attr = getAttr(dom, 'each')\n\t\n\t    if (attr) { _each(dom, tag, attr); return false }\n\t\n\t    // attribute expressions\n\t    each(dom.attributes, function(attr) {\n\t      var name = attr.name,\n\t        bool = name.split('__')[1]\n\t\n\t      addExpr(dom, attr.value, { attr: bool || name, bool: bool })\n\t      if (bool) { remAttr(dom, name); return false }\n\t\n\t    })\n\t\n\t    // skip custom tags\n\t    if (getTag(dom)) return false\n\t\n\t  })\n\t\n\t}\n\tfunction Tag(impl, conf, innerHTML) {\n\t\n\t  var self = riot.observable(this),\n\t    opts = inherit(conf.opts) || {},\n\t    parent = conf.parent,\n\t    isLoop = conf.isLoop,\n\t    hasImpl = conf.hasImpl,\n\t    item = cleanUpData(conf.item),\n\t    expressions = [],\n\t    childTags = [],\n\t    root = conf.root,\n\t    tagName = root.tagName.toLowerCase(),\n\t    attr = {},\n\t    propsInSyncWithParent = [],\n\t    dom\n\t\n\t  // only call unmount if we have a valid __tagImpl (has name property)\n\t  if (impl.name && root._tag) root._tag.unmount(true)\n\t\n\t  // not yet mounted\n\t  this.isMounted = false\n\t  root.isLoop = isLoop\n\t\n\t  // keep a reference to the tag just created\n\t  // so we will be able to mount this tag multiple times\n\t  root._tag = this\n\t\n\t  // create a unique id to this tag\n\t  // it could be handy to use it also to improve the virtual dom rendering speed\n\t  defineProperty(this, '_riot_id', ++__uid) // base 1 allows test !t._riot_id\n\t\n\t  extend(this, { parent: parent, root: root, opts: opts}, item)\n\t  // protect the \"tags\" property from being overridden\n\t  defineProperty(this, 'tags', {})\n\t\n\t  // grab attributes\n\t  each(root.attributes, function(el) {\n\t    var val = el.value\n\t    // remember attributes with expressions only\n\t    if (tmpl.hasExpr(val)) attr[el.name] = val\n\t  })\n\t\n\t  dom = mkdom(impl.tmpl, innerHTML)\n\t\n\t  // options\n\t  function updateOpts() {\n\t    var ctx = hasImpl && isLoop ? self : parent || self\n\t\n\t    // update opts from current DOM attributes\n\t    each(root.attributes, function(el) {\n\t      var val = el.value\n\t      opts[toCamel(el.name)] = tmpl.hasExpr(val) ? tmpl(val, ctx) : val\n\t    })\n\t    // recover those with expressions\n\t    each(Object.keys(attr), function(name) {\n\t      opts[toCamel(name)] = tmpl(attr[name], ctx)\n\t    })\n\t  }\n\t\n\t  function normalizeData(data) {\n\t    for (var key in item) {\n\t      if (typeof self[key] !== T_UNDEF && isWritable(self, key))\n\t        self[key] = data[key]\n\t    }\n\t  }\n\t\n\t  function inheritFrom(target) {\n\t    each(Object.keys(target), function(k) {\n\t      // some properties must be always in sync with the parent tag\n\t      var mustSync = !RESERVED_WORDS_BLACKLIST.test(k) && contains(propsInSyncWithParent, k)\n\t\n\t      if (typeof self[k] === T_UNDEF || mustSync) {\n\t        // track the property to keep in sync\n\t        // so we can keep it updated\n\t        if (!mustSync) propsInSyncWithParent.push(k)\n\t        self[k] = target[k]\n\t      }\n\t    })\n\t  }\n\t\n\t  /**\n\t   * Update the tag expressions and options\n\t   * @param   { * }  data - data we want to use to extend the tag properties\n\t   * @param   { Boolean } isInherited - is this update coming from a parent tag?\n\t   * @returns { self }\n\t   */\n\t  defineProperty(this, 'update', function(data, isInherited) {\n\t\n\t    // make sure the data passed will not override\n\t    // the component core methods\n\t    data = cleanUpData(data)\n\t    // inherit properties from the parent in loop\n\t    if (isLoop) {\n\t      inheritFrom(self.parent)\n\t    }\n\t    // normalize the tag properties in case an item object was initially passed\n\t    if (data && isObject(item)) {\n\t      normalizeData(data)\n\t      item = data\n\t    }\n\t    extend(self, data)\n\t    updateOpts()\n\t    self.trigger('update', data)\n\t    update(expressions, self)\n\t\n\t    // the updated event will be triggered\n\t    // once the DOM will be ready and all the re-flows are completed\n\t    // this is useful if you want to get the \"real\" root properties\n\t    // 4 ex: root.offsetWidth ...\n\t    if (isInherited && self.parent)\n\t      // closes #1599\n\t      self.parent.one('updated', function() { self.trigger('updated') })\n\t    else rAF(function() { self.trigger('updated') })\n\t\n\t    return this\n\t  })\n\t\n\t  defineProperty(this, 'mixin', function() {\n\t    each(arguments, function(mix) {\n\t      var instance,\n\t        props = [],\n\t        obj\n\t\n\t      mix = typeof mix === T_STRING ? riot.mixin(mix) : mix\n\t\n\t      // check if the mixin is a function\n\t      if (isFunction(mix)) {\n\t        // create the new mixin instance\n\t        instance = new mix()\n\t      } else instance = mix\n\t\n\t      var proto = Object.getPrototypeOf(instance)\n\t\n\t      // build multilevel prototype inheritance chain property list\n\t      do props = props.concat(Object.getOwnPropertyNames(obj || instance))\n\t      while (obj = Object.getPrototypeOf(obj || instance))\n\t\n\t      // loop the keys in the function prototype or the all object keys\n\t      each(props, function(key) {\n\t        // bind methods to self\n\t        // allow mixins to override other properties/parent mixins\n\t        if (key != 'init') {\n\t          // check for getters/setters\n\t          var descriptor = Object.getOwnPropertyDescriptor(instance, key) || Object.getOwnPropertyDescriptor(proto, key)\n\t          var hasGetterSetter = descriptor && (descriptor.get || descriptor.set)\n\t\n\t          // apply method only if it does not already exist on the instance\n\t          if (!self.hasOwnProperty(key) && hasGetterSetter) {\n\t            Object.defineProperty(self, key, descriptor)\n\t          } else {\n\t            self[key] = isFunction(instance[key]) ?\n\t              instance[key].bind(self) :\n\t              instance[key]\n\t          }\n\t        }\n\t      })\n\t\n\t      // init method will be called automatically\n\t      if (instance.init) instance.init.bind(self)()\n\t    })\n\t    return this\n\t  })\n\t\n\t  defineProperty(this, 'mount', function() {\n\t\n\t    updateOpts()\n\t\n\t    // add global mixins\n\t    var globalMixin = riot.mixin(GLOBAL_MIXIN)\n\t\n\t    if (globalMixin)\n\t      for (var i in globalMixin)\n\t        if (globalMixin.hasOwnProperty(i))\n\t          self.mixin(globalMixin[i])\n\t\n\t    // children in loop should inherit from true parent\n\t    if (self._parent && self._parent.root.isLoop) {\n\t      inheritFrom(self._parent)\n\t    }\n\t\n\t    // initialiation\n\t    if (impl.fn) impl.fn.call(self, opts)\n\t\n\t    // parse layout after init. fn may calculate args for nested custom tags\n\t    parseExpressions(dom, self, expressions)\n\t\n\t    // mount the child tags\n\t    toggle(true)\n\t\n\t    // update the root adding custom attributes coming from the compiler\n\t    // it fixes also #1087\n\t    if (impl.attrs)\n\t      walkAttributes(impl.attrs, function (k, v) { setAttr(root, k, v) })\n\t    if (impl.attrs || hasImpl)\n\t      parseExpressions(self.root, self, expressions)\n\t\n\t    if (!self.parent || isLoop) self.update(item)\n\t\n\t    // internal use only, fixes #403\n\t    self.trigger('before-mount')\n\t\n\t    if (isLoop && !hasImpl) {\n\t      // update the root attribute for the looped elements\n\t      root = dom.firstChild\n\t    } else {\n\t      while (dom.firstChild) root.appendChild(dom.firstChild)\n\t      if (root.stub) root = parent.root\n\t    }\n\t\n\t    defineProperty(self, 'root', root)\n\t\n\t    // parse the named dom nodes in the looped child\n\t    // adding them to the parent as well\n\t    if (isLoop)\n\t      parseNamedElements(self.root, self.parent, null, true)\n\t\n\t    // if it's not a child tag we can trigger its mount event\n\t    if (!self.parent || self.parent.isMounted) {\n\t      self.isMounted = true\n\t      self.trigger('mount')\n\t    }\n\t    // otherwise we need to wait that the parent event gets triggered\n\t    else self.parent.one('mount', function() {\n\t      // avoid to trigger the `mount` event for the tags\n\t      // not visible included in an if statement\n\t      if (!isInStub(self.root)) {\n\t        self.parent.isMounted = self.isMounted = true\n\t        self.trigger('mount')\n\t      }\n\t    })\n\t  })\n\t\n\t\n\t  defineProperty(this, 'unmount', function(keepRootTag) {\n\t    var el = root,\n\t      p = el.parentNode,\n\t      ptag,\n\t      tagIndex = __virtualDom.indexOf(self)\n\t\n\t    self.trigger('before-unmount')\n\t\n\t    // remove this tag instance from the global virtualDom variable\n\t    if (~tagIndex)\n\t      __virtualDom.splice(tagIndex, 1)\n\t\n\t    if (p) {\n\t\n\t      if (parent) {\n\t        ptag = getImmediateCustomParentTag(parent)\n\t        // remove this tag from the parent tags object\n\t        // if there are multiple nested tags with same name..\n\t        // remove this element form the array\n\t        if (isArray(ptag.tags[tagName]))\n\t          each(ptag.tags[tagName], function(tag, i) {\n\t            if (tag._riot_id == self._riot_id)\n\t              ptag.tags[tagName].splice(i, 1)\n\t          })\n\t        else\n\t          // otherwise just delete the tag instance\n\t          ptag.tags[tagName] = undefined\n\t      }\n\t\n\t      else\n\t        while (el.firstChild) el.removeChild(el.firstChild)\n\t\n\t      if (!keepRootTag)\n\t        p.removeChild(el)\n\t      else {\n\t        // the riot-tag and the data-is attributes aren't needed anymore, remove them\n\t        remAttr(p, RIOT_TAG_IS)\n\t        remAttr(p, RIOT_TAG) // this will be removed in riot 3.0.0\n\t      }\n\t\n\t    }\n\t\n\t    if (this._virts) {\n\t      each(this._virts, function(v) {\n\t        if (v.parentNode) v.parentNode.removeChild(v)\n\t      })\n\t    }\n\t\n\t    self.trigger('unmount')\n\t    toggle()\n\t    self.off('*')\n\t    self.isMounted = false\n\t    delete root._tag\n\t\n\t  })\n\t\n\t  // proxy function to bind updates\n\t  // dispatched from a parent tag\n\t  function onChildUpdate(data) { self.update(data, true) }\n\t\n\t  function toggle(isMount) {\n\t\n\t    // mount/unmount children\n\t    each(childTags, function(child) { child[isMount ? 'mount' : 'unmount']() })\n\t\n\t    // listen/unlisten parent (events flow one way from parent to children)\n\t    if (!parent) return\n\t    var evt = isMount ? 'on' : 'off'\n\t\n\t    // the loop tags will be always in sync with the parent automatically\n\t    if (isLoop)\n\t      parent[evt]('unmount', self.unmount)\n\t    else {\n\t      parent[evt]('update', onChildUpdate)[evt]('unmount', self.unmount)\n\t    }\n\t  }\n\t\n\t\n\t  // named elements available for fn\n\t  parseNamedElements(dom, this, childTags)\n\t\n\t}\n\t/**\n\t * Attach an event to a DOM node\n\t * @param { String } name - event name\n\t * @param { Function } handler - event callback\n\t * @param { Object } dom - dom node\n\t * @param { Tag } tag - tag instance\n\t */\n\tfunction setEventHandler(name, handler, dom, tag) {\n\t\n\t  dom[name] = function(e) {\n\t\n\t    var ptag = tag._parent,\n\t      item = tag._item,\n\t      el\n\t\n\t    if (!item)\n\t      while (ptag && !item) {\n\t        item = ptag._item\n\t        ptag = ptag._parent\n\t      }\n\t\n\t    // cross browser event fix\n\t    e = e || window.event\n\t\n\t    // override the event properties\n\t    if (isWritable(e, 'currentTarget')) e.currentTarget = dom\n\t    if (isWritable(e, 'target')) e.target = e.srcElement\n\t    if (isWritable(e, 'which')) e.which = e.charCode || e.keyCode\n\t\n\t    e.item = item\n\t\n\t    // prevent default behaviour (by default)\n\t    if (handler.call(tag, e) !== true && !/radio|check/.test(dom.type)) {\n\t      if (e.preventDefault) e.preventDefault()\n\t      e.returnValue = false\n\t    }\n\t\n\t    if (!e.preventUpdate) {\n\t      el = item ? getImmediateCustomParentTag(ptag) : tag\n\t      el.update()\n\t    }\n\t\n\t  }\n\t\n\t}\n\t\n\t\n\t/**\n\t * Insert a DOM node replacing another one (used by if- attribute)\n\t * @param   { Object } root - parent node\n\t * @param   { Object } node - node replaced\n\t * @param   { Object } before - node added\n\t */\n\tfunction insertTo(root, node, before) {\n\t  if (!root) return\n\t  root.insertBefore(before, node)\n\t  root.removeChild(node)\n\t}\n\t\n\t/**\n\t * Update the expressions in a Tag instance\n\t * @param   { Array } expressions - expression that must be re evaluated\n\t * @param   { Tag } tag - tag instance\n\t */\n\tfunction update(expressions, tag) {\n\t\n\t  each(expressions, function(expr, i) {\n\t\n\t    var dom = expr.dom,\n\t      attrName = expr.attr,\n\t      value = tmpl(expr.expr, tag),\n\t      parent = expr.parent || expr.dom.parentNode\n\t\n\t    if (expr.bool) {\n\t      value = !!value\n\t    } else if (value == null) {\n\t      value = ''\n\t    }\n\t\n\t    // #1638: regression of #1612, update the dom only if the value of the\n\t    // expression was changed\n\t    if (expr.value === value) {\n\t      return\n\t    }\n\t    expr.value = value\n\t\n\t    // textarea and text nodes has no attribute name\n\t    if (!attrName) {\n\t      // about #815 w/o replace: the browser converts the value to a string,\n\t      // the comparison by \"==\" does too, but not in the server\n\t      value += ''\n\t      // test for parent avoids error with invalid assignment to nodeValue\n\t      if (parent) {\n\t        // cache the parent node because somehow it will become null on IE\n\t        // on the next iteration\n\t        expr.parent = parent\n\t        if (parent.tagName === 'TEXTAREA') {\n\t          parent.value = value                    // #1113\n\t          if (!IE_VERSION) dom.nodeValue = value  // #1625 IE throws here, nodeValue\n\t        }                                         // will be available on 'updated'\n\t        else dom.nodeValue = value\n\t      }\n\t      return\n\t    }\n\t\n\t    // ~~#1612: look for changes in dom.value when updating the value~~\n\t    if (attrName === 'value') {\n\t      if (dom.value !== value) {\n\t        dom.value = value\n\t        setAttr(dom, attrName, value)\n\t      }\n\t      return\n\t    } else {\n\t      // remove original attribute\n\t      remAttr(dom, attrName)\n\t    }\n\t\n\t    // event handler\n\t    if (isFunction(value)) {\n\t      setEventHandler(attrName, value, dom, tag)\n\t\n\t    // if- conditional\n\t    } else if (attrName == 'if') {\n\t      var stub = expr.stub,\n\t        add = function() { insertTo(stub.parentNode, stub, dom) },\n\t        remove = function() { insertTo(dom.parentNode, dom, stub) }\n\t\n\t      // add to DOM\n\t      if (value) {\n\t        if (stub) {\n\t          add()\n\t          dom.inStub = false\n\t          // avoid to trigger the mount event if the tags is not visible yet\n\t          // maybe we can optimize this avoiding to mount the tag at all\n\t          if (!isInStub(dom)) {\n\t            walk(dom, function(el) {\n\t              if (el._tag && !el._tag.isMounted)\n\t                el._tag.isMounted = !!el._tag.trigger('mount')\n\t            })\n\t          }\n\t        }\n\t      // remove from DOM\n\t      } else {\n\t        stub = expr.stub = stub || document.createTextNode('')\n\t        // if the parentNode is defined we can easily replace the tag\n\t        if (dom.parentNode)\n\t          remove()\n\t        // otherwise we need to wait the updated event\n\t        else (tag.parent || tag).one('updated', remove)\n\t\n\t        dom.inStub = true\n\t      }\n\t    // show / hide\n\t    } else if (attrName === 'show') {\n\t      dom.style.display = value ? '' : 'none'\n\t\n\t    } else if (attrName === 'hide') {\n\t      dom.style.display = value ? 'none' : ''\n\t\n\t    } else if (expr.bool) {\n\t      dom[attrName] = value\n\t      if (value) setAttr(dom, attrName, attrName)\n\t      if (FIREFOX && attrName === 'selected' && dom.tagName === 'OPTION') {\n\t        dom.__riot1374 = value   // #1374\n\t      }\n\t\n\t    } else if (value === 0 || value && typeof value !== T_OBJECT) {\n\t      // <img src=\"{ expr }\">\n\t      if (startsWith(attrName, RIOT_PREFIX) && attrName != RIOT_TAG) {\n\t        attrName = attrName.slice(RIOT_PREFIX.length)\n\t      }\n\t      setAttr(dom, attrName, value)\n\t    }\n\t\n\t  })\n\t\n\t}\n\t/**\n\t * Specialized function for looping an array-like collection with `each={}`\n\t * @param   { Array } els - collection of items\n\t * @param   {Function} fn - callback function\n\t * @returns { Array } the array looped\n\t */\n\tfunction each(els, fn) {\n\t  var len = els ? els.length : 0\n\t\n\t  for (var i = 0, el; i < len; i++) {\n\t    el = els[i]\n\t    // return false -> current item was removed by fn during the loop\n\t    if (el != null && fn(el, i) === false) i--\n\t  }\n\t  return els\n\t}\n\t\n\t/**\n\t * Detect if the argument passed is a function\n\t * @param   { * } v - whatever you want to pass to this function\n\t * @returns { Boolean } -\n\t */\n\tfunction isFunction(v) {\n\t  return typeof v === T_FUNCTION || false   // avoid IE problems\n\t}\n\t\n\t/**\n\t * Get the outer html of any DOM node SVGs included\n\t * @param   { Object } el - DOM node to parse\n\t * @returns { String } el.outerHTML\n\t */\n\tfunction getOuterHTML(el) {\n\t  if (el.outerHTML) return el.outerHTML\n\t  // some browsers do not support outerHTML on the SVGs tags\n\t  else {\n\t    var container = mkEl('div')\n\t    container.appendChild(el.cloneNode(true))\n\t    return container.innerHTML\n\t  }\n\t}\n\t\n\t/**\n\t * Set the inner html of any DOM node SVGs included\n\t * @param { Object } container - DOM node where we will inject the new html\n\t * @param { String } html - html to inject\n\t */\n\tfunction setInnerHTML(container, html) {\n\t  if (typeof container.innerHTML != T_UNDEF) container.innerHTML = html\n\t  // some browsers do not support innerHTML on the SVGs tags\n\t  else {\n\t    var doc = new DOMParser().parseFromString(html, 'application/xml')\n\t    container.appendChild(\n\t      container.ownerDocument.importNode(doc.documentElement, true)\n\t    )\n\t  }\n\t}\n\t\n\t/**\n\t * Checks wether a DOM node must be considered part of an svg document\n\t * @param   { String }  name - tag name\n\t * @returns { Boolean } -\n\t */\n\tfunction isSVGTag(name) {\n\t  return ~SVG_TAGS_LIST.indexOf(name)\n\t}\n\t\n\t/**\n\t * Detect if the argument passed is an object, exclude null.\n\t * NOTE: Use isObject(x) && !isArray(x) to excludes arrays.\n\t * @param   { * } v - whatever you want to pass to this function\n\t * @returns { Boolean } -\n\t */\n\tfunction isObject(v) {\n\t  return v && typeof v === T_OBJECT         // typeof null is 'object'\n\t}\n\t\n\t/**\n\t * Remove any DOM attribute from a node\n\t * @param   { Object } dom - DOM node we want to update\n\t * @param   { String } name - name of the property we want to remove\n\t */\n\tfunction remAttr(dom, name) {\n\t  dom.removeAttribute(name)\n\t}\n\t\n\t/**\n\t * Convert a string containing dashes to camel case\n\t * @param   { String } string - input string\n\t * @returns { String } my-string -> myString\n\t */\n\tfunction toCamel(string) {\n\t  return string.replace(/-(\\w)/g, function(_, c) {\n\t    return c.toUpperCase()\n\t  })\n\t}\n\t\n\t/**\n\t * Get the value of any DOM attribute on a node\n\t * @param   { Object } dom - DOM node we want to parse\n\t * @param   { String } name - name of the attribute we want to get\n\t * @returns { String | undefined } name of the node attribute whether it exists\n\t */\n\tfunction getAttr(dom, name) {\n\t  return dom.getAttribute(name)\n\t}\n\t\n\t/**\n\t * Set any DOM/SVG attribute\n\t * @param { Object } dom - DOM node we want to update\n\t * @param { String } name - name of the property we want to set\n\t * @param { String } val - value of the property we want to set\n\t */\n\tfunction setAttr(dom, name, val) {\n\t  var xlink = XLINK_REGEX.exec(name)\n\t  if (xlink && xlink[1])\n\t    dom.setAttributeNS(XLINK_NS, xlink[1], val)\n\t  else\n\t    dom.setAttribute(name, val)\n\t}\n\t\n\t/**\n\t * Detect the tag implementation by a DOM node\n\t * @param   { Object } dom - DOM node we need to parse to get its tag implementation\n\t * @returns { Object } it returns an object containing the implementation of a custom tag (template and boot function)\n\t */\n\tfunction getTag(dom) {\n\t  return dom.tagName && __tagImpl[getAttr(dom, RIOT_TAG_IS) ||\n\t    getAttr(dom, RIOT_TAG) || dom.tagName.toLowerCase()]\n\t}\n\t/**\n\t * Add a child tag to its parent into the `tags` object\n\t * @param   { Object } tag - child tag instance\n\t * @param   { String } tagName - key where the new tag will be stored\n\t * @param   { Object } parent - tag instance where the new child tag will be included\n\t */\n\tfunction addChildTag(tag, tagName, parent) {\n\t  var cachedTag = parent.tags[tagName]\n\t\n\t  // if there are multiple children tags having the same name\n\t  if (cachedTag) {\n\t    // if the parent tags property is not yet an array\n\t    // create it adding the first cached tag\n\t    if (!isArray(cachedTag))\n\t      // don't add the same tag twice\n\t      if (cachedTag !== tag)\n\t        parent.tags[tagName] = [cachedTag]\n\t    // add the new nested tag to the array\n\t    if (!contains(parent.tags[tagName], tag))\n\t      parent.tags[tagName].push(tag)\n\t  } else {\n\t    parent.tags[tagName] = tag\n\t  }\n\t}\n\t\n\t/**\n\t * Move the position of a custom tag in its parent tag\n\t * @param   { Object } tag - child tag instance\n\t * @param   { String } tagName - key where the tag was stored\n\t * @param   { Number } newPos - index where the new tag will be stored\n\t */\n\tfunction moveChildTag(tag, tagName, newPos) {\n\t  var parent = tag.parent,\n\t    tags\n\t  // no parent no move\n\t  if (!parent) return\n\t\n\t  tags = parent.tags[tagName]\n\t\n\t  if (isArray(tags))\n\t    tags.splice(newPos, 0, tags.splice(tags.indexOf(tag), 1)[0])\n\t  else addChildTag(tag, tagName, parent)\n\t}\n\t\n\t/**\n\t * Create a new child tag including it correctly into its parent\n\t * @param   { Object } child - child tag implementation\n\t * @param   { Object } opts - tag options containing the DOM node where the tag will be mounted\n\t * @param   { String } innerHTML - inner html of the child node\n\t * @param   { Object } parent - instance of the parent tag including the child custom tag\n\t * @returns { Object } instance of the new child tag just created\n\t */\n\tfunction initChildTag(child, opts, innerHTML, parent) {\n\t  var tag = new Tag(child, opts, innerHTML),\n\t    tagName = getTagName(opts.root),\n\t    ptag = getImmediateCustomParentTag(parent)\n\t  // fix for the parent attribute in the looped elements\n\t  tag.parent = ptag\n\t  // store the real parent tag\n\t  // in some cases this could be different from the custom parent tag\n\t  // for example in nested loops\n\t  tag._parent = parent\n\t\n\t  // add this tag to the custom parent tag\n\t  addChildTag(tag, tagName, ptag)\n\t  // and also to the real parent tag\n\t  if (ptag !== parent)\n\t    addChildTag(tag, tagName, parent)\n\t  // empty the child node once we got its template\n\t  // to avoid that its children get compiled multiple times\n\t  opts.root.innerHTML = ''\n\t\n\t  return tag\n\t}\n\t\n\t/**\n\t * Loop backward all the parents tree to detect the first custom parent tag\n\t * @param   { Object } tag - a Tag instance\n\t * @returns { Object } the instance of the first custom parent tag found\n\t */\n\tfunction getImmediateCustomParentTag(tag) {\n\t  var ptag = tag\n\t  while (!getTag(ptag.root)) {\n\t    if (!ptag.parent) break\n\t    ptag = ptag.parent\n\t  }\n\t  return ptag\n\t}\n\t\n\t/**\n\t * Helper function to set an immutable property\n\t * @param   { Object } el - object where the new property will be set\n\t * @param   { String } key - object key where the new property will be stored\n\t * @param   { * } value - value of the new property\n\t* @param   { Object } options - set the propery overriding the default options\n\t * @returns { Object } - the initial object\n\t */\n\tfunction defineProperty(el, key, value, options) {\n\t  Object.defineProperty(el, key, extend({\n\t    value: value,\n\t    enumerable: false,\n\t    writable: false,\n\t    configurable: true\n\t  }, options))\n\t  return el\n\t}\n\t\n\t/**\n\t * Get the tag name of any DOM node\n\t * @param   { Object } dom - DOM node we want to parse\n\t * @returns { String } name to identify this dom node in riot\n\t */\n\tfunction getTagName(dom) {\n\t  var child = getTag(dom),\n\t    namedTag = getAttr(dom, 'name'),\n\t    tagName = namedTag && !tmpl.hasExpr(namedTag) ?\n\t                namedTag :\n\t              child ? child.name : dom.tagName.toLowerCase()\n\t\n\t  return tagName\n\t}\n\t\n\t/**\n\t * Extend any object with other properties\n\t * @param   { Object } src - source object\n\t * @returns { Object } the resulting extended object\n\t *\n\t * var obj = { foo: 'baz' }\n\t * extend(obj, {bar: 'bar', foo: 'bar'})\n\t * console.log(obj) => {bar: 'bar', foo: 'bar'}\n\t *\n\t */\n\tfunction extend(src) {\n\t  var obj, args = arguments\n\t  for (var i = 1; i < args.length; ++i) {\n\t    if (obj = args[i]) {\n\t      for (var key in obj) {\n\t        // check if this property of the source object could be overridden\n\t        if (isWritable(src, key))\n\t          src[key] = obj[key]\n\t      }\n\t    }\n\t  }\n\t  return src\n\t}\n\t\n\t/**\n\t * Check whether an array contains an item\n\t * @param   { Array } arr - target array\n\t * @param   { * } item - item to test\n\t * @returns { Boolean } Does 'arr' contain 'item'?\n\t */\n\tfunction contains(arr, item) {\n\t  return ~arr.indexOf(item)\n\t}\n\t\n\t/**\n\t * Check whether an object is a kind of array\n\t * @param   { * } a - anything\n\t * @returns {Boolean} is 'a' an array?\n\t */\n\tfunction isArray(a) { return Array.isArray(a) || a instanceof Array }\n\t\n\t/**\n\t * Detect whether a property of an object could be overridden\n\t * @param   { Object }  obj - source object\n\t * @param   { String }  key - object property\n\t * @returns { Boolean } is this property writable?\n\t */\n\tfunction isWritable(obj, key) {\n\t  var props = Object.getOwnPropertyDescriptor(obj, key)\n\t  return typeof obj[key] === T_UNDEF || props && props.writable\n\t}\n\t\n\t\n\t/**\n\t * With this function we avoid that the internal Tag methods get overridden\n\t * @param   { Object } data - options we want to use to extend the tag instance\n\t * @returns { Object } clean object without containing the riot internal reserved words\n\t */\n\tfunction cleanUpData(data) {\n\t  if (!(data instanceof Tag) && !(data && typeof data.trigger == T_FUNCTION))\n\t    return data\n\t\n\t  var o = {}\n\t  for (var key in data) {\n\t    if (!RESERVED_WORDS_BLACKLIST.test(key)) o[key] = data[key]\n\t  }\n\t  return o\n\t}\n\t\n\t/**\n\t * Walk down recursively all the children tags starting dom node\n\t * @param   { Object }   dom - starting node where we will start the recursion\n\t * @param   { Function } fn - callback to transform the child node just found\n\t */\n\tfunction walk(dom, fn) {\n\t  if (dom) {\n\t    // stop the recursion\n\t    if (fn(dom) === false) return\n\t    else {\n\t      dom = dom.firstChild\n\t\n\t      while (dom) {\n\t        walk(dom, fn)\n\t        dom = dom.nextSibling\n\t      }\n\t    }\n\t  }\n\t}\n\t\n\t/**\n\t * Minimize risk: only zero or one _space_ between attr & value\n\t * @param   { String }   html - html string we want to parse\n\t * @param   { Function } fn - callback function to apply on any attribute found\n\t */\n\tfunction walkAttributes(html, fn) {\n\t  var m,\n\t    re = /([-\\w]+) ?= ?(?:\"([^\"]*)|'([^']*)|({[^}]*}))/g\n\t\n\t  while (m = re.exec(html)) {\n\t    fn(m[1].toLowerCase(), m[2] || m[3] || m[4])\n\t  }\n\t}\n\t\n\t/**\n\t * Check whether a DOM node is in stub mode, useful for the riot 'if' directive\n\t * @param   { Object }  dom - DOM node we want to parse\n\t * @returns { Boolean } -\n\t */\n\tfunction isInStub(dom) {\n\t  while (dom) {\n\t    if (dom.inStub) return true\n\t    dom = dom.parentNode\n\t  }\n\t  return false\n\t}\n\t\n\t/**\n\t * Create a generic DOM node\n\t * @param   { String } name - name of the DOM node we want to create\n\t * @param   { Boolean } isSvg - should we use a SVG as parent node?\n\t * @returns { Object } DOM node just created\n\t */\n\tfunction mkEl(name, isSvg) {\n\t  return isSvg ?\n\t    document.createElementNS('http://www.w3.org/2000/svg', 'svg') :\n\t    document.createElement(name)\n\t}\n\t\n\t/**\n\t * Shorter and fast way to select multiple nodes in the DOM\n\t * @param   { String } selector - DOM selector\n\t * @param   { Object } ctx - DOM node where the targets of our search will is located\n\t * @returns { Object } dom nodes found\n\t */\n\tfunction $$(selector, ctx) {\n\t  return (ctx || document).querySelectorAll(selector)\n\t}\n\t\n\t/**\n\t * Shorter and fast way to select a single node in the DOM\n\t * @param   { String } selector - unique dom selector\n\t * @param   { Object } ctx - DOM node where the target of our search will is located\n\t * @returns { Object } dom node found\n\t */\n\tfunction $(selector, ctx) {\n\t  return (ctx || document).querySelector(selector)\n\t}\n\t\n\t/**\n\t * Simple object prototypal inheritance\n\t * @param   { Object } parent - parent object\n\t * @returns { Object } child instance\n\t */\n\tfunction inherit(parent) {\n\t  return Object.create(parent || null)\n\t}\n\t\n\t/**\n\t * Get the name property needed to identify a DOM node in riot\n\t * @param   { Object } dom - DOM node we need to parse\n\t * @returns { String | undefined } give us back a string to identify this dom node\n\t */\n\tfunction getNamedKey(dom) {\n\t  return getAttr(dom, 'id') || getAttr(dom, 'name')\n\t}\n\t\n\t/**\n\t * Set the named properties of a tag element\n\t * @param { Object } dom - DOM node we need to parse\n\t * @param { Object } parent - tag instance where the named dom element will be eventually added\n\t * @param { Array } keys - list of all the tag instance properties\n\t */\n\tfunction setNamed(dom, parent, keys) {\n\t  // get the key value we want to add to the tag instance\n\t  var key = getNamedKey(dom),\n\t    isArr,\n\t    // add the node detected to a tag instance using the named property\n\t    add = function(value) {\n\t      // avoid to override the tag properties already set\n\t      if (contains(keys, key)) return\n\t      // check whether this value is an array\n\t      isArr = isArray(value)\n\t      // if the key was never set\n\t      if (!value)\n\t        // set it once on the tag instance\n\t        parent[key] = dom\n\t      // if it was an array and not yet set\n\t      else if (!isArr || isArr && !contains(value, dom)) {\n\t        // add the dom node into the array\n\t        if (isArr)\n\t          value.push(dom)\n\t        else\n\t          parent[key] = [value, dom]\n\t      }\n\t    }\n\t\n\t  // skip the elements with no named properties\n\t  if (!key) return\n\t\n\t  // check whether this key has been already evaluated\n\t  if (tmpl.hasExpr(key))\n\t    // wait the first updated event only once\n\t    parent.one('mount', function() {\n\t      key = getNamedKey(dom)\n\t      add(parent[key])\n\t    })\n\t  else\n\t    add(parent[key])\n\t\n\t}\n\t\n\t/**\n\t * Faster String startsWith alternative\n\t * @param   { String } src - source string\n\t * @param   { String } str - test string\n\t * @returns { Boolean } -\n\t */\n\tfunction startsWith(src, str) {\n\t  return src.slice(0, str.length) === str\n\t}\n\t\n\t/**\n\t * requestAnimationFrame function\n\t * Adapted from https://gist.github.com/paulirish/1579671, license MIT\n\t */\n\tvar rAF = (function (w) {\n\t  var raf = w.requestAnimationFrame    ||\n\t            w.mozRequestAnimationFrame || w.webkitRequestAnimationFrame\n\t\n\t  if (!raf || /iP(ad|hone|od).*OS 6/.test(w.navigator.userAgent)) {  // buggy iOS6\n\t    var lastTime = 0\n\t\n\t    raf = function (cb) {\n\t      var nowtime = Date.now(), timeout = Math.max(16 - (nowtime - lastTime), 0)\n\t      setTimeout(function () { cb(lastTime = nowtime + timeout) }, timeout)\n\t    }\n\t  }\n\t  return raf\n\t\n\t})(window || {})\n\t\n\t/**\n\t * Mount a tag creating new Tag instance\n\t * @param   { Object } root - dom node where the tag will be mounted\n\t * @param   { String } tagName - name of the riot tag we want to mount\n\t * @param   { Object } opts - options to pass to the Tag instance\n\t * @returns { Tag } a new Tag instance\n\t */\n\tfunction mountTo(root, tagName, opts) {\n\t  var tag = __tagImpl[tagName],\n\t    // cache the inner HTML to fix #855\n\t    innerHTML = root._innerHTML = root._innerHTML || root.innerHTML\n\t\n\t  // clear the inner html\n\t  root.innerHTML = ''\n\t\n\t  if (tag && root) tag = new Tag(tag, { root: root, opts: opts }, innerHTML)\n\t\n\t  if (tag && tag.mount) {\n\t    tag.mount()\n\t    // add this tag to the virtualDom variable\n\t    if (!contains(__virtualDom, tag)) __virtualDom.push(tag)\n\t  }\n\t\n\t  return tag\n\t}\n\t/**\n\t * Riot public api\n\t */\n\t\n\t// share methods for other riot parts, e.g. compiler\n\triot.util = { brackets: brackets, tmpl: tmpl }\n\t\n\t/**\n\t * Create a mixin that could be globally shared across all the tags\n\t */\n\triot.mixin = (function() {\n\t  var mixins = {},\n\t    globals = mixins[GLOBAL_MIXIN] = {},\n\t    _id = 0\n\t\n\t  /**\n\t   * Create/Return a mixin by its name\n\t   * @param   { String }  name - mixin name (global mixin if object)\n\t   * @param   { Object }  mixin - mixin logic\n\t   * @param   { Boolean } g - is global?\n\t   * @returns { Object }  the mixin logic\n\t   */\n\t  return function(name, mixin, g) {\n\t    // Unnamed global\n\t    if (isObject(name)) {\n\t      riot.mixin('__unnamed_'+_id++, name, true)\n\t      return\n\t    }\n\t\n\t    var store = g ? globals : mixins\n\t\n\t    // Getter\n\t    if (!mixin) {\n\t      if (typeof store[name] === T_UNDEF) {\n\t        throw new Error('Unregistered mixin: ' + name)\n\t      }\n\t      return store[name]\n\t    }\n\t    // Setter\n\t    if (isFunction(mixin)) {\n\t      extend(mixin.prototype, store[name] || {})\n\t      store[name] = mixin\n\t    }\n\t    else {\n\t      store[name] = extend(store[name] || {}, mixin)\n\t    }\n\t  }\n\t\n\t})()\n\t\n\t/**\n\t * Create a new riot tag implementation\n\t * @param   { String }   name - name/id of the new riot tag\n\t * @param   { String }   html - tag template\n\t * @param   { String }   css - custom tag css\n\t * @param   { String }   attrs - root tag attributes\n\t * @param   { Function } fn - user function\n\t * @returns { String } name/id of the tag just created\n\t */\n\triot.tag = function(name, html, css, attrs, fn) {\n\t  if (isFunction(attrs)) {\n\t    fn = attrs\n\t    if (/^[\\w\\-]+\\s?=/.test(css)) {\n\t      attrs = css\n\t      css = ''\n\t    } else attrs = ''\n\t  }\n\t  if (css) {\n\t    if (isFunction(css)) fn = css\n\t    else styleManager.add(css)\n\t  }\n\t  name = name.toLowerCase()\n\t  __tagImpl[name] = { name: name, tmpl: html, attrs: attrs, fn: fn }\n\t  return name\n\t}\n\t\n\t/**\n\t * Create a new riot tag implementation (for use by the compiler)\n\t * @param   { String }   name - name/id of the new riot tag\n\t * @param   { String }   html - tag template\n\t * @param   { String }   css - custom tag css\n\t * @param   { String }   attrs - root tag attributes\n\t * @param   { Function } fn - user function\n\t * @returns { String } name/id of the tag just created\n\t */\n\triot.tag2 = function(name, html, css, attrs, fn) {\n\t  if (css) styleManager.add(css)\n\t  //if (bpair) riot.settings.brackets = bpair\n\t  __tagImpl[name] = { name: name, tmpl: html, attrs: attrs, fn: fn }\n\t  return name\n\t}\n\t\n\t/**\n\t * Mount a tag using a specific tag implementation\n\t * @param   { String } selector - tag DOM selector\n\t * @param   { String } tagName - tag implementation name\n\t * @param   { Object } opts - tag logic\n\t * @returns { Array } new tags instances\n\t */\n\triot.mount = function(selector, tagName, opts) {\n\t\n\t  var els,\n\t    allTags,\n\t    tags = []\n\t\n\t  // helper functions\n\t\n\t  function addRiotTags(arr) {\n\t    var list = ''\n\t    each(arr, function (e) {\n\t      if (!/[^-\\w]/.test(e)) {\n\t        e = e.trim().toLowerCase()\n\t        list += ',[' + RIOT_TAG_IS + '=\"' + e + '\"],[' + RIOT_TAG + '=\"' + e + '\"]'\n\t      }\n\t    })\n\t    return list\n\t  }\n\t\n\t  function selectAllTags() {\n\t    var keys = Object.keys(__tagImpl)\n\t    return keys + addRiotTags(keys)\n\t  }\n\t\n\t  function pushTags(root) {\n\t    if (root.tagName) {\n\t      var riotTag = getAttr(root, RIOT_TAG_IS) || getAttr(root, RIOT_TAG)\n\t\n\t      // have tagName? force riot-tag to be the same\n\t      if (tagName && riotTag !== tagName) {\n\t        riotTag = tagName\n\t        setAttr(root, RIOT_TAG_IS, tagName)\n\t        setAttr(root, RIOT_TAG, tagName) // this will be removed in riot 3.0.0\n\t      }\n\t      var tag = mountTo(root, riotTag || root.tagName.toLowerCase(), opts)\n\t\n\t      if (tag) tags.push(tag)\n\t    } else if (root.length) {\n\t      each(root, pushTags)   // assume nodeList\n\t    }\n\t  }\n\t\n\t  // ----- mount code -----\n\t\n\t  // inject styles into DOM\n\t  styleManager.inject()\n\t\n\t  if (isObject(tagName)) {\n\t    opts = tagName\n\t    tagName = 0\n\t  }\n\t\n\t  // crawl the DOM to find the tag\n\t  if (typeof selector === T_STRING) {\n\t    if (selector === '*')\n\t      // select all the tags registered\n\t      // and also the tags found with the riot-tag attribute set\n\t      selector = allTags = selectAllTags()\n\t    else\n\t      // or just the ones named like the selector\n\t      selector += addRiotTags(selector.split(/, */))\n\t\n\t    // make sure to pass always a selector\n\t    // to the querySelectorAll function\n\t    els = selector ? $$(selector) : []\n\t  }\n\t  else\n\t    // probably you have passed already a tag or a NodeList\n\t    els = selector\n\t\n\t  // select all the registered and mount them inside their root elements\n\t  if (tagName === '*') {\n\t    // get all custom tags\n\t    tagName = allTags || selectAllTags()\n\t    // if the root els it's just a single tag\n\t    if (els.tagName)\n\t      els = $$(tagName, els)\n\t    else {\n\t      // select all the children for all the different root elements\n\t      var nodeList = []\n\t      each(els, function (_el) {\n\t        nodeList.push($$(tagName, _el))\n\t      })\n\t      els = nodeList\n\t    }\n\t    // get rid of the tagName\n\t    tagName = 0\n\t  }\n\t\n\t  pushTags(els)\n\t\n\t  return tags\n\t}\n\t\n\t/**\n\t * Update all the tags instances created\n\t * @returns { Array } all the tags instances\n\t */\n\triot.update = function() {\n\t  return each(__virtualDom, function(tag) {\n\t    tag.update()\n\t  })\n\t}\n\t\n\t/**\n\t * Export the Virtual DOM\n\t */\n\triot.vdom = __virtualDom\n\t\n\t/**\n\t * Export the Tag constructor\n\t */\n\triot.Tag = Tag\n\t  // support CommonJS, AMD & browser\n\t  /* istanbul ignore next */\n\t  if (typeof exports === T_OBJECT)\n\t    module.exports = riot\n\t  else if (\"function\" === T_FUNCTION && typeof __webpack_require__(/*! !webpack amd options */ 29) !== T_UNDEF)\n\t    !(__WEBPACK_AMD_DEFINE_RESULT__ = function() { return riot }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\t  else\n\t    window.riot = riot\n\t\n\t})(typeof window != 'undefined' ? window : void 0);\n\n\n/***/ },\n/* 2 */\n/*!***********************!*\\\n  !*** ./src/helper.js ***!\n  \\***********************/\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\texports.addCommas = function (nStr) {\n\t    nStr += '';\n\t    var x = nStr.split('.');\n\t    var x1 = x[0];\n\t    var x2 = x.length > 1 ? '.' + x[1] : '';\n\t    var rgx = /(\\d+)(\\d{3})/;\n\t    while (rgx.test(x1)) {\n\t        x1 = x1.replace(rgx, '$1' + '.' + '$2');\n\t    }\n\t    return x1 + x2;\n\t};\n\t\n\texports.avoidDup = function (nObj) {\n\t    var noDup = _.map(_.uniq(_.map(nObj, function (obj) {\n\t        return JSON.stringify(obj);\n\t    })), function (obj) {\n\t        return JSON.parse(obj);\n\t    });\n\t    return noDup;\n\t};\n\t\n\texports.formattedTime = function (timestamp) {\n\t    var dateOnly = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\t    var timezone = arguments.length <= 2 || arguments[2] === undefined ? 7 : arguments[2];\n\t\n\t    var date = new Date((timestamp - timezone * 60 * 60) * 1000);\n\t    // Day date part from the timestamp\n\t    var day = \"0\" + date.getDate();\n\t    // Month part from the timestamp\n\t    var month = \"0\" + (date.getMonth() + 1);\n\t    // Year part from the timestamp\n\t    var year = date.getFullYear();\n\t    // Hours part from the timestamp\n\t    var hours = date.getHours();\n\t    // Minutes part from the timestamp\n\t    var minutes = \"0\" + date.getMinutes();\n\t    // Seconds part from the timestamp\n\t    var seconds = \"0\" + date.getSeconds();\n\t\n\t    // Will display time in 10:30:23 format\n\t    if (dateOnly) return day.substr(-2) + \"/\" + month.substr(-2) + \"/\" + year;else return day.substr(-2) + \"/\" + month.substr(-2) + \"/\" + year + \" \" + hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);\n\t};\n\t\n\texports.fromTimestampToString = function (ts) {\n\t    var separator = arguments.length <= 1 || arguments[1] === undefined ? \"/\" : arguments[1];\n\t\n\t    var date = new Date(ts * 1000);\n\t    // console.log(date);\n\t    // Day date part from the timestamp\n\t    var day = \"0\" + date.getDate();\n\t    // Month part from the timestamp\n\t    var month = \"0\" + (date.getMonth() + 1);\n\t    // Year part from the timestamp\n\t    var year = date.getFullYear();\n\t\n\t    // Will display time in 10:30:23 format\n\t    // return year + separator + month.substr(-2) + separator + day.substr(-2)\n\t    return month.substr(-2) + separator + day.substr(-2) + separator + year;\n\t};\n\t\n\texports.toTimestamp = function (s) {\n\t    // return Date.parse(s+\"-0500\")/1000;\n\t    return Date.parse(s + \"-0500\") / 1000;\n\t};\n\n/***/ },\n/* 3 */\n/*!************************************!*\\\n  !*** ./~/alerty/dist/js/alerty.js ***!\n  \\************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {(function () {\r\n\t  'use strict';\r\n\t\r\n\t  // common function which is often using\r\n\t  var commonUse = {\r\n\t    /**\r\n\t     * [Add class to element]\r\n\t     *\r\n\t     * @param el {Object}   -- element.\r\n\t     * @param cls {String}  -- classes.\r\n\t     */\r\n\t    addClass: function(el, cls) {\r\n\t      var elClass = el.className;\r\n\t      var blank = (elClass !== '') ? ' ' : '';\r\n\t      var added = elClass + blank + cls;\r\n\t      el.className = added;\r\n\t    },\r\n\t\r\n\t    /**\r\n\t     * [Remove class from element]\r\n\t     *\r\n\t     * @param el {Object}   -- element.\r\n\t     * @param cls {String}  -- classes.\r\n\t     */\r\n\t    removeClass: function(el, cls) {\r\n\t      var elClass = ' '+el.className+' ';\r\n\t      elClass = elClass.replace(/(\\s+)/gi, ' ');\r\n\t      var removed = elClass.replace(' '+cls+' ', ' ');\r\n\t      removed = removed.replace(/(^\\s+)|(\\s+$)/g, '');\r\n\t      el.className = removed;\r\n\t    },\r\n\t\r\n\t    /**\r\n\t     * [if element has some class]\r\n\t     *\r\n\t     * @param el {Object}   -- element.\r\n\t     * @param cls {String}  -- classes.\r\n\t     *\r\n\t     * @return  {Boolean}   -- true or false.\r\n\t     */\r\n\t    hasClass: function(el, cls) {\r\n\t      var elClass = el.className;\r\n\t      var elClassList = elClass.split(/\\s+/);\r\n\t      var x = 0;\r\n\t      for(x in elClassList) {\r\n\t        if(elClassList[x] == cls) {\r\n\t          return true;\r\n\t        }\r\n\t      }\r\n\t      return false;\r\n\t    },\r\n\t\r\n\t    /**\r\n\t     * [add event to some element, dom0, dom1, supports fuck ie]\r\n\t     *\r\n\t     * @param el {Object}       -- element.\r\n\t     * @param type {String}     -- event type, such as 'click', 'mouseover'.\r\n\t     * @param func {Function}   -- function.\r\n\t     *\r\n\t     */\r\n\t    addEvent: function(el, type, func) {\r\n\t      if(el.addEventListener) {\r\n\t        el.addEventListener(type, func, false);\r\n\t      } else if(el.attachEvent){ \r\n\t        el.attachEvent('on' + type, func);\r\n\t      } else{ \r\n\t        el['on' + type] = func; \r\n\t      }  \r\n\t    },\r\n\t\r\n\t    /**\r\n\t     * [remove event to some element, dom0, dom1, supports fuck ie]\r\n\t     *\r\n\t     * @param el {Object}       -- element.\r\n\t     * @param type {String}     -- event type, such as 'click', 'mouseover'.\r\n\t     * @param func {Function}   -- function.\r\n\t     *\r\n\t     */\r\n\t    removeEvent: function(el, type, func) {\r\n\t      if (el.removeEventListener){ \r\n\t        el.removeEventListener(type, func, false);\r\n\t      } else if (el.detachEvent){\r\n\t        el.detachEvent('on' + type, func);\r\n\t      } else {\r\n\t        delete el['on' + type];\r\n\t      }\r\n\t    },\r\n\t\r\n\t    /**\r\n\t     * [Remove element node]\r\n\t     *\r\n\t     * @param el {Object}   -- element.\r\n\t     *\r\n\t     */\r\n\t    removeElement: function(el) {\r\n\t      (el && el.parentNode) && el.parentNode.removeChild(el);\r\n\t    },\r\n\t\r\n\t    /**\r\n\t     * [Set unique id]\r\n\t     *\r\n\t     * @param prefix {String}   -- id prefix name.\r\n\t     *\r\n\t     * @return  {String}\r\n\t     */\r\n\t    setUid: function(prefix) {\r\n\t      do prefix += Math.floor(Math.random() * 1000000);\r\n\t      while (document.getElementById(prefix));\r\n\t      return prefix;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  /**\r\n\t   * [Alertiy public API]\r\n\t   *\r\n\t   * @return {Object}\r\n\t   */\r\n\t  var Alerty = function() {\r\n\t\r\n\t    // private object for Alerty object inherit\r\n\t    var Dialog = {\r\n\t      \r\n\t      // static defaults params\r\n\t      defaults: {\r\n\t        okLabel: '\\u786e\\u5b9a',\r\n\t        cancelLabel: '\\u53d6\\u6d88',\r\n\t        time: 2000\r\n\t      },\r\n\t\r\n\t      previousCallback: null,  // for cache previous toasts callbak, to handle if call more than 1 alerty\r\n\t\r\n\t      // html templates\r\n\t      template: '<div class=\"alerty-overlay\" tabindex=\"-1\"></div>'+\r\n\t                '<div class=\"alerty\">'+\r\n\t                  '<div class=\"alerty-title\"></div>'+\r\n\t                  '<div class=\"alerty-content\">'+\r\n\t                    '<p class=\"alerty-message\"></p>'+\r\n\t                    '<div class=\"alerty-prompt\">'+\r\n\t                      '<input type=\"text\" placeholder=\"\" value=\"\">'+\r\n\t                      '<div class=\"input-line\"></div>'+\r\n\t                    '</div>'+\r\n\t                  '</div>'+\r\n\t                  '<div class=\"alerty-action\">'+\r\n\t                    '<a class=\"btn-cancel\"></a>'+\r\n\t                    '<a class=\"btn-ok\"></a>'+\r\n\t                  '</div>'+\r\n\t                '</div>',\r\n\t\r\n\t\r\n\t\r\n\t      /** \r\n\t       * [Build the HTML contents]\r\n\t       *\r\n\t       * @param type {String}           -- get the dialog type to arrange the correspondent html content.\r\n\t       * @param content {String}        -- the text contents dialog to users.\r\n\t       * @param opts {Object}           -- options.\r\n\t       * @param onOk {Function}         -- custom callback function after click ok button.\r\n\t       * @param onCancel {Function}     -- custom callback function after click cancel button.\r\n\t       */\r\n\t      setup: function(type, content, opts, onOk, onCancel) {\r\n\t        // for if argument opts is not given.\r\n\t        var detect = typeof opts === 'function';\r\n\t        if (detect) {\r\n\t          onCancel = onOk;\r\n\t          onOk = opts;\r\n\t        }\r\n\t\r\n\t        var $oldModal = document.querySelector('.alerty');\r\n\t\r\n\t\r\n\t        // if previous modal is open, remove it and immediately callback\r\n\t        if ($oldModal) {\r\n\t          commonUse.removeElement($oldModal);\r\n\t          var _callback = this.previousCallback;\r\n\t          if (_callback) _callback();\r\n\t        }\r\n\t\r\n\t        var $wrapper = document.createElement('div');\r\n\t        $wrapper.innerHTML = this.template;\r\n\t\r\n\t        // append alerty to body\r\n\t        while ($wrapper.firstChild) {\r\n\t          document.body.appendChild($wrapper.firstChild);\r\n\t        }\r\n\t\r\n\t        // cache alerty dom for next use\r\n\t        var $modal = document.querySelector('.alerty');\r\n\t        var $overlay = document.querySelector('.alerty-overlay');\r\n\t        var $title = $modal.querySelector('.alerty-title');\r\n\t        var $message = $modal.querySelector('.alerty-message');\r\n\t        var $btnArea = $modal.querySelector('.alerty-action');\r\n\t        var $btnOk = $modal.querySelector('.btn-ok');\r\n\t        var $btnCancel = $modal.querySelector('.btn-cancel');\r\n\t        var $prompt = $modal.querySelector('.alerty-prompt');\r\n\t        var $input = $prompt.querySelector('input');\r\n\t\r\n\t        // set uid\r\n\t        $modal.id = commonUse.setUid('alerty');\r\n\t        $overlay.id = 'overlay-'+$modal.id;\r\n\t\r\n\t        // animation show alerty\r\n\t        commonUse.addClass($overlay, 'active');\r\n\t        commonUse.addClass($modal, 'alerty-show');\r\n\t        $message.innerHTML = content;  // set msg\r\n\t\r\n\t        if (opts && opts.time) this.defaults.time = opts.time; // handle time if set\r\n\t\r\n\t        if (type !== 'prompt') {\r\n\t          commonUse.removeElement($prompt); // other type do not need\r\n\t        } else {\r\n\t          $input.focus(); // auto focus input if type prompt\r\n\t\r\n\t          if(opts && opts.inputType) $input.setAttribute('type', opts.inputType); // handle input type, such as 'password'\r\n\t          if(opts && opts.inputPlaceholder) $input.setAttribute('placeholder', opts.inputPlaceholder); // handle input placeholder\r\n\t          if(opts && opts.inputValue) $input.setAttribute('value', opts.inputValue); // handle input default value \r\n\t        }\r\n\t\r\n\t        if (type === 'toasts') {\r\n\t          this.previousCallback = onOk;  // cache callback\r\n\t\r\n\t          // rearrange template\r\n\t          commonUse.removeElement($title);\r\n\t          commonUse.removeElement($btnArea);\r\n\t          commonUse.removeElement($overlay);\r\n\t          commonUse.addClass($modal, 'toasts');\r\n\t\r\n\t          if (opts && opts.place === 'top') commonUse.addClass($modal, 'place-top'); // handle toasts top place\r\n\t          if (opts && opts.bgColor) $modal.style.backgroundColor = opts.bgColor;\r\n\t          if (opts && opts.fontColor) $message.style.color =opts.fontColor;\r\n\t\r\n\t        } else {\r\n\t          commonUse.addClass(document.body, 'no-scrolling'); // body no scorll\r\n\t          (opts && opts.title) ? $title.innerHTML = opts.title : commonUse.removeElement($title); // handle title if set\r\n\t          (opts && opts.okLabel) ? $btnOk.innerHTML = opts.okLabel : $btnOk.innerHTML = this.defaults.okLabel; // handle ok text if set\r\n\t          $modal.style.marginTop =  - $modal.offsetHeight / 2 + 'px'; // set the place to center using margin-top;\r\n\t\r\n\t          if (type === 'confirm' || type === 'prompt') {\r\n\t            (opts && opts.cancelLabel) ? $btnCancel.innerHTML = opts.cancelLabel : $btnCancel.innerHTML = this.defaults.cancelLabel; // handle cancel text if set\r\n\t          } else {\r\n\t            commonUse.removeElement($btnCancel); // toasts and alery type do not need cancel btn\r\n\t          }\r\n\t        }\r\n\t\r\n\t        this.bindEvent($modal, onOk, onCancel); // see next\r\n\t      },\r\n\t\r\n\t      /** \r\n\t       * [Bind event to dialog]\r\n\t       *\r\n\t       * @param $modal {Object}       -- modal node.\r\n\t       * @param: onOk {Function}      -- ok callback.\r\n\t       * @param: onCancel {Function}  -- cancel callback.\r\n\t       */\r\n\t      bindEvent: function($modal, onOk, onCancel) {\r\n\t        var that = this;\r\n\t        var $btnOk = $modal.querySelector('.btn-ok');\r\n\t        var $btnCancel = $modal.querySelector('.btn-cancel');\r\n\t\r\n\t        // toasts delay hide\r\n\t        if (commonUse.hasClass($modal, 'toasts')) {\r\n\t          setTimeout(function() {\r\n\t            // if toasts has been removed\r\n\t            if (document.getElementById($modal.id) === null) return;\r\n\t            that.close($modal, onOk);\r\n\t          }, that.defaults.time);\r\n\t        }\r\n\t        // click ok button\r\n\t        if ($btnOk) {\r\n\t          commonUse.addEvent($btnOk, 'click', function() {\r\n\t            that.close($modal, onOk);\r\n\t          });\r\n\t        }\r\n\t        // click cancel button\r\n\t        if ($btnCancel) {\r\n\t          commonUse.addEvent($btnCancel, 'click', function() {\r\n\t            that.close($modal, onCancel);\r\n\t          });\r\n\t        }\r\n\t      },\r\n\t\r\n\t      /** \r\n\t       * [Close the actived modal and remove it]\r\n\t       *\r\n\t       * @param: $modal {Obejct}  -- modal element to remove.\r\n\t       * @param: callback {Function}  -- callback function.\r\n\t       */\r\n\t      close: function($modal, callback) {\r\n\t        var $input = $modal.querySelector('input');\r\n\t        var $overlay = document.getElementById('overlay-'+$modal.id);\r\n\t\r\n\t        // hide alerty with animation\r\n\t        commonUse.removeClass($modal, 'alerty-show');\r\n\t        commonUse.addClass($modal, 'alerty-hide');\r\n\t\r\n\t        // remove alerty and other added elements\r\n\t        setTimeout(function(){\r\n\t          $overlay && commonUse.removeClass($overlay, 'active'), commonUse.removeClass(document.body, 'no-scrolling');\r\n\t          \r\n\t          commonUse.removeElement($modal);\r\n\t          commonUse.removeElement($overlay);\r\n\t          if (callback) {\r\n\t            setTimeout(function(){\r\n\t              !$input ? callback() : callback($input.value);  // handle prompt type, callback the input value\r\n\t            }, 100);\r\n\t          }\r\n\t        },100);\r\n\t      }\r\n\t    };\r\n\t\r\n\t    return {\r\n\t      // return alerty.toasts();\r\n\t      toasts: function(content, opts, callback) {\r\n\t        Dialog.setup('toasts', content, opts, callback);\r\n\t      },\r\n\t\r\n\t      // return alerty.alert();\r\n\t      alert: function(content, opts, onOk) {\r\n\t        Dialog.setup('alert', content, opts, onOk);\r\n\t      },\r\n\t\r\n\t      // return alerty.confirm();\r\n\t      confirm: function(content, opts, onOk, onCancel) {\r\n\t        Dialog.setup('confirm', content, opts, onOk, onCancel);\r\n\t      },\r\n\t\r\n\t      // return alerty.prompt();\r\n\t      prompt: function(content, opts, callback) {\r\n\t        Dialog.setup('prompt', content, opts, callback);\r\n\t      }\r\n\t    };\r\n\t  };\r\n\t\r\n\t\r\n\t\r\n\t  // NPM, AMD, and wndow support\r\n\t  if ('undefined' !== typeof module && !! module && !! module.exports) {\r\n\t    module.exports = function() {\r\n\t      return new Alerty();\r\n\t    };\r\n\t    var obj = new Alerty();\r\n\t    for (var key in obj) {\r\n\t      module.exports[key] = obj[key];\r\n\t    }\r\n\t  } else if (true) {\r\n\t    !(__WEBPACK_AMD_DEFINE_RESULT__ = function() {\r\n\t      return new Alerty();\r\n\t    }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t  } else {\r\n\t    window.alerty = new Alerty();\r\n\t  }\r\n\t}());\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! ./../../../webpack/buildin/module.js */ 30)(module)))\n\n/***/ },\n/* 4 */\n/*!*****************************************!*\\\n  !*** ./~/pikaday/pikaday_standalone.js ***!\n  \\*****************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n\t * Pikaday\n\t *\n\t * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday\n\t */\n\t\n\t(function (root, factory)\n\t{\n\t    'use strict';\n\t\n\t    if (true) {\n\t        // AMD. Register as an anonymous module.\n\t        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t    } else if ( typeof exports === 'object' ) {\n\t        // Node/CommonJS\n\t        module.exports = factory();\n\t    } else {\n\t        // Browser globals\n\t        root.Pikaday = factory();\n\t    }\n\t\n\t}(this, function (moment)\n\t{\n\t    'use strict';\n\t\n\t    /**\n\t     * feature detection and helper functions\n\t     */\n\t    var hasMoment = typeof moment === 'function',\n\t\n\t    hasEventListeners = !!window.addEventListener,\n\t\n\t    document = window.document,\n\t\n\t    sto = window.setTimeout,\n\t\n\t    addEvent = function(el, e, callback, capture)\n\t    {\n\t        if (hasEventListeners) {\n\t            el.addEventListener(e, callback, !!capture);\n\t        } else {\n\t            el.attachEvent('on' + e, callback);\n\t        }\n\t    },\n\t\n\t    removeEvent = function(el, e, callback, capture)\n\t    {\n\t        if (hasEventListeners) {\n\t            el.removeEventListener(e, callback, !!capture);\n\t        } else {\n\t            el.detachEvent('on' + e, callback);\n\t        }\n\t    },\n\t\n\t    fireEvent = function(el, eventName, data)\n\t    {\n\t        var ev;\n\t\n\t        if (document.createEvent) {\n\t            ev = document.createEvent('HTMLEvents');\n\t            ev.initEvent(eventName, true, false);\n\t            ev = extend(ev, data);\n\t            el.dispatchEvent(ev);\n\t        } else if (document.createEventObject) {\n\t            ev = document.createEventObject();\n\t            ev = extend(ev, data);\n\t            el.fireEvent('on' + eventName, ev);\n\t        }\n\t    },\n\t\n\t    trim = function(str)\n\t    {\n\t        return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g,'');\n\t    },\n\t\n\t    hasClass = function(el, cn)\n\t    {\n\t        return (' ' + el.className + ' ').indexOf(' ' + cn + ' ') !== -1;\n\t    },\n\t\n\t    addClass = function(el, cn)\n\t    {\n\t        if (!hasClass(el, cn)) {\n\t            el.className = (el.className === '') ? cn : el.className + ' ' + cn;\n\t        }\n\t    },\n\t\n\t    removeClass = function(el, cn)\n\t    {\n\t        el.className = trim((' ' + el.className + ' ').replace(' ' + cn + ' ', ' '));\n\t    },\n\t\n\t    isArray = function(obj)\n\t    {\n\t        return (/Array/).test(Object.prototype.toString.call(obj));\n\t    },\n\t\n\t    isDate = function(obj)\n\t    {\n\t        return (/Date/).test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime());\n\t    },\n\t\n\t    isWeekend = function(date)\n\t    {\n\t        var day = date.getDay();\n\t        return day === 0 || day === 6;\n\t    },\n\t\n\t    isLeapYear = function(year)\n\t    {\n\t        // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951\n\t        return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n\t    },\n\t\n\t    getDaysInMonth = function(year, month)\n\t    {\n\t        return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n\t    },\n\t\n\t    setToStartOfDay = function(date)\n\t    {\n\t        if (isDate(date)) date.setHours(0,0,0,0);\n\t    },\n\t\n\t    compareDates = function(a,b)\n\t    {\n\t        // weak date comparison (use setToStartOfDay(date) to ensure correct result)\n\t        return a.getTime() === b.getTime();\n\t    },\n\t\n\t    extend = function(to, from, overwrite)\n\t    {\n\t        var prop, hasProp;\n\t        for (prop in from) {\n\t            hasProp = to[prop] !== undefined;\n\t            if (hasProp && typeof from[prop] === 'object' && from[prop] !== null && from[prop].nodeName === undefined) {\n\t                if (isDate(from[prop])) {\n\t                    if (overwrite) {\n\t                        to[prop] = new Date(from[prop].getTime());\n\t                    }\n\t                }\n\t                else if (isArray(from[prop])) {\n\t                    if (overwrite) {\n\t                        to[prop] = from[prop].slice(0);\n\t                    }\n\t                } else {\n\t                    to[prop] = extend({}, from[prop], overwrite);\n\t                }\n\t            } else if (overwrite || !hasProp) {\n\t                to[prop] = from[prop];\n\t            }\n\t        }\n\t        return to;\n\t    },\n\t\n\t    adjustCalendar = function(calendar) {\n\t        if (calendar.month < 0) {\n\t            calendar.year -= Math.ceil(Math.abs(calendar.month)/12);\n\t            calendar.month += 12;\n\t        }\n\t        if (calendar.month > 11) {\n\t            calendar.year += Math.floor(Math.abs(calendar.month)/12);\n\t            calendar.month -= 12;\n\t        }\n\t        return calendar;\n\t    },\n\t\n\t    /**\n\t     * defaults and localisation\n\t     */\n\t    defaults = {\n\t\n\t        // bind the picker to a form field\n\t        field: null,\n\t\n\t        // automatically show/hide the picker on `field` focus (default `true` if `field` is set)\n\t        bound: undefined,\n\t\n\t        // position of the datepicker, relative to the field (default to bottom & left)\n\t        // ('bottom' & 'left' keywords are not used, 'top' & 'right' are modifier on the bottom/left position)\n\t        position: 'bottom left',\n\t\n\t        // automatically fit in the viewport even if it means repositioning from the position option\n\t        reposition: true,\n\t\n\t        // the default output format for `.toString()` and `field` value\n\t        format: 'YYYY-MM-DD',\n\t\n\t        // the initial date to view when first opened\n\t        defaultDate: null,\n\t\n\t        // make the `defaultDate` the initial selected value\n\t        setDefaultDate: false,\n\t\n\t        // first day of week (0: Sunday, 1: Monday etc)\n\t        firstDay: 0,\n\t\n\t        // the minimum/earliest date that can be selected\n\t        minDate: null,\n\t        // the maximum/latest date that can be selected\n\t        maxDate: null,\n\t\n\t        // number of years either side, or array of upper/lower range\n\t        yearRange: 10,\n\t\n\t        // show week numbers at head of row\n\t        showWeekNumber: false,\n\t\n\t        // used internally (don't config outside)\n\t        minYear: 0,\n\t        maxYear: 9999,\n\t        minMonth: undefined,\n\t        maxMonth: undefined,\n\t\n\t        startRange: null,\n\t        endRange: null,\n\t\n\t        isRTL: false,\n\t\n\t        // Additional text to append to the year in the calendar title\n\t        yearSuffix: '',\n\t\n\t        // Render the month after year in the calendar title\n\t        showMonthAfterYear: false,\n\t\n\t        // how many months are visible\n\t        numberOfMonths: 1,\n\t\n\t        // when numberOfMonths is used, this will help you to choose where the main calendar will be (default `left`, can be set to `right`)\n\t        // only used for the first display or when a selected date is not visible\n\t        mainCalendar: 'left',\n\t\n\t        // Specify a DOM element to render the calendar in\n\t        container: undefined,\n\t\n\t        // internationalization\n\t        i18n: {\n\t            previousMonth : 'Previous Month',\n\t            nextMonth     : 'Next Month',\n\t            months        : ['January','February','March','April','May','June','July','August','September','October','November','December'],\n\t            weekdays      : ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\n\t            weekdaysShort : ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']\n\t        },\n\t\n\t        // Theme Classname\n\t        theme: null,\n\t\n\t        // callback function\n\t        onSelect: null,\n\t        onOpen: null,\n\t        onClose: null,\n\t        onDraw: null\n\t    },\n\t\n\t\n\t    /**\n\t     * templating functions to abstract HTML rendering\n\t     */\n\t    renderDayName = function(opts, day, abbr)\n\t    {\n\t        day += opts.firstDay;\n\t        while (day >= 7) {\n\t            day -= 7;\n\t        }\n\t        return abbr ? opts.i18n.weekdaysShort[day] : opts.i18n.weekdays[day];\n\t    },\n\t\n\t    renderDay = function(opts)\n\t    {\n\t        if (opts.isEmpty) {\n\t            return '<td class=\"is-empty\"></td>';\n\t        }\n\t        var arr = [];\n\t        if (opts.isDisabled) {\n\t            arr.push('is-disabled');\n\t        }\n\t        if (opts.isToday) {\n\t            arr.push('is-today');\n\t        }\n\t        if (opts.isSelected) {\n\t            arr.push('is-selected');\n\t        }\n\t        if (opts.isInRange) {\n\t            arr.push('is-inrange');\n\t        }\n\t        if (opts.isStartRange) {\n\t            arr.push('is-startrange');\n\t        }\n\t        if (opts.isEndRange) {\n\t            arr.push('is-endrange');\n\t        }\n\t        return '<td data-day=\"' + opts.day + '\" class=\"' + arr.join(' ') + '\">' +\n\t                 '<button class=\"pika-button pika-day\" type=\"button\" ' +\n\t                    'data-pika-year=\"' + opts.year + '\" data-pika-month=\"' + opts.month + '\" data-pika-day=\"' + opts.day + '\">' +\n\t                        opts.day +\n\t                 '</button>' +\n\t               '</td>';\n\t    },\n\t\n\t    renderWeek = function (d, m, y) {\n\t        // Lifted from http://javascript.about.com/library/blweekyear.htm, lightly modified.\n\t        var onejan = new Date(y, 0, 1),\n\t            weekNum = Math.ceil((((new Date(y, m, d) - onejan) / 86400000) + onejan.getDay()+1)/7);\n\t        return '<td class=\"pika-week\">' + weekNum + '</td>';\n\t    },\n\t\n\t    renderRow = function(days, isRTL)\n\t    {\n\t        return '<tr>' + (isRTL ? days.reverse() : days).join('') + '</tr>';\n\t    },\n\t\n\t    renderBody = function(rows)\n\t    {\n\t        return '<tbody>' + rows.join('') + '</tbody>';\n\t    },\n\t\n\t    renderHead = function(opts)\n\t    {\n\t        var i, arr = [];\n\t        if (opts.showWeekNumber) {\n\t            arr.push('<th></th>');\n\t        }\n\t        for (i = 0; i < 7; i++) {\n\t            arr.push('<th scope=\"col\"><abbr title=\"' + renderDayName(opts, i) + '\">' + renderDayName(opts, i, true) + '</abbr></th>');\n\t        }\n\t        return '<thead>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</thead>';\n\t    },\n\t\n\t    renderTitle = function(instance, c, year, month, refYear)\n\t    {\n\t        var i, j, arr,\n\t            opts = instance._o,\n\t            isMinYear = year === opts.minYear,\n\t            isMaxYear = year === opts.maxYear,\n\t            html = '<div class=\"pika-title\">',\n\t            monthHtml,\n\t            yearHtml,\n\t            prev = true,\n\t            next = true;\n\t\n\t        for (arr = [], i = 0; i < 12; i++) {\n\t            arr.push('<option value=\"' + (year === refYear ? i - c : 12 + i - c) + '\"' +\n\t                (i === month ? ' selected': '') +\n\t                ((isMinYear && i < opts.minMonth) || (isMaxYear && i > opts.maxMonth) ? 'disabled' : '') + '>' +\n\t                opts.i18n.months[i] + '</option>');\n\t        }\n\t        monthHtml = '<div class=\"pika-label\">' + opts.i18n.months[month] + '<select class=\"pika-select pika-select-month\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\t\n\t        if (isArray(opts.yearRange)) {\n\t            i = opts.yearRange[0];\n\t            j = opts.yearRange[1] + 1;\n\t        } else {\n\t            i = year - opts.yearRange;\n\t            j = 1 + year + opts.yearRange;\n\t        }\n\t\n\t        for (arr = []; i < j && i <= opts.maxYear; i++) {\n\t            if (i >= opts.minYear) {\n\t                arr.push('<option value=\"' + i + '\"' + (i === year ? ' selected': '') + '>' + (i) + '</option>');\n\t            }\n\t        }\n\t        yearHtml = '<div class=\"pika-label\">' + year + opts.yearSuffix + '<select class=\"pika-select pika-select-year\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\t\n\t        if (opts.showMonthAfterYear) {\n\t            html += yearHtml + monthHtml;\n\t        } else {\n\t            html += monthHtml + yearHtml;\n\t        }\n\t\n\t        if (isMinYear && (month === 0 || opts.minMonth >= month)) {\n\t            prev = false;\n\t        }\n\t\n\t        if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {\n\t            next = false;\n\t        }\n\t\n\t        if (c === 0) {\n\t            html += '<button class=\"pika-prev' + (prev ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.previousMonth + '</button>';\n\t        }\n\t        if (c === (instance._o.numberOfMonths - 1) ) {\n\t            html += '<button class=\"pika-next' + (next ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.nextMonth + '</button>';\n\t        }\n\t\n\t        return html += '</div>';\n\t    },\n\t\n\t    renderTable = function(opts, data)\n\t    {\n\t        return '<table cellpadding=\"0\" cellspacing=\"0\" class=\"pika-table\">' + renderHead(opts) + renderBody(data) + '</table>';\n\t    },\n\t\n\t\n\t    /**\n\t     * Pikaday constructor\n\t     */\n\t    Pikaday = function(options)\n\t    {\n\t        var self = this,\n\t            opts = self.config(options);\n\t\n\t        self._onMouseDown = function(e)\n\t        {\n\t            if (!self._v) {\n\t                return;\n\t            }\n\t            e = e || window.event;\n\t            var target = e.target || e.srcElement;\n\t            if (!target) {\n\t                return;\n\t            }\n\t\n\t            if (!hasClass(target, 'is-disabled')) {\n\t                if (hasClass(target, 'pika-button') && !hasClass(target, 'is-empty')) {\n\t                    self.setDate(new Date(target.getAttribute('data-pika-year'), target.getAttribute('data-pika-month'), target.getAttribute('data-pika-day')));\n\t                    if (opts.bound) {\n\t                        sto(function() {\n\t                            self.hide();\n\t                            if (opts.field) {\n\t                                opts.field.blur();\n\t                            }\n\t                        }, 100);\n\t                    }\n\t                }\n\t                else if (hasClass(target, 'pika-prev')) {\n\t                    self.prevMonth();\n\t                }\n\t                else if (hasClass(target, 'pika-next')) {\n\t                    self.nextMonth();\n\t                }\n\t            }\n\t            if (!hasClass(target, 'pika-select')) {\n\t                // if this is touch event prevent mouse events emulation\n\t                if (e.preventDefault) {\n\t                    e.preventDefault();\n\t                } else {\n\t                    e.returnValue = false;\n\t                    return false;\n\t                }\n\t            } else {\n\t                self._c = true;\n\t            }\n\t        };\n\t\n\t        self._onChange = function(e)\n\t        {\n\t            e = e || window.event;\n\t            var target = e.target || e.srcElement;\n\t            if (!target) {\n\t                return;\n\t            }\n\t            if (hasClass(target, 'pika-select-month')) {\n\t                self.gotoMonth(target.value);\n\t            }\n\t            else if (hasClass(target, 'pika-select-year')) {\n\t                self.gotoYear(target.value);\n\t            }\n\t        };\n\t\n\t        self._onInputChange = function(e)\n\t        {\n\t            var date;\n\t\n\t            if (e.firedBy === self) {\n\t                return;\n\t            }\n\t            if (hasMoment) {\n\t                date = moment(opts.field.value, opts.format);\n\t                date = (date && date.isValid()) ? date.toDate() : null;\n\t            }\n\t            else {\n\t                date = new Date(Date.parse(opts.field.value));\n\t            }\n\t            if (isDate(date)) {\n\t              self.setDate(date);\n\t            }\n\t            if (!self._v) {\n\t                self.show();\n\t            }\n\t        };\n\t\n\t        self._onInputFocus = function()\n\t        {\n\t            self.show();\n\t        };\n\t\n\t        self._onInputClick = function()\n\t        {\n\t            self.show();\n\t        };\n\t\n\t        self._onInputBlur = function()\n\t        {\n\t            // IE allows pika div to gain focus; catch blur the input field\n\t            var pEl = document.activeElement;\n\t            do {\n\t                if (hasClass(pEl, 'pika-single')) {\n\t                    return;\n\t                }\n\t            }\n\t            while ((pEl = pEl.parentNode));\n\t\n\t            if (!self._c) {\n\t                self._b = sto(function() {\n\t                    self.hide();\n\t                }, 50);\n\t            }\n\t            self._c = false;\n\t        };\n\t\n\t        self._onClick = function(e)\n\t        {\n\t            e = e || window.event;\n\t            var target = e.target || e.srcElement,\n\t                pEl = target;\n\t            if (!target) {\n\t                return;\n\t            }\n\t            if (!hasEventListeners && hasClass(target, 'pika-select')) {\n\t                if (!target.onchange) {\n\t                    target.setAttribute('onchange', 'return;');\n\t                    addEvent(target, 'change', self._onChange);\n\t                }\n\t            }\n\t            do {\n\t                if (hasClass(pEl, 'pika-single') || pEl === opts.trigger) {\n\t                    return;\n\t                }\n\t            }\n\t            while ((pEl = pEl.parentNode));\n\t            if (self._v && target !== opts.trigger && pEl !== opts.trigger) {\n\t                self.hide();\n\t            }\n\t        };\n\t\n\t        self.el = document.createElement('div');\n\t        self.el.className = 'pika-single' + (opts.isRTL ? ' is-rtl' : '') + (opts.theme ? ' ' + opts.theme : '');\n\t\n\t        addEvent(self.el, 'mousedown', self._onMouseDown, true);\n\t        addEvent(self.el, 'touchend', self._onMouseDown, true);\n\t        addEvent(self.el, 'change', self._onChange);\n\t\n\t        if (opts.field) {\n\t            if (opts.container) {\n\t                opts.container.appendChild(self.el);\n\t            } else if (opts.bound) {\n\t                document.body.appendChild(self.el);\n\t            } else {\n\t                opts.field.parentNode.insertBefore(self.el, opts.field.nextSibling);\n\t            }\n\t            addEvent(opts.field, 'change', self._onInputChange);\n\t\n\t            if (!opts.defaultDate) {\n\t                if (hasMoment && opts.field.value) {\n\t                    opts.defaultDate = moment(opts.field.value, opts.format).toDate();\n\t                } else {\n\t                    opts.defaultDate = new Date(Date.parse(opts.field.value));\n\t                }\n\t                opts.setDefaultDate = true;\n\t            }\n\t        }\n\t\n\t        var defDate = opts.defaultDate;\n\t\n\t        if (isDate(defDate)) {\n\t            if (opts.setDefaultDate) {\n\t                self.setDate(defDate, true);\n\t            } else {\n\t                self.gotoDate(defDate);\n\t            }\n\t        } else {\n\t            self.gotoDate(new Date());\n\t        }\n\t\n\t        if (opts.bound) {\n\t            this.hide();\n\t            self.el.className += ' is-bound';\n\t            addEvent(opts.trigger, 'click', self._onInputClick);\n\t            addEvent(opts.trigger, 'focus', self._onInputFocus);\n\t            addEvent(opts.trigger, 'blur', self._onInputBlur);\n\t        } else {\n\t            this.show();\n\t        }\n\t    };\n\t\n\t\n\t    /**\n\t     * public Pikaday API\n\t     */\n\t    Pikaday.prototype = {\n\t\n\t\n\t        /**\n\t         * configure functionality\n\t         */\n\t        config: function(options)\n\t        {\n\t            if (!this._o) {\n\t                this._o = extend({}, defaults, true);\n\t            }\n\t\n\t            var opts = extend(this._o, options, true);\n\t\n\t            opts.isRTL = !!opts.isRTL;\n\t\n\t            opts.field = (opts.field && opts.field.nodeName) ? opts.field : null;\n\t\n\t            opts.theme = (typeof opts.theme) === 'string' && opts.theme ? opts.theme : null;\n\t\n\t            opts.bound = !!(opts.bound !== undefined ? opts.field && opts.bound : opts.field);\n\t\n\t            opts.trigger = (opts.trigger && opts.trigger.nodeName) ? opts.trigger : opts.field;\n\t\n\t            opts.disableWeekends = !!opts.disableWeekends;\n\t\n\t            opts.disableDayFn = (typeof opts.disableDayFn) === 'function' ? opts.disableDayFn : null;\n\t\n\t            var nom = parseInt(opts.numberOfMonths, 10) || 1;\n\t            opts.numberOfMonths = nom > 4 ? 4 : nom;\n\t\n\t            if (!isDate(opts.minDate)) {\n\t                opts.minDate = false;\n\t            }\n\t            if (!isDate(opts.maxDate)) {\n\t                opts.maxDate = false;\n\t            }\n\t            if ((opts.minDate && opts.maxDate) && opts.maxDate < opts.minDate) {\n\t                opts.maxDate = opts.minDate = false;\n\t            }\n\t            if (opts.minDate) {\n\t                this.setMinDate(opts.minDate);\n\t            }\n\t            if (opts.maxDate) {\n\t                this.setMaxDate(opts.maxDate);\n\t            }\n\t\n\t            if (isArray(opts.yearRange)) {\n\t                var fallback = new Date().getFullYear() - 10;\n\t                opts.yearRange[0] = parseInt(opts.yearRange[0], 10) || fallback;\n\t                opts.yearRange[1] = parseInt(opts.yearRange[1], 10) || fallback;\n\t            } else {\n\t                opts.yearRange = Math.abs(parseInt(opts.yearRange, 10)) || defaults.yearRange;\n\t                if (opts.yearRange > 100) {\n\t                    opts.yearRange = 100;\n\t                }\n\t            }\n\t\n\t            return opts;\n\t        },\n\t\n\t        /**\n\t         * return a formatted string of the current selection (using Moment.js if available)\n\t         */\n\t        toString: function(format)\n\t        {\n\t            return !isDate(this._d) ? '' : hasMoment ? moment(this._d).format(format || this._o.format) : this._d.toDateString();\n\t        },\n\t\n\t        /**\n\t         * return a Moment.js object of the current selection (if available)\n\t         */\n\t        getMoment: function()\n\t        {\n\t            return hasMoment ? moment(this._d) : null;\n\t        },\n\t\n\t        /**\n\t         * set the current selection from a Moment.js object (if available)\n\t         */\n\t        setMoment: function(date, preventOnSelect)\n\t        {\n\t            if (hasMoment && moment.isMoment(date)) {\n\t                this.setDate(date.toDate(), preventOnSelect);\n\t            }\n\t        },\n\t\n\t        /**\n\t         * return a Date object of the current selection\n\t         */\n\t        getDate: function()\n\t        {\n\t            return isDate(this._d) ? new Date(this._d.getTime()) : null;\n\t        },\n\t\n\t        /**\n\t         * set the current selection\n\t         */\n\t        setDate: function(date, preventOnSelect)\n\t        {\n\t            if (!date) {\n\t                this._d = null;\n\t\n\t                if (this._o.field) {\n\t                    this._o.field.value = '';\n\t                    fireEvent(this._o.field, 'change', { firedBy: this });\n\t                }\n\t\n\t                return this.draw();\n\t            }\n\t            if (typeof date === 'string') {\n\t                date = new Date(Date.parse(date));\n\t            }\n\t            if (!isDate(date)) {\n\t                return;\n\t            }\n\t\n\t            var min = this._o.minDate,\n\t                max = this._o.maxDate;\n\t\n\t            if (isDate(min) && date < min) {\n\t                date = min;\n\t            } else if (isDate(max) && date > max) {\n\t                date = max;\n\t            }\n\t\n\t            this._d = new Date(date.getTime());\n\t            setToStartOfDay(this._d);\n\t            this.gotoDate(this._d);\n\t\n\t            if (this._o.field) {\n\t                this._o.field.value = this.toString();\n\t                fireEvent(this._o.field, 'change', { firedBy: this });\n\t            }\n\t            if (!preventOnSelect && typeof this._o.onSelect === 'function') {\n\t                this._o.onSelect.call(this, this.getDate());\n\t            }\n\t        },\n\t\n\t        /**\n\t         * change view to a specific date\n\t         */\n\t        gotoDate: function(date)\n\t        {\n\t            var newCalendar = true;\n\t\n\t            if (!isDate(date)) {\n\t                return;\n\t            }\n\t\n\t            if (this.calendars) {\n\t                var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),\n\t                    lastVisibleDate = new Date(this.calendars[this.calendars.length-1].year, this.calendars[this.calendars.length-1].month, 1),\n\t                    visibleDate = date.getTime();\n\t                // get the end of the month\n\t                lastVisibleDate.setMonth(lastVisibleDate.getMonth()+1);\n\t                lastVisibleDate.setDate(lastVisibleDate.getDate()-1);\n\t                newCalendar = (visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate);\n\t            }\n\t\n\t            if (newCalendar) {\n\t                this.calendars = [{\n\t                    month: date.getMonth(),\n\t                    year: date.getFullYear()\n\t                }];\n\t                if (this._o.mainCalendar === 'right') {\n\t                    this.calendars[0].month += 1 - this._o.numberOfMonths;\n\t                }\n\t            }\n\t\n\t            this.adjustCalendars();\n\t        },\n\t\n\t        adjustCalendars: function() {\n\t            this.calendars[0] = adjustCalendar(this.calendars[0]);\n\t            for (var c = 1; c < this._o.numberOfMonths; c++) {\n\t                this.calendars[c] = adjustCalendar({\n\t                    month: this.calendars[0].month + c,\n\t                    year: this.calendars[0].year\n\t                });\n\t            }\n\t            this.draw();\n\t        },\n\t\n\t        gotoToday: function()\n\t        {\n\t            this.gotoDate(new Date());\n\t        },\n\t\n\t        /**\n\t         * change view to a specific month (zero-index, e.g. 0: January)\n\t         */\n\t        gotoMonth: function(month)\n\t        {\n\t            if (!isNaN(month)) {\n\t                this.calendars[0].month = parseInt(month, 10);\n\t                this.adjustCalendars();\n\t            }\n\t        },\n\t\n\t        nextMonth: function()\n\t        {\n\t            this.calendars[0].month++;\n\t            this.adjustCalendars();\n\t        },\n\t\n\t        prevMonth: function()\n\t        {\n\t            this.calendars[0].month--;\n\t            this.adjustCalendars();\n\t        },\n\t\n\t        /**\n\t         * change view to a specific full year (e.g. \"2012\")\n\t         */\n\t        gotoYear: function(year)\n\t        {\n\t            if (!isNaN(year)) {\n\t                this.calendars[0].year = parseInt(year, 10);\n\t                this.adjustCalendars();\n\t            }\n\t        },\n\t\n\t        /**\n\t         * change the minDate\n\t         */\n\t        setMinDate: function(value)\n\t        {\n\t            setToStartOfDay(value);\n\t            this._o.minDate = value;\n\t            this._o.minYear  = value.getFullYear();\n\t            this._o.minMonth = value.getMonth();\n\t            this.draw();\n\t        },\n\t\n\t        /**\n\t         * change the maxDate\n\t         */\n\t        setMaxDate: function(value)\n\t        {\n\t            setToStartOfDay(value);\n\t            this._o.maxDate = value;\n\t            this._o.maxYear = value.getFullYear();\n\t            this._o.maxMonth = value.getMonth();\n\t            this.draw();\n\t        },\n\t\n\t        setStartRange: function(value)\n\t        {\n\t            this._o.startRange = value;\n\t        },\n\t\n\t        setEndRange: function(value)\n\t        {\n\t            this._o.endRange = value;\n\t        },\n\t\n\t        /**\n\t         * refresh the HTML\n\t         */\n\t        draw: function(force)\n\t        {\n\t            if (!this._v && !force) {\n\t                return;\n\t            }\n\t            var opts = this._o,\n\t                minYear = opts.minYear,\n\t                maxYear = opts.maxYear,\n\t                minMonth = opts.minMonth,\n\t                maxMonth = opts.maxMonth,\n\t                html = '';\n\t\n\t            if (this._y <= minYear) {\n\t                this._y = minYear;\n\t                if (!isNaN(minMonth) && this._m < minMonth) {\n\t                    this._m = minMonth;\n\t                }\n\t            }\n\t            if (this._y >= maxYear) {\n\t                this._y = maxYear;\n\t                if (!isNaN(maxMonth) && this._m > maxMonth) {\n\t                    this._m = maxMonth;\n\t                }\n\t            }\n\t\n\t            for (var c = 0; c < opts.numberOfMonths; c++) {\n\t                html += '<div class=\"pika-lendar\">' + renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year) + this.render(this.calendars[c].year, this.calendars[c].month) + '</div>';\n\t            }\n\t\n\t            this.el.innerHTML = html;\n\t\n\t            if (opts.bound) {\n\t                if(opts.field.type !== 'hidden') {\n\t                    sto(function() {\n\t                        opts.trigger.focus();\n\t                    }, 1);\n\t                }\n\t            }\n\t\n\t            if (typeof this._o.onDraw === 'function') {\n\t                var self = this;\n\t                sto(function() {\n\t                    self._o.onDraw.call(self);\n\t                }, 0);\n\t            }\n\t        },\n\t\n\t        adjustPosition: function()\n\t        {\n\t            var field, pEl, width, height, viewportWidth, viewportHeight, scrollTop, left, top, clientRect;\n\t\n\t            if (this._o.container) return;\n\t\n\t            this.el.style.position = 'absolute';\n\t\n\t            field = this._o.trigger;\n\t            pEl = field;\n\t            width = this.el.offsetWidth;\n\t            height = this.el.offsetHeight;\n\t            viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n\t            viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n\t            scrollTop = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n\t\n\t            if (typeof field.getBoundingClientRect === 'function') {\n\t                clientRect = field.getBoundingClientRect();\n\t                left = clientRect.left + window.pageXOffset;\n\t                top = clientRect.bottom + window.pageYOffset;\n\t            } else {\n\t                left = pEl.offsetLeft;\n\t                top  = pEl.offsetTop + pEl.offsetHeight;\n\t                while((pEl = pEl.offsetParent)) {\n\t                    left += pEl.offsetLeft;\n\t                    top  += pEl.offsetTop;\n\t                }\n\t            }\n\t\n\t            // default position is bottom & left\n\t            if ((this._o.reposition && left + width > viewportWidth) ||\n\t                (\n\t                    this._o.position.indexOf('right') > -1 &&\n\t                    left - width + field.offsetWidth > 0\n\t                )\n\t            ) {\n\t                left = left - width + field.offsetWidth;\n\t            }\n\t            if ((this._o.reposition && top + height > viewportHeight + scrollTop) ||\n\t                (\n\t                    this._o.position.indexOf('top') > -1 &&\n\t                    top - height - field.offsetHeight > 0\n\t                )\n\t            ) {\n\t                top = top - height - field.offsetHeight;\n\t            }\n\t\n\t            this.el.style.left = left + 'px';\n\t            this.el.style.top = top + 'px';\n\t        },\n\t\n\t        /**\n\t         * render HTML for a particular month\n\t         */\n\t        render: function(year, month)\n\t        {\n\t            var opts   = this._o,\n\t                now    = new Date(),\n\t                days   = getDaysInMonth(year, month),\n\t                before = new Date(year, month, 1).getDay(),\n\t                data   = [],\n\t                row    = [];\n\t            setToStartOfDay(now);\n\t            if (opts.firstDay > 0) {\n\t                before -= opts.firstDay;\n\t                if (before < 0) {\n\t                    before += 7;\n\t                }\n\t            }\n\t            var cells = days + before,\n\t                after = cells;\n\t            while(after > 7) {\n\t                after -= 7;\n\t            }\n\t            cells += 7 - after;\n\t            for (var i = 0, r = 0; i < cells; i++)\n\t            {\n\t                var day = new Date(year, month, 1 + (i - before)),\n\t                    isSelected = isDate(this._d) ? compareDates(day, this._d) : false,\n\t                    isToday = compareDates(day, now),\n\t                    isEmpty = i < before || i >= (days + before),\n\t                    isStartRange = opts.startRange && compareDates(opts.startRange, day),\n\t                    isEndRange = opts.endRange && compareDates(opts.endRange, day),\n\t                    isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,\n\t                    isDisabled = (opts.minDate && day < opts.minDate) ||\n\t                                 (opts.maxDate && day > opts.maxDate) ||\n\t                                 (opts.disableWeekends && isWeekend(day)) ||\n\t                                 (opts.disableDayFn && opts.disableDayFn(day)),\n\t                    dayConfig = {\n\t                        day: 1 + (i - before),\n\t                        month: month,\n\t                        year: year,\n\t                        isSelected: isSelected,\n\t                        isToday: isToday,\n\t                        isDisabled: isDisabled,\n\t                        isEmpty: isEmpty,\n\t                        isStartRange: isStartRange,\n\t                        isEndRange: isEndRange,\n\t                        isInRange: isInRange\n\t                    };\n\t\n\t                row.push(renderDay(dayConfig));\n\t\n\t                if (++r === 7) {\n\t                    if (opts.showWeekNumber) {\n\t                        row.unshift(renderWeek(i - before, month, year));\n\t                    }\n\t                    data.push(renderRow(row, opts.isRTL));\n\t                    row = [];\n\t                    r = 0;\n\t                }\n\t            }\n\t            return renderTable(opts, data);\n\t        },\n\t\n\t        isVisible: function()\n\t        {\n\t            return this._v;\n\t        },\n\t\n\t        show: function()\n\t        {\n\t            if (!this._v) {\n\t                removeClass(this.el, 'is-hidden');\n\t                this._v = true;\n\t                this.draw();\n\t                if (this._o.bound) {\n\t                    addEvent(document, 'click', this._onClick);\n\t                    this.adjustPosition();\n\t                }\n\t                if (typeof this._o.onOpen === 'function') {\n\t                    this._o.onOpen.call(this);\n\t                }\n\t            }\n\t        },\n\t\n\t        hide: function()\n\t        {\n\t            var v = this._v;\n\t            if (v !== false) {\n\t                if (this._o.bound) {\n\t                    removeEvent(document, 'click', this._onClick);\n\t                }\n\t                this.el.style.position = 'static'; // reset\n\t                this.el.style.left = 'auto';\n\t                this.el.style.top = 'auto';\n\t                addClass(this.el, 'is-hidden');\n\t                this._v = false;\n\t                if (v !== undefined && typeof this._o.onClose === 'function') {\n\t                    this._o.onClose.call(this);\n\t                }\n\t            }\n\t        },\n\t\n\t        /**\n\t         * GAME OVER\n\t         */\n\t        destroy: function()\n\t        {\n\t            this.hide();\n\t            removeEvent(this.el, 'mousedown', this._onMouseDown, true);\n\t            removeEvent(this.el, 'touchend', this._onMouseDown, true);\n\t            removeEvent(this.el, 'change', this._onChange);\n\t            if (this._o.field) {\n\t                removeEvent(this._o.field, 'change', this._onInputChange);\n\t                if (this._o.bound) {\n\t                    removeEvent(this._o.trigger, 'click', this._onInputClick);\n\t                    removeEvent(this._o.trigger, 'focus', this._onInputFocus);\n\t                    removeEvent(this._o.trigger, 'blur', this._onInputBlur);\n\t                }\n\t            }\n\t            if (this.el.parentNode) {\n\t                this.el.parentNode.removeChild(this.el);\n\t            }\n\t        }\n\t\n\t    };\n\t\n\t    return Pikaday;\n\t\n\t}));\n\n\n/***/ },\n/* 5 */\n/*!**********************************************!*\\\n  !*** ./src/components/cart/autocomplete.tag ***!\n  \\**********************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\triot.tag2('autocomplete', '<div class=\"cart-search\"> <input type=\"text\" name=\"acinput\" onkeyup=\"{complete}\" class=\"u-full-width\" placeholder=\"Cari produk di sini... (ctrl+s)\" autofocus=\"true\" autocomplete=\"off\"> <ul class=\"ac\" id=\"aclist\" show=\"{filtered.length}\"> <li each=\"{c, i in filtered}\" class=\"{active: active==i}\" onclick=\"{selected}\">{c}</li> </ul>', '', '', function (opts) {\n\t  var _this = this;\n\t\n\t  this.min = opts.min || 2;\n\t  this.filtered = [];\n\t  this.active = -1;\n\t  this.mode = opts.mode || 'start';\n\t  var self = this;\n\t\n\t  this.blur = function () {\n\t    _this.acinput.value = '';\n\t    _this.active = -1;\n\t    _this.filtered = [];\n\t  };\n\t\n\t  var reset = function reset() {\n\t    _this.selection('');\n\t    _this.active = -1;\n\t    _this.filtered = [];\n\t    _this.acinput.value = '';\n\t  };\n\t\n\t  this.complete = function (e) {\n\t    if (e.target.value.length < _this.min) {\n\t      _this.filtered = [];\n\t      _this.active = -1;\n\t      return false;\n\t    }\n\t\n\t    riot.control.trigger(riot.EVT.cartSearchItem, { text: e.target.value });\n\t\n\t    if (e.which == 40 && _this.filtered.length) {\n\t      _this.active = Math.min(_this.active + 1, _this.filtered.length - 1);\n\t      return false;\n\t    }\n\t\n\t    if (e.which == 38 && _this.filtered.length) {\n\t      _this.active = Math.max(_this.active - 1, 0);\n\t      return false;\n\t    }\n\t\n\t    if (e.which == 13) {\n\t      if (_this.filtered.length) {\n\t        if (_this.active == -1) _this.active = 0;\n\t        _this.selection(_this.filtered[_this.active]);\n\t      }\n\t    }\n\t\n\t    if (e.which == 27) {\n\t      reset();\n\t    }\n\t  };\n\t\n\t  this.re = function (e) {\n\t\n\t    return _this.mode == 'start' ? RegExp('^' + e.target.value, 'i') : RegExp(e.target.value, 'i');\n\t  };\n\t\n\t  this.selected = function (s) {\n\t    _this.selection(s.item.c);\n\t  };\n\t\n\t  this.selection = function (txt) {\n\t    _this.acinput.value = txt;\n\t    if (txt != \"\") {\n\t      self.save(txt);\n\t    }\n\t    return false;\n\t  };\n\t\n\t  this.on('mount', function () {});\n\t\n\t  this.save = function (txt) {\n\t    if (!txt) {\n\t      txt = _this.acinput.value;\n\t    }\n\t    riot.control.trigger(riot.EVT.cartSaveItem, { title: txt });\n\t\n\t    reset();\n\t  };\n\t\n\t  riot.control.on(riot.EVT.cartEditItemOn, function (item) {\n\t    _this.blur();\n\t    _this.acinput.focus();\n\t  });\n\t\n\t  riot.control.on(riot.EVT.cartSaveItemSuccess, function (item) {\n\t    _this.blur();\n\t    _this.acinput.focus();\n\t  });\n\t\n\t  riot.control.on(riot.EVT.cartUpdateItemSuccess, function (item) {\n\t    _this.blur();\n\t    _this.acinput.focus();\n\t  });\n\t\n\t  riot.control.on(riot.EVT.cartSearchItemSuccess, function (searchitems) {\n\t    _this.filtered = _(searchitems).map(function (c) {\n\t      return c.title;\n\t    }).value();\n\t  });\n\t\n\t  riot.control.on(riot.EVT.cartRemoveItemSuccess, function (item) {\n\t    _this.acinput.focus();\n\t  });\n\t\n\t  riot.control.on(riot.EVT.cancelCart, function (item) {\n\t    _this.acinput.focus();\n\t  });\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 6 */\n/*!******************************************!*\\\n  !*** ./src/components/cart/cartitem.tag ***!\n  \\******************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\tvar _helperJs = __webpack_require__(/*! ../../helper.js */ 2);\n\t\n\triot.tag2('cartitem', '<div class=\"cart-item\"> <div class=\"row\"> <div class=\"seven columns\"><div class=\"ellipsis\" title=\"{opts.title}\">{opts.title}</div><div class=\"u-text-left\"><small>{this.price_}</small></div></div> <div class=\"two columns u-text-center\"> <input type=\"text\" name=\"qty__\" class=\"u-full-width u-text-center\" value=\"{opts.qty}\" min=\"1\" onkeyup=\"{edit__}\" onblur=\"{edit_}\" autocomplete=\"off\" onclick=\"{focus__}\"> </div> <input type=\"hidden\" name=\"qty_\" value=\"{opts.qty}\"> <div class=\"three columns u-text-right subtotal\">{this.subtotal_}</div> </div> </div>', '', '', function (opts) {\n\t  var tag = this;\n\t\n\t  tag.on('mount', function () {\n\t    tag.price_ = (0, _helperJs.addCommas)(opts.price);\n\t    tag.subtotal_ = (0, _helperJs.addCommas)(opts.price * opts.qty);\n\t  });\n\t\n\t  tag.remove = function (e) {\n\t    var r = confirm(\"HAPUS \\\"\" + opts.title.toUpperCase() + \"\\\" ?\");\n\t    if (r) {\n\t      riot.control.trigger(riot.EVT.cartRemoveItem, opts);\n\t    } else {\n\t      e.target.value = tag.qty_.value;\n\t      e.target.select();\n\t      return false;\n\t    }\n\t  };\n\t\n\t  tag.edit__ = function (e) {\n\t    if (e.which == 13) {\n\t      var qty_ = parseFloat(e.target.value);\n\t      if (isNaN(qty_) || qty_ <= 0) {\n\t        tag.remove(e);\n\t      } else {\n\t        var item__ = {\n\t          _id: opts._id,\n\t          title: opts.title,\n\t          qty: e.target.value,\n\t          price: opts.price,\n\t          type: 'cartitem',\n\t          created: opts.created\n\t        };\n\t        riot.control.trigger(riot.EVT.cartEditItemOn, item__);\n\t      }\n\t    }\n\t  };\n\t  tag.edit_ = function (e) {\n\t    var qty_ = parseFloat(e.target.value);\n\t    if (isNaN(qty_) || qty_ <= 0) {\n\t      e.target.value = tag.qty_.value;\n\t    }\n\t  };\n\t\n\t  tag.focus__ = function (e) {\n\t    e.target.setSelectionRange(0, e.target.value.length);\n\t  };\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 7 */\n/*!*******************************************!*\\\n  !*** ./src/components/cart/cartitems.tag ***!\n  \\*******************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\t__webpack_require__(/*! ./autocomplete.tag */ 5);\n\t\n\t__webpack_require__(/*! ./cartitem.tag */ 6);\n\t\n\tvar _helperJs = __webpack_require__(/*! ../../helper.js */ 2);\n\t\n\triot.tag2('cartitems', '<div class=\"cart\"> <div show=\"{isNewUser || !isProductReady}\"> <h3>Pengguna Baru</h3> Untuk memudahkan Anda, lengkapi data-data di bawah ini: </div> <div show=\"{isNewUser}\" style=\"border-top:1px solid #efefef; margin-top:5px; padding-top:5px\"> &raquo; Tentukan Nama Toko kamu di <a href=\"#configurations\">Konfigurasi Toko</a> </div> <div show=\"{!isProductReady}\" style=\"border-top:1px solid #efefef; margin-top:5px; padding-top:5px\"> &raquo; Isi produk yang Anda jual di <a href=\"#products\">Manajemen Produk</a> </div> <div show=\"{isCartEmpty && isProductReady && !isNewUser}\"> <small>Cari <a href=\"#products\">produk</a> pada kotak pencarian di atas terlebih dahulu.</small> </div> <div class=\"row\" each=\"{item_, index in items}\" show=\"{!isCartEmpty && isProductReady}\"> <cartitem _id=\"{item_._id}\" title=\"{item_.title}\" price=\"{item_.price}\" qty=\"{item_.qty}\" created=\"{item_.created}\" index=\"{index}\"></cartitem> </div> </div> <div class=\"cart-total\" show=\"{!isCartEmpty && isProductReady}\"> <div class=\"cart-total-items\"> <div class=\"row\"> <div class=\"six columns\">Total ({total_items} produk)</div> <div class=\"six columns u-text-right\"><span>{total}</span></div> </div> </div> <div class=\"cart-total-payment\"> <div class=\"row\"> <div class=\"six columns\"> <label><u>T</u>unai</label> </div> <div class=\"six columns\"> <input type=\"text\" id=\"cash\" name=\"cash\" class=\"u-full-width u-text-right {red: isMinus}\" value=\"0\" placeholder=\"Masukkan uang yang diterima di sini...\" onkeyup=\"{updateTotal}\" oninput=\"{oninp}\" onclick=\"{focus__}\"> </div> </div> </div> <div class=\"cart-total-change\"> <div class=\"row\"> <div class=\"four columns\"> <label>Kembalian</label> </div> <div class=\"eight columns u-text-right\" id=\"kembalian\"><span class=\" {red: isMinus}\">{kembalian}</span></div> </div> </div> <div class=\"cart-total-pay\"> <div class=\"row \"> <div class=\"four columns\"> <button class=\"button u-full-width \" tabindex=\"-1\" onclick=\"{cancel_}\">Reset</button> </div> <div class=\"eight columns u-text-right\"> <button class=\"button button-primary u-full-width cart-total-pay-button\" onclick=\"{bayar}\">BAYAR</button> </div> </div> </div> </div>', '', 'show=\"{isReady}\"', function (opts) {\n\t  var alerty = __webpack_require__(/*! alerty */ 3);\n\t  var tag = this;\n\t  tag.isReady = false;\n\t  tag.items = [];\n\t  tag.total = 0;\n\t  tag.total_ = 0;\n\t  tag.total_items = 0;\n\t  tag.kembalian = 0;\n\t  tag.kembalian_ = 0;\n\t  tag.cash_ = 0;\n\t  tag.isMinus = true;\n\t  tag.isCartEmpty = false;\n\t  tag.isNewUser = null;\n\t  tag.isProductReady = null;\n\t\n\t  tag.on('mount', function () {\n\t    document.getElementById('preloader').style.display = \"\";\n\t\n\t    riot.control.trigger(riot.EVT.cartLoadItems);\n\t  });\n\t\n\t  tag.on('update', function () {\n\t    var tot = 0;\n\t    var tot_items = 0;\n\t    _.each(tag.items, function (someThing) {\n\t      tot += parseInt(someThing.price) * parseInt(someThing.qty);\n\t      tot_items++;\n\t    });\n\t    tag.total_ = tot;\n\t    tag.total_items = tot_items;\n\t\n\t    if (tag.total_items > 0) {\n\t      tag.isCartEmpty = false;\n\t    } else {\n\t      tag.isCartEmpty = true;\n\t      tag.items = [];\n\t    }\n\t\n\t    tag.total = (0, _helperJs.addCommas)(tag.total_);\n\t    tag.total_items = (0, _helperJs.addCommas)(tag.total_items);\n\t    tag.isCartEmpty = tag.isCartEmpty;\n\t    tag.updateTotal();\n\t  });\n\t\n\t  riot.control.on(riot.EVT.isProductReady, function (status) {\n\t    tag.isProductReady = status;\n\t    tag.update();\n\t  });\n\t\n\t  riot.control.on(riot.EVT.cartLoadItemsSuccess, function (items) {\n\t    tag.items = items;\n\t    document.getElementById('preloader').style.display = \"none\";\n\t    tag.isNewUser = riot.isNewUser;\n\t    riot.control.trigger(riot.EVT.isNewUser, tag.isNewUser);\n\t    tag.isReady = true;\n\t    tag.update();\n\t  });\n\t\n\t  riot.control.on(riot.EVT.cartSaveItemSuccess, function (item) {\n\t\n\t    tag.items.splice(0, 0, item);\n\t    tag.items = (0, _helperJs.avoidDup)(tag.items);\n\t    tag.update();\n\t    riot.control.trigger(riot.EVT.allowAdd, true);\n\t  });\n\t\n\t  riot.control.on(riot.EVT.cartUpdateItemSuccess, function (item) {\n\t    var index = _.indexOf(tag.items, _.find(tag.items, { _id: item._id }));\n\t    tag.items.splice(index, 1, item);\n\t    tag.update();\n\t    riot.control.trigger(riot.EVT.allowAdd, true);\n\t  });\n\t\n\t  riot.control.on(riot.EVT.cartRemoveItemSuccess, function (item) {\n\t    tag.items = (0, _helperJs.avoidDup)(tag.items);\n\t    var index = _.indexOf(tag.items, _.find(tag.items, { _id: item._id }));\n\t    tag.items.splice(index, 1);\n\t\n\t    tag.update();\n\t  });\n\t\n\t  riot.control.on(riot.EVT.cancelCartSuccess, function (items) {\n\t    tag.items = items;\n\t    tag.update();\n\t  });\n\t\n\t  tag.oninp = function () {\n\t    tag.cash_ = parseFloat(tag.cash.value.replace(/[.]/g, ''));\n\t\n\t    tag.cash.value = (0, _helperJs.addCommas)(tag.cash.value.replace(/[^0-9]/g, ''));\n\t  };\n\t\n\t  tag.bayar = function (e) {\n\t    e.preventDefault();\n\t    tag.updateTotal();\n\t    if (tag.kembalian_ < 0 || isNaN(tag.kembalian_)) {\n\t\n\t      alerty.toasts(\"ERROR: Uang kembalian tidak boleh minus!\", { place: 'top', bgColor: 'red', time: 2500 });\n\t      tag.cash.focus();\n\t      tag.cash.select();\n\t    } else {\n\t      var r = confirm(\"SIMPAN TRANSAKSI?\");\n\t      if (r) {\n\t        var createdOn = Math.floor((Date.now() + riot.timezone * 60 * 60 * 1000) / 1000);\n\t\n\t        var salesitems = tag.items.map(function (r) {\n\t          return {\n\t            'created': r.created,\n\t            'price': r.price,\n\t            'qty': r.qty,\n\t            'title': r.title,\n\t            'subtotal': r.price * r.qty\n\t          };\n\t        });\n\t\n\t        var salesTotal = _.sumBy(salesitems, function (o) {\n\t          return o.subtotal;\n\t        });\n\t\n\t        var sales = {\n\t          _id: 'sales_' + createdOn,\n\t          created: createdOn,\n\t          discount: 0,\n\t          payment: 'cash',\n\t          total: salesTotal,\n\t          cash: tag.cash_,\n\t          items: salesitems,\n\t          type: 'sales'\n\t        };\n\t\n\t        riot.control.trigger(riot.EVT.salesSave, sales);\n\t      } else {\n\t        return false;\n\t      }\n\t    }\n\t  };\n\t\n\t  tag.updateTotal = function (e) {\n\t    tag.kembalian_ = parseFloat(tag.cash_) - parseFloat(tag.total_);\n\t    tag.kembalian = (0, _helperJs.addCommas)(tag.kembalian_);\n\t\n\t    if (tag.kembalian_ < 0) {\n\t      tag.isMinus = true;\n\t    } else {\n\t      tag.isMinus = false;\n\t    }\n\t\n\t    if (e && e.which == 13) {\n\t      tag.bayar(e);\n\t    } else {\n\t      return false;\n\t    }\n\t  };\n\t\n\t  tag.cancel_ = function (e) {\n\t    var r = confirm(\"Reset Penjualan?\");\n\t    if (r) {\n\t      riot.control.trigger(riot.EVT.cancelCart, { mode: \"normal\" });\n\t    } else {\n\t      return false;\n\t    }\n\t  };\n\t\n\t  tag.hold_ = function (e) {\n\t    var r = confirm(\"Tunda Penjualan?\");\n\t    if (r) {} else {}\n\t  };\n\t\n\t  riot.control.on(riot.EVT.salesSaveSuccess, function (salesId) {\n\t    riot.route(\"print?cid=\" + salesId);\n\t  });\n\t\n\t  tag.focus__ = function (e) {\n\t    e.target.setSelectionRange(0, e.target.value.length);\n\t  };\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 8 */\n/*!**************************************************!*\\\n  !*** ./src/components/cart/cartproductitems.tag ***!\n  \\**************************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\tvar _helperJs = __webpack_require__(/*! ../../helper.js */ 2);\n\t\n\triot.tag2('cartproductitems', '<span each=\"{productItems}\"> <a href=\"#\" onclick=\"{select}\" class=\"ellipsis\" title=\"{title}\">{title}</a> </span>', '', '', function (opts) {\n\t  var tag = this;\n\t  tag.productItems = [];\n\t  tag.price_ = 0;\n\t  var allowAdd = true;\n\t\n\t  tag.on('mount', function () {\n\t    riot.control.trigger(riot.EVT.productLoadItems_);\n\t  });\n\t\n\t  riot.control.on(riot.EVT.productLoadItemsSuccess_, function (productItems) {\n\t    tag.productItems = productItems.docs.map(function (r) {\n\t      return r;\n\t    });\n\t    var size_ = _.size(tag.productItems);\n\t\n\t    if (size_ > 0) {\n\t      riot.control.trigger(riot.EVT.isProductReady, true);\n\t    } else {\n\t      riot.control.trigger(riot.EVT.isProductReady, false);\n\t    }\n\t\n\t    tag.update();\n\t  });\n\t\n\t  tag.select = function (e) {\n\t    if (allowAdd === true) {\n\t      allowAdd = false;\n\t      riot.control.trigger(riot.EVT.cartSaveItem, { title: e.item.title });\n\t    }\n\t  };\n\t\n\t  riot.control.on(riot.EVT.allowAdd, function (status) {\n\t    allowAdd = status;\n\t  });\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 9 */\n/*!***********************************************!*\\\n  !*** ./src/components/product/addproduct.tag ***!\n  \\***********************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\tvar _helperJs = __webpack_require__(/*! ../../helper.js */ 2);\n\t\n\triot.tag2('addproduct', '<form style=\"margin-bottom:0px\"> <div class=\"eight columns\"> <input type=\"text\" name=\"item\" class=\"u-full-width {this.item_error ? \\'has-error\\' : \\'has-success\\'}\" value=\"\" placeholder=\"Isi nama produk di sini\" oninput=\"{oninputitem}\" onkeyup=\"{save}\"> <small class=\"hint\">*Tekan ⏎ (enter/return) untuk menyimpan</small> </div> <div class=\"four columns\"> <input type=\"text\" id=\"price\" name=\"price\" class=\"u-full-width u-text-right {this.price_error ? \\'has-error\\' : \\'has-success\\'}\" value=\"\" placeholder=\"harga produk\" oninput=\"{oninputprice}\" onkeyup=\"{save}\"> </div> </form>', '', '', function (opts) {\n\t  var _this = this;\n\t\n\t  var alerty = __webpack_require__(/*! alerty */ 3);\n\t  var self = this;\n\t  var ENTER_KEY = 13;\n\t  this.item_error = true;\n\t  this.price_error = true;\n\t  this.price_ = 0;\n\t\n\t  this.oninputitem = function () {\n\t    if (_this.item.value != \"\") {\n\t      _this.item_error = false;\n\t    } else {\n\t      _this.item_error = true;\n\t    }\n\t  };\n\t\n\t  this.oninputprice = function () {\n\t    var prize__ = parseFloat(_this.price.value);\n\t    if (prize__ > 0 || !isNaN(prize__)) {\n\t      _this.price_error = false;\n\t    } else {\n\t      _this.price_error = true;\n\t    }\n\t    _this.price_ = parseFloat(_this.price.value.replace(\".\", \"\"));\n\t    _this.price.value = (0, _helperJs.addCommas)(_this.price.value.replace(/[^0-9-]/g, ''));\n\t  };\n\t\n\t  var reset = function reset() {\n\t    _this.item.value = '';\n\t    _this.price.value = '0';\n\t\n\t    _this.id_edit = false;\n\t    _this.item.disabled = false;\n\t    _this.item.focus();\n\t    _this.update();\n\t  };\n\t\n\t  this.save = function (e) {\n\t\n\t    var prize_ = parseFloat(_this.price_);\n\t    if (e.which === ENTER_KEY) {\n\t      if (_this.item.value && prize_ > 0 && !isNaN(prize_)) {\n\t        var item = {\n\t          title: _this.item.value,\n\t          price: prize_,\n\t          stock: 0\n\t        };\n\t\n\t        if (_this.is_edit) {\n\t          item['_id'] = _this.item.idvalue;\n\t        }\n\t\n\t        riot.control.trigger(riot.EVT.productSaveItem, item);\n\t        reset();\n\t      } else {\n\t        console.log(_this.price.value);\n\t        if (_this.item.value == \"\") {\n\t          alerty.toasts(\"ERROR: Nama produk harus diisi!\", { place: 'top', bgColor: 'black', time: 2500 });\n\t          _this.item.focus();\n\t        } else if (prize_ <= 0 || isNaN(prize_)) {\n\t          alerty.toasts(\"ERROR: Harga harus diisi!\", { place: 'top', bgColor: 'black', time: 2500 });\n\t          _this.price.focus();\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  this.cancel = function (e) {\n\t    reset();\n\t  };\n\t\n\t  riot.control.on(riot.EVT.productEditItemOn, function (item) {\n\t    _this.is_edit = true;\n\t    _this.item.value = item.title;\n\t    _this.item.disabled = true;\n\t    _this.item.idvalue = item._id;\n\t    _this.price.value = item.price;\n\t    _this.stock.value = item.stock;\n\t    _this.item.focus();\n\t    _this.update();\n\t  });\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 10 */\n/*!************************************************!*\\\n  !*** ./src/components/product/productitem.tag ***!\n  \\************************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\tvar _helperJs = __webpack_require__(/*! ../../helper.js */ 2);\n\t\n\triot.tag2('productitem', '<div class=\"eight columns product-item-name ellipsis\"> <label>{this.title} <small class=\"green\">{⁗✔ updated⁗: this.isUpdated}</small></label> <input type=\"hidden\" name=\"item_single\" value=\"{this.title}\"> </div> <div class=\"three columns u-text-right product-item-price\"> <input type=\"text\" min=\"1\" name=\"price_single\" class=\"u-full-width u-text-right\" value=\"{price_update_}\" onkeyup=\"{edit}\" oninput=\"{oninputprice_single}\"> </div> <div class=\"one columns u-text-right product-item-price\"> <a href=\"#{this._id}\" onclick=\"{remove}\" title=\"Hapus {this.title}\">✖</a> </div>', '', '', function (opts) {\n\t  var _this = this;\n\t\n\t  var self = this;\n\t  this.price_single_ = String(this.price).replace(/[.]/g, '');\n\t  this.prize_ = parseFloat(this.price_single_);\n\t  self.removed = false;\n\t  self.isUpdated = false;\n\t\n\t  this.on('mount', function () {\n\t    _this.price_update_ = (0, _helperJs.addCommas)(_this.price_single_);\n\t  });\n\t\n\t  this.oninputprice_single = function () {\n\t    var prize__ = parseFloat(_this.price_single.value);\n\t    if (prize__ > 0 || !isNaN(prize__)) {\n\t      _this.price_error = false;\n\t    } else {\n\t      _this.price_error = true;\n\t    }\n\t    _this.price_single_ = parseFloat(_this.price_single.value.replace(/[.]/g, ''));\n\t    _this.price_single.value = (0, _helperJs.addCommas)(_this.price_single.value.replace(/[^0-9-]/g, ''));\n\t  };\n\t\n\t  this.edit = function (e) {\n\t\n\t    if (e.which == 13) {\n\t      var prize_ = _this.price_single_;\n\t\n\t      if (_this.item_single.value && (prize_ > 0 || !isNaN(prize_))) {\n\t        var item = {\n\t          _id: opts._id,\n\t          title: _this.item_single.value,\n\t          price: prize_,\n\t          stock: 0,\n\t          created: opts.created\n\t        };\n\t\n\t        riot.control.trigger(riot.EVT.productSaveItem, item);\n\t      }\n\t    }\n\t  };\n\t\n\t  this.remove = function (e) {\n\t\n\t    var r = confirm(\"Remove \\\"\" + _this.title + \"\\\" ?\");\n\t    if (r == true) {\n\t      var opts = { _id: _this._id };\n\t      riot.control.trigger(riot.EVT.productRemoveItem, opts);\n\t    } else {\n\t      return false;\n\t    }\n\t  };\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 11 */\n/*!*************************************************!*\\\n  !*** ./src/components/product/productitems.tag ***!\n  \\*************************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\t__webpack_require__(/*! ./productitem.tag */ 10);\n\t\n\triot.tag2('productitems', '<div class=\"product-search\"> <input type=\"text\" name=\"search\" class=\"u-full-width\" value=\"\" placeholder=\"Masukkan kata yang ingin dicari dan tekan ⏎\" onblur=\"{blur2}\" onkeyup=\"{s}\"> </div> <div class=\"product-item\"> <small class=\"hint\">*Tekan ⏎ untuk menyimpan data yang dimodifikasi.</small><br> <div class=\"row\" each=\"{productItems}\"> <productitem title=\"{title}\" price=\"{price}\" stock=\"{stock}\" _id=\"{_id}\"></productitem> </div> <div class=\"pagination u-text-center\"> <ul> <li each=\"{countItems}\" class=\"{active: done}\"> <a href=\"./#products?page={id}\">{id}</a> </li> </ul> </div> </div>', '', '', function (opts) {\n\t  var _this = this;\n\t\n\t  var alerty = __webpack_require__(/*! alerty */ 3);\n\t  this.productItems = [];\n\t  this.countItems = [];\n\t  this.q = [];\n\t\n\t  var q = riot.route.query();\n\t\n\t  this.on('mount', function () {\n\t    if (!q.page) q.page = 1;\n\t    document.getElementById('preloader').style.display = \"\";\n\t    riot.control.trigger(riot.EVT.productLoadItems, { page: q.page });\n\t  });\n\t\n\t  riot.control.on(riot.EVT.productLoadItemsSuccess, function (productItems) {\n\t    _this.productItems = productItems.docs.map(function (r) {\n\t      return r;\n\t    });\n\t\n\t    var array = _.range(0, productItems.total_rows / riot.pageSize);\n\t\n\t    _this.countItems = _.map(array, function (value, key) {\n\t      return { id: key + 1, done: q.page == key + 1 ? true : false };\n\t    });\n\t\n\t    document.getElementById('preloader').style.display = \"none\";\n\t\n\t    _this.update();\n\t  });\n\t\n\t  riot.control.on(riot.EVT.productSaveItemSuccess, function (item) {\n\t    _this.productItems.splice(0, 0, item);\n\t    alerty.toasts(\"SUCCESS: Produk baru berhasil ditambahkan\", { place: 'top', bgColor: '#FF8552', time: 2500 });\n\t    _this.update();\n\t  });\n\t\n\t  riot.control.on(riot.EVT.productUpdateItemSuccess, function (item) {\n\t    var index = _.indexOf(_this.productItems, _.find(_this.productItems, { _id: item._id }));\n\t    _this.productItems.splice(index, 1, item);\n\t    _this.update();\n\t  });\n\t\n\t  riot.control.on(riot.EVT.productRemoveItemSuccess, function (item) {\n\t\n\t    var index__ = _.indexOf(_this.productItems, _.find(_this.productItems, { _id: item._id }));\n\t\n\t    if (parseFloat(index__) > -1) {\n\t      _this.productItems.splice(index__, 1);\n\t    }\n\t    alerty.toasts(\"REMOVE SUCCESS: Produk berhasil dihapus\", { place: 'top', bgColor: '#FF8552', time: 2500 });\n\t    _this.update();\n\t  });\n\t\n\t  var clearSearch = function clearSearch(s) {\n\t    riot.control.trigger(riot.EVT.productSearchItem, { text: s });\n\t  };\n\t\n\t  this.s = function (e) {\n\t    if (e.which == 13) {\n\t      clearSearch(e.target.value);\n\t    }\n\t  };\n\t\n\t  riot.control.on(riot.EVT.productSearchItemSuccess, function (searchitems) {\n\t    _this.productItems = searchitems;\n\t\n\t    _this.countItems = [];\n\t    _this.update();\n\t  });\n\t\n\t  this.clearAction = function (e) {\n\t    _this.search.value = '';\n\t    _this.search.focus();\n\t    clearSearch('');\n\t  };\n\t\n\t  riot.control.on(riot.EVT.productUpdateItemSuccess, function (item) {\n\t    var index = _.indexOf(_this.productItems, _.find(_this.productItems, { _id: item._id }));\n\t\n\t    _.assign(_this.productItems[index], { isUpdated: true });\n\t    _this.update();\n\t  });\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 12 */\n/*!********************************************!*\\\n  !*** ./src/components/sales/salesitem.tag ***!\n  \\********************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\tvar _helperJs = __webpack_require__(/*! ../../helper.js */ 2);\n\t\n\triot.tag2('salesitem', '<div class=\"row sales-item-summary\"> <div class=\"seven columns sales-item-date\" onclick=\"{toggle}\"> {this.created_}<br><small>({this.itemTotal} produk)</small> </div> <div class=\"four columns u-text-right sales-item-total\" onclick=\"{toggle}\"> {this.grandtotal_} </div> <div class=\"one columns\"><a href=\"#print?sid={this._id}\">🖨</a></div> </div> <div class=\"sales-item-detail\" show=\"{this.isDetail}\"> <div class=\"row\" each=\"{this.items}\"> <div class=\"seven columns sales-item-number ellipsis\"> <small>&nbsp;➜ {title} // {price} x {qty}</small> </div> <div class=\"four columns u-text-right\"><small>{price*qty}</small></div> <div class=\"one columns\">&nbsp;</div> </div> </div>', '', '', function (opts) {\n\t  var _this = this;\n\t\n\t  this.isDetail = false;\n\t\n\t  this.on('update', function () {\n\t    _this.created_ = (0, _helperJs.formattedTime)(_this.created);\n\t    _this.grandtotal_ = (0, _helperJs.addCommas)(_this.total);\n\t    _this.itemTotal = _this.items.length;\n\t  });\n\t\n\t  this.toggle = function (e) {\n\t    _this.isDetail = !_this.isDetail;\n\t    _this.update();\n\t  };\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 13 */\n/*!*****************************!*\\\n  !*** ./src/pages/about.tag ***!\n  \\*****************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\triot.tag2('about', '<div class=\"container about\"> <div class=\"row\"> <div class=\"twelve columns\"> <h3>AlBarokah {version} </h3> <p>AlBarokah adalah aplikasi POS Retail didedikasikan untuk UKM (Usaha Kecil Menengah).</p> Keunggulan AlBarokah: <ul> <li><u>Murah</u>; Tanpa internet; Tanpa install server</li> <li><u>Mudah</u>; Multi platform (Windows, Linux, Mac);</li> </ul> <hr> <p>Bantu kami untuk mengembangkan AlBarokah dengan <a href=\"https://github.com/klanjabrik/albarokah/issues\" target=\"_blank\">mengirimkan <i>error</i>/<i>bugs</i> &amp; untuk mendapatkan informasi versi terbaru&raquo;</a></p> </div> </div> </div>', '', '', function (opts) {\n\t  var _this = this;\n\t\n\t  this.on('mount', function () {\n\t    _this.version = riot.AppVersion;\n\t    _this.update();\n\t  });\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 14 */\n/*!**************************************!*\\\n  !*** ./src/pages/configurations.tag ***!\n  \\**************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\triot.tag2('configurations', '<div class=\"container conf\"> <div class=\"row\"> <div class=\"twelve columns\"> <h3>Konfigurasi</h3> <h6>Nama Toko</h6> <input type=\"text\" name=\"shopName\" class=\"u-full-width\" value=\"{shopname}\" placeholder=\"Nama toko\" autofocus=\"true\" oninput=\"{edit}\"> <h6>Timezone (UTC)</h6> <select onchange=\"{edit_timezone}\" id=\"timezone_select\"> <option each=\"{timezoneData}\" value=\"{hourdiff}\" __selected=\"{selected}\">UTC {hourdiff > 0 ? \\'+\\'+hourdiff : hourdiff}</option> </select> </select> <h6>Gambar Latar Belakang</h6> <p>Ganti gambar latar belakang dengan mengganti <em>file</em> <u>background.jpg</u> file. </p> </div> </div> </div>', '', '', function (opts) {\n\t  var _this = this;\n\t\n\t  var alerty = __webpack_require__(/*! alerty */ 3);\n\t  var self = this;\n\t  this.shopname = riot.shopname;\n\t  this.timezoneData = [];\n\t\n\t  this.on('mount', function () {\n\t    riot.control.trigger(riot.EVT.shopLoadData);\n\t  });\n\t\n\t  riot.control.on(riot.EVT.shopLoadDataSuccess, function (shop) {\n\t    riot.shopname = shop.name ? shop.name : riot.shopname;\n\t    riot.timezone = shop.timezone ? shop.timezone : riot.timezone;\n\t\n\t    _this.shopname = riot.shopname;\n\t\n\t    _this.timezoneData = [{ hourdiff: -12, selected: riot.timezone == -12 ? true : false }, { hourdiff: -11, selected: riot.timezone == -11 ? true : false }, { hourdiff: -10, selected: riot.timezone == -10 ? true : false }, { hourdiff: -9, selected: riot.timezone == -9 ? true : false }, { hourdiff: -8, selected: riot.timezone == -8 ? true : false }, { hourdiff: -7, selected: riot.timezone == -7 ? true : false }, { hourdiff: -6, selected: riot.timezone == -6 ? true : false }, { hourdiff: -5, selected: riot.timezone == -5 ? true : false }, { hourdiff: -4, selected: riot.timezone == -4 ? true : false }, { hourdiff: -3.5, selected: riot.timezone == -3.5 ? true : false }, { hourdiff: -3, selected: riot.timezone == -3 ? true : false }, { hourdiff: -2, selected: riot.timezone == -2 ? true : false }, { hourdiff: -1, selected: riot.timezone == -1 ? true : false }, { hourdiff: 0, selected: riot.timezone == 0 ? true : false }, { hourdiff: 1, selected: riot.timezone == 1 ? true : false }, { hourdiff: 2, selected: riot.timezone == 2 ? true : false }, { hourdiff: 3, selected: riot.timezone == 3 ? true : false }, { hourdiff: 4, selected: riot.timezone == 4 ? true : false }, { hourdiff: 4.5, selected: riot.timezone == 4.5 ? true : false }, { hourdiff: 5, selected: riot.timezone == -5 ? true : false }, { hourdiff: 5.5, selected: riot.timezone == 5.5 ? true : false }, { hourdiff: 5.75, selected: riot.timezone == 5.75 ? true : false }, { hourdiff: 6, selected: riot.timezone == 6 ? true : false }, { hourdiff: 6.5, selected: riot.timezone == 6.5 ? true : false }, { hourdiff: 7, selected: riot.timezone == 7 ? true : false }, { hourdiff: 8, selected: riot.timezone == 8 ? true : false }, { hourdiff: 9, selected: riot.timezone == 9 ? true : false }, { hourdiff: 9.5, selected: riot.timezone == 9.5 ? true : false }, { hourdiff: 10, selected: riot.timezone == 10 ? true : false }, { hourdiff: 11, selected: riot.timezone == 11 ? true : false }, { hourdiff: 12, selected: riot.timezone == 12 ? true : false }, { hourdiff: 13, selected: riot.timezone == 13 ? true : false }];\n\t    _this.update();\n\t  });\n\t\n\t  this.edit = function (e) {\n\t    var val_ = e.target.value;\n\t    document.getElementById('home').innerHTML = e.target.value;\n\t    riot.control.trigger(riot.EVT.shopSaveName, e.target.value);\n\t    riot.isNewUser = false;\n\t  };\n\t\n\t  this.edit_timezone = function (e) {\n\t    var newTimezone = document.getElementById(\"timezone_select\").options[e.target.selectedIndex].value;\n\t\n\t    riot.timezone = newTimezone;\n\t    riot.control.trigger(riot.EVT.shopSaveTimezone, newTimezone);\n\t    riot.isNewUser = false;\n\t  };\n\t\n\t  riot.control.on(riot.EVT.shopSaveSuccess, function (item) {\n\t    alerty.toasts(\"SUCCESS: Konfigurasi berhasil diperbaharui\", { place: 'top', bgColor: '#FF8552', time: 2500 });\n\t    _this.update();\n\t  });\n\t\n\t  riot.control.on(riot.EVT.shopUpdateSuccess, function (item) {\n\t    alerty.toasts(\"SUCCESS: Konfigurasi berhasil diperbaharui\", { place: 'top', bgColor: '#FF8552', time: 2500 });\n\t    _this.update();\n\t  });\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 15 */\n/*!********************************!*\\\n  !*** ./src/pages/database.tag ***!\n  \\********************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\triot.tag2('database', '<div class=\"container conf\"> <div class=\"row\"> <div class=\"twelve columns\"> <h3>Database</h3> <p>File CSV digunakan untuk aplikasi excel (spreadsheet), sedangkan file JSON digunakan untuk export import data antar aplikasi ALBarokah.</p> <hr> <ul> <li>Export Produk:&nbsp;&nbsp;<a href=\"\">[CSV]</a>&nbsp;&nbsp;<a href=\"\">[JSON]</a></li> <li>Export Penjualan:&nbsp;&nbsp;<a href=\"\">[CSV]</a>&nbsp;&nbsp;<a href=\"\">[JSON]</a></li> </ul> <hr> <ul> <li>Import Produk:&nbsp;&nbsp;<a href=\"\">[CSV]</a>&nbsp;&nbsp;<a href=\"\">[JSON]</a></li> <li>Import Penjualan:&nbsp;&nbsp;<a href=\"\">[CSV]</a>&nbsp;&nbsp;<a href=\"\">[JSON]</a></li> </ul> </div> </div> </div>', '', '', function (opts) {});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 16 */\n/*!****************************!*\\\n  !*** ./src/pages/help.tag ***!\n  \\****************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\triot.tag2('help', '<div class=\"container about\"> <div class=\"row\"> <div class=\"twelve columns\"> <h3>Panduan</h3> <h6>1. Bagaimana menghapus produk yang sudah diinput di <a href=\"#home\">kasir</a>?</h6> <p>Fokuskan cursor pada kotak isian jumlah, kemudian ketikkan angka 0 (nol), lalu tekan enter/return.</p> <hr> <h6>2. Bagaimana melihat produk-produk yang dibeli pada suatu <a href=\"#sales\">penjualan</a>?</h6> <p>Tekan area pada baris penjualan yang dimaksud.</p> <hr> <h6>3. Export data penjualan ke excel?</h6> <p>Masuk ke halaman <a href=\"#sales\">Penjualan</a>, kemudian pilih tanggal penjualan, setelah itu <em>klik</em> tautan Simpan CSV.</p> </div> </div> </div>', '', '', function (opts) {});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 17 */\n/*!****************************!*\\\n  !*** ./src/pages/home.tag ***!\n  \\****************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\t__webpack_require__(/*! ../components/cart/cartitems.tag */ 7);\n\t\n\t__webpack_require__(/*! ../components/cart/cartproductitems.tag */ 8);\n\t\n\tvar _helperJs = __webpack_require__(/*! ../helper.js */ 2);\n\t\n\triot.tag2('home', '<div class=\"container pos\"> <div class=\"row\"> <div class=\"seven columns pos-cart-column\"> <div class=\"pos-cart\"> <div class=\"wrap_autocomplete\" show=\"{!isNewUser && isProductReady}\"> <autocomplete min=\"1\" mode=\"contains\"></autocomplete> </div> <cartitems></cartitems> </div> </div> <div class=\"five columns pos-product-column\"> <div class=\"pos-product\"> <div class=\"row title\"> <div class=\"six columns caption\"> Daftar Produk </div> <div class=\"six columns u-text-right\"> <a href=\"#products\">➕</a> </div> </div> <div class=\"pos-product-item\"> <cartproductitems></cartproductitems> </div> </div> </div> </div> </div> </div>', '', '', function (opts) {\n\t  var tag = this;\n\t  tag.isNewUser = riot.isNewUser;\n\t  tag.isProductReady = false;\n\t\n\t  riot.control.on(riot.EVT.isProductReady, function (status) {\n\t    tag.isProductReady = status;\n\t    tag.update();\n\t  });\n\t\n\t  riot.control.on(riot.EVT.isNewUser, function (status) {\n\t    tag.isNewUser = status;\n\t    tag.update();\n\t  });\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 18 */\n/*!*****************************!*\\\n  !*** ./src/pages/print.tag ***!\n  \\*****************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\tvar _helperJs = __webpack_require__(/*! ../helper.js */ 2);\n\t\n\triot.tag2('print', '<div class=\"container pos-print\"> <div class=\"row\"> <div class=\"twelve columns\"> <div class=\"pos-cart\"> <table width=\"100%\" class=\"pos-print\"> <caption> {shopname} <hr> </caption> <thead> <tr> <td><strong>Barang</strong></td> <td class=\"u-text-center\"><strong>Jumlah</strong></td> <td class=\"u-text-right\"><strong>Harga</strong></td> <td class=\"u-text-right\"><strong>Subtotal</strong></td> </tr> </thead> <tbody> <tr each=\"{salesItems}\"> <td>{title}</td> <td class=\"u-text-center\">{qty}</td> <td class=\"u-text-right\">{price}</td> <td class=\"u-text-right\">{subtotal}</td> </tr> </tbody> <tfoot> <tr> <td colspan=\"3\"><strong>Total</strong></td> <td class=\"u-text-right\"><strong>{total}</strong></td> </tr> <tr> <td colspan=\"3\"><strong>Disc ({disc}%)</strong></td> <td class=\"u-text-right\"><strong>{disctotal}</strong></td> </tr> <tr> <td colspan=\"3\"><strong>Grand Total</strong></td> <td class=\"u-text-right\"><strong>{grandtotal}</strong></td> </tr> <tr> <td colspan=\"1\">Dibayar tunai: {cash}</td> <td colspan=\"3\" class=\"u-text-right\">Kembalian: {kembalian}</td> </tr> <tr> <td colspan=\"4\" class=\"u-text-center\">{created}<br>Terima kasih atas kunjungan Anda.</td> </tr> </tfoot> </table> <table width=\"100%\" class=\"pos-print-action\"> <tr> <td class=\"u-text-center\"><a href=\"#\" onclick=\"window.print();\" class=\"button button-primary u-full-width\">Web Print</a></td> </tr> </table> </div> </div> </div> </div>', '', '', function (opts) {\n\t  var _this = this;\n\t\n\t  this.salesItems = [];\n\t  this.total = 0;\n\t  this.disc = 0;\n\t  this.disctotal = 0;\n\t  this.grandtotal = 0;\n\t  this.cash = 0;\n\t  this.kembalian = 0;\n\t  this.created = '';\n\t  this.ready = false;\n\t\n\t  this.shopname = riot.shopname;\n\t\n\t  this.on('mount', function () {\n\t    var q = riot.route.query();\n\t    if (typeof q.cid !== \"undefined\") {\n\t      console.log('cart');\n\t      riot.control.trigger(riot.EVT.cancelCart, 'print');\n\t      riot.control.trigger(riot.EVT.salesGet, q.cid);\n\t    } else if (typeof q.sid !== \"undefined\") {\n\t      console.log('sales');\n\t      riot.control.trigger(riot.EVT.salesGet, q.sid);\n\t    }\n\t  });\n\t\n\t  this.on('update', function () {\n\t    _this.shopname = riot.shopname;\n\t  });\n\t\n\t  this.on('updated', function () {\n\t    if (_this.ready) {\n\t      _this.ready = false;\n\t      window.print();\n\t    }\n\t  });\n\t\n\t  riot.control.on(riot.EVT.salesGetSuccess, function (salesitem) {\n\t    _this.salesItems = salesitem.items;\n\t    _this.total = (0, _helperJs.addCommas)(salesitem.total);\n\t    _this.disc = salesitem.discount;\n\t\n\t    var disctotal_ = salesitem.total * (salesitem.discount / 100);\n\t    _this.disctotal = (0, _helperJs.addCommas)(disctotal_);\n\t\n\t    var grandtotal_ = salesitem.total - disctotal_;\n\t    _this.grandtotal = (0, _helperJs.addCommas)(grandtotal_);\n\t    _this.cash = (0, _helperJs.addCommas)(salesitem.cash);\n\t    _this.kembalian = (0, _helperJs.addCommas)(salesitem.cash - grandtotal_);\n\t    _this.ready = true;\n\t\n\t    _this.created = (0, _helperJs.formattedTime)(salesitem.created);\n\t\n\t    _this.update();\n\t  });\n\t\n\t  this.backpage = function (e) {\n\t    window.history.go(-1);\n\t  };\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 19 */\n/*!********************************!*\\\n  !*** ./src/pages/products.tag ***!\n  \\********************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\t__webpack_require__(/*! ../components/product/addproduct.tag */ 9);\n\t\n\t__webpack_require__(/*! ../components/product/productitems.tag */ 11);\n\t\n\triot.tag2('products', '<div class=\"container products\"> <div class=\"row\"> <div class=\"twelve columns\"> <h3>Produk</h3> <h6>Tambah Produk</h6> <div class=\"row product-add\"> <addproduct></addproduct> </div> <br> <h6>Daftar Produk</h6> <div class=\"product-items\"> <productitems></productitems> </div> </div> </div> </div>', '', '', function (opts) {});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 20 */\n/*!*****************************!*\\\n  !*** ./src/pages/sales.tag ***!\n  \\*****************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\t__webpack_require__(/*! ../components/sales/salesitem.tag */ 12);\n\t\n\tvar _helperJs = __webpack_require__(/*! ../helper.js */ 2);\n\t\n\triot.tag2('sales', '<div class=\"container sales\"> <div class=\"row\"> <div class=\"twelve columns\"> <h3>Penjualan</h3> <div class=\"sales-items\"> <div class=\"sales-search row\"> <div class=\"twelve columns\"> <input type=\"text\" id=\"datepicker\" class=\"u-full-width\" placeholder=\"Filter tanggal penjualan\"> </div> </div> <div class=\"sales-item\"> <div class=\"row sales-item-grandtotal\"> <div class=\"six columns\"><strong>Grand Total {currentDateLabel}</strong></div> <div class=\"six columns u-text-right\"><span>{salesTotal}</span></div> </div> <br> <div class=\"row\"> <div class=\"six columns\"> <h6>Rincian Penjualan</h6> </div> <div class=\"six columns u-text-right\"> <a href=\"javascript:void 0\" onclick=\"{exportCsv}\">💾 &nbsp;Simpan CSV</a> </div> </div> <div class=\"row sales-item-header\" if=\"{!no_data}\"> <div class=\"seven columns sales-item-date\"> <strong>Waktu</strong> </div> <div class=\"four columns u-text-right sales-item-total\"> <strong>Total</strong> </div> <div class=\"one columns sales-item-number\"> &nbsp; </div> </div> <salesitem each=\"{salesItems}\" data=\"{this}\"></salesitem> <div if=\"{no_data}\"> <p>🛍&nbsp;&nbsp;Belum ada data penjualan.</p> </div> <div class=\"pagination u-text-center\"> <ul> <li each=\"{countItems}\" class=\"{active: done}\"> <a href=\"./#sales?page={id}&amp;date={currentDate}\">{id}</a> </li> </ul> </div> </div> </div> </div> </div> </div>', '', '', function (opts) {\n\t  var _this = this;\n\t\n\t  var alerty = __webpack_require__(/*! alerty */ 3);\n\t  var pikaday = __webpack_require__(/*! pikaday */ 4);\n\t\n\t  this.salesItems = [];\n\t  this.countItems = [];\n\t\n\t  this.no_data = false;\n\t  this.salesTotal = 0;\n\t\n\t  this.currentDate = Math.floor(Date.now() / 1000);\n\t  this.currentPage = 1;\n\t\n\t  this.currentDateLabel = '';\n\t\n\t  var q = riot.route.query();\n\t\n\t  this.on('mount', function () {\n\t    var picker = new pikaday({\n\t      field: document.getElementById('datepicker'),\n\t      format: 'DD/MMMM/YYYY',\n\t      onSelect: function onSelect(choosenDate) {\n\t        var date = new Date(choosenDate);\n\t\n\t        var day = \"0\" + date.getDate();\n\t\n\t        var month = \"0\" + (date.getMonth() + 1);\n\t\n\t        var year = date.getFullYear();\n\t\n\t        var choosenDate_ = year + \"-\" + month.substr(-2) + \"-\" + day.substr(-2);\n\t        console.log(choosenDate_);\n\t        setCurrentDate(new Date(choosenDate_).getTime() / 1000);\n\t        loadSalesData();\n\t      }\n\t    });\n\t    if (!q.page) q.page = _this.currentPage;\n\t    if (!q.date) q.date = _this.currentDate;\n\t    setCurrentPage(q.page);\n\t    setCurrentDate(q.date);\n\t    loadSalesData();\n\t  });\n\t\n\t  var loadSalesData = function loadSalesData() {\n\t    document.getElementById('preloader').style.display = \"\";\n\t    var params = {\n\t      page: getCurrentPage(),\n\t      date: getCurrentDate()\n\t    };\n\t\n\t    riot.control.trigger(riot.EVT.salesLoadItems, { page: params.page, date: params.date });\n\t    riot.control.trigger(riot.EVT.salesTotal, params.date);\n\t  };\n\t\n\t  riot.control.on(riot.EVT.salesLoadItemsSuccess, function (salesItems) {\n\t    _this.salesItems = salesItems.docs.map(function (r) {\n\t      return r;\n\t    });\n\t\n\t    var array = _.range(0, salesItems.total_rows / riot.pageSize);\n\t    _this.countItems = _.map(array, function (value, key) {\n\t      return { id: key + 1, done: q.page == key + 1 ? true : false };\n\t    });\n\t    document.getElementById('preloader').style.display = \"none\";\n\t    _this.update();\n\t  });\n\t\n\t  riot.control.on(riot.EVT.salesTotalSuccess, function (salesTotal) {\n\t    _this.salesTotal = (0, _helperJs.addCommas)(salesTotal);\n\t    _this.currentDateLabel = (0, _helperJs.formattedTime)(getCurrentDate(), true);\n\t\n\t    if (salesTotal > 0) {\n\t      _this.no_data = false;\n\t    } else {\n\t      _this.no_data = true;\n\t    }\n\t\n\t    _this.update();\n\t  });\n\t\n\t  var setCurrentDate = function setCurrentDate(currDate) {\n\t    _this.currentDate = currDate;\n\t  };\n\t\n\t  var getCurrentDate = function getCurrentDate() {\n\t    return _this.currentDate;\n\t  };\n\t\n\t  var setCurrentPage = function setCurrentPage(currPage) {\n\t    _this.currentPage = currPage;\n\t  };\n\t\n\t  var getCurrentPage = function getCurrentPage() {\n\t    return _this.currentPage;\n\t  };\n\t\n\t  this.exportCsv = function (e) {\n\t\n\t    if (_.size(_this.salesItems) <= 0) {\n\t      alerty.toasts(\"ERROR: Data penjualan kosong\", { place: 'top', bgColor: 'black', time: 2500 });\n\t      return false;\n\t    } else {\n\t      var dataHeader = \"Nomor, Tanggal, Produk, Jumlah, Harga, Sub Total\\n\";\n\t      var csvContent = \"data:text/csv;charset=utf-8,\";\n\t      csvContent += dataHeader;\n\t      var data = [],\n\t          total = 0;\n\t\n\t      _.each(_this.salesItems, function (value, prop) {\n\t        var dataString = \"\";\n\t        var _id = value._id;\n\t        var created = (0, _helperJs.formattedTime)(value.created);\n\t\n\t        _.each(value.items, function (value_, prop_) {\n\t          total += parseFloat(value_.subtotal);\n\t\n\t          dataString += _id + \", \" + created + \", \" + value_.title + \", \" + value_.qty + \", \" + value_.price + \", \" + value_.subtotal + \"\\n\";\n\t        });\n\t\n\t        csvContent += dataString;\n\t      });\n\t\n\t      var dataTotal = \", , , , , \" + total;\n\t      csvContent += dataTotal;\n\t\n\t      var encodedUri = encodeURI(csvContent);\n\t      var link = document.createElement(\"a\");\n\t      link.setAttribute(\"href\", encodedUri);\n\t      link.setAttribute(\"download\", \"sales_\" + (0, _helperJs.formattedTime)(getCurrentDate(), true) + \".csv\");\n\t      document.body.appendChild(link);\n\t\n\t      link.click();\n\t    }\n\t  };\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 21 */\n/*!*****************************!*\\\n  !*** ./src/event-helper.js ***!\n  \\*****************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _riotcontrol = __webpack_require__(/*! riotcontrol */ 28);\n\t\n\tvar _riotcontrol2 = _interopRequireDefault(_riotcontrol);\n\t\n\triot.control = _riotcontrol2['default'];\n\t\n\t// event names\n\t\n\triot.EVT = {\n\t  // Shop\n\t  shopLoadData: 'shop_load_name',\n\t  shopLoadDataSuccess: 'shop_load_name_success',\n\t  shopSaveSuccess: 'shop_save_success',\n\t  shopUpdateSuccess: 'shop_update_success',\n\t  shopSaveData: 'shop_save_data',\n\t  shopSaveName: 'shop_save_name',\n\t  shopSaveTimezone: 'shop_save_timezone',\n\t  // Products\n\t  productLoadItems: 'product_load_items',\n\t  productLoadItemsSuccess: 'product_load_items_success',\n\t  productLoadItems_: 'product_load_items_',\n\t  productLoadItemsSuccess_: 'product_load_items_success_',\n\t  productSaveItem: 'product_save_item',\n\t  productSaveItemSuccess: 'product_save_item_success',\n\t  productEditItemOn: 'product_edit_item_on',\n\t  productUpdateItemSuccess: 'product_update_item_success',\n\t  productRemoveItem: 'product_remove_item',\n\t  productRemoveItemSuccess: 'product_remove_item_success',\n\t  productSearchItem: 'product_search_product',\n\t  productSearchItemSuccess: 'product_search_product_success',\n\t  // Cart\n\t  cartLoadItems: 'cart_load_items',\n\t  cartLoadItemsSuccess: 'cart_load_items_success',\n\t  cartSaveItem: 'cart_save_items',\n\t  cartSaveItemSuccess: 'cart_save_item_success',\n\t  cartEditItemOn: 'cart_edit_item_on',\n\t  cartUpdateItemSuccess: 'cart_update_item_success',\n\t  cartRemoveItem: 'cart_remove_item',\n\t  cartRemoveItemSuccess: 'cart_remove_item_success',\n\t  cartSearchItem: 'cart_search_item',\n\t  cartSearchItemSuccess: 'cart_search_item_success',\n\t  cancelCart: 'cancel_cart',\n\t  cancelCartSuccess: 'cancel_cart_success',\n\t  cancelCartPrintSuccess: 'cancel_cart_print_success',\n\t  // Sales\n\t  salesSave: 'sales_save',\n\t  salesSaveSuccess: 'sales_save_success',\n\t  salesGet: 'sales_get',\n\t  salesGetSuccess: 'sales_get_success',\n\t  salesLoadItems: 'sales_load_items',\n\t  salesLoadItemsSuccess: 'sales_load_items_success',\n\t  salesTotal: 'sales_total',\n\t  salesTotalSuccess: 'sales_total_success',\n\t  salesSearchItem: 'sales_search',\n\t  salesSearchItemSuccess: 'sales_search_success',\n\t  // Global\n\t  clearDb: 'clear_db',\n\t  clearDbSuccess: 'clear_db_success',\n\t  isProductReady: 'is_product_ready',\n\t  isNewUser: 'is_new_user',\n\t  allowAdd: 'allow_add',\n\t  focusQty: 'focus_qty'\n\t\n\t};\n\t\n\t// var PouchDB = require('pouchdb');\n\t// PouchDB.plugin(require('pouchdb-find'));\n\t\n\tvar _db = new PouchDB('albarokah');\n\t// _db.destroy().then(function () {\n\t//   // database destroyed\n\t// }).catch(function (err) {\n\t//   // error occurred\n\t// })\n\triot.db = _db;\n\triot.AppVersion = \"2.1\";\n\triot.pageSizeProductCart = 20;\n\triot.pageSize = 50;\n\triot.offset = riot.pageSize;\n\triot.timezone = 7;\n\triot.shopname = \"البركة\";\n\triot.isNewUser = false;\n\t\n\t// var _ = require('lodash');\n\t// var moment = require('moment');\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 22 */\n/*!**********************!*\\\n  !*** ./src/index.js ***!\n  \\**********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {// import './css/index.css';\n\t\n\t'use strict';\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t__webpack_require__(/*! ./event-helper */ 21);\n\t\n\t__webpack_require__(/*! ./stores/shopstore */ 27);\n\t\n\t__webpack_require__(/*! ./stores/cartstore */ 24);\n\t\n\t__webpack_require__(/*! ./stores/productstore */ 25);\n\t\n\t__webpack_require__(/*! ./stores/salestore */ 26);\n\t\n\t__webpack_require__(/*! ./router.js */ 23);\n\t\n\tvar _pikaday = __webpack_require__(/*! pikaday */ 4);\n\t\n\tvar _pikaday2 = _interopRequireDefault(_pikaday);\n\t\n\t/* GET SHOP NAME */\n\tvar mrShop = {\n\t  map: function map(doc) {\n\t    if (doc.type == \"shop\") {\n\t      emit(doc.value, null);\n\t    }\n\t  }\n\t};\n\triot.db.query(mrShop, { include_docs: false }).then(function (result) {\n\t  if (result.total_rows > 0) {\n\t    result.rows.map(function (r) {\n\t      if (r.id === \"shop_name\") {\n\t        riot.shopname = r.key;\n\t        document.getElementById('home').innerHTML = riot.shopname;\n\t      } else if (r.id === \"shop_timezone\") {\n\t        riot.timezone = r.key;\n\t      }\n\t    });\n\t    riot.isNewUser = false;\n\t  } else {\n\t    riot.isNewUser = true;\n\t  }\n\t})['catch'](function (err) {\n\t  console.log(err);\n\t});\n\t\n\t// var Mousetrap = require('mousetrap');\n\t\n\t/* SHORTCUT */\n\tMousetrap.bindGlobal('ctrl+1', function () {\n\t  document.getElementById('home').click();\n\t  // document.querySelector('[name=\"acinput\"]').focus();\n\t});\n\tMousetrap.bindGlobal('ctrl+p', function () {\n\t  riot.route(\"products\");\n\t});\n\tMousetrap.bindGlobal('ctrl+r', function () {\n\t  riot.route(\"sales\");\n\t});\n\t\n\tMousetrap.bindGlobal('ctrl+s', function () {\n\t  document.querySelector('[name=\"acinput\"]').focus();\n\t});\n\tMousetrap.bindGlobal('ctrl+t', function () {\n\t  document.querySelector('[name=\"cash\"]').focus();\n\t  document.querySelector('[name=\"cash\"]').select();\n\t});\n\tMousetrap.bindGlobal('ctrl+m', function () {\n\t  // document.querySelector('[name=\"cash\"]').focus()\n\t  var parentElement = document.getElementById(\"myDropdown\");\n\t  // console.log(parentElement.childNodes[1].childNodes[2]);\n\t  // var uhi = parentElement.childNodes[1].childNodes[2];\n\t  // uhi.focus();\n\t  document.getElementsByClassName(\"dropbtn\")[0].focus();\n\t  document.getElementById(\"myDropdown\").classList.toggle(\"show\");\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 23 */\n/*!***********************!*\\\n  !*** ./src/router.js ***!\n  \\***********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\t__webpack_require__(/*! ./pages/home.tag */ 17);\n\t\n\t__webpack_require__(/*! ./pages/products.tag */ 19);\n\t\n\t__webpack_require__(/*! ./pages/print.tag */ 18);\n\t\n\t__webpack_require__(/*! ./pages/sales.tag */ 20);\n\t\n\t__webpack_require__(/*! ./pages/help.tag */ 16);\n\t\n\t__webpack_require__(/*! ./pages/about.tag */ 13);\n\t\n\t__webpack_require__(/*! ./pages/configurations.tag */ 14);\n\t\n\t__webpack_require__(/*! ./pages/database.tag */ 15);\n\t\n\t// we need this to easily check the current route from every component\n\triot.routeState = {\n\t  view: ''\n\t};\n\t\n\tvar Router = (function () {\n\t  function Router() {\n\t    _classCallCheck(this, Router);\n\t\n\t    this._currentView = null;\n\t    this._views = ['home', 'products', 'print', 'sales', 'configurations', 'database', 'help', 'about'];\n\t    this._defaultView = 'home';\n\t\n\t    riot.route.start(false);\n\t    riot.route(this._handleRoute.bind(this));\n\t    riot.route.exec(this._handleRoute.bind(this));\n\t  }\n\t\n\t  _createClass(Router, [{\n\t    key: '_handleRoute',\n\t    value: function _handleRoute(view) {\n\t      // load default view, if view is not in views list\n\t      if (this._views.indexOf(view) === -1) {\n\t        return riot.route(this._defaultView);\n\t      }\n\t      this._loadView(view);\n\t    }\n\t  }, {\n\t    key: '_loadView',\n\t    value: function _loadView(view) {\n\t      if (this._currentView) {\n\t        this._currentView.unmount(true);\n\t      }\n\t      // console.log(view)\n\t      document.title = \"Point of Sales // \" + view.toUpperCase();\n\t      riot.routeState.view = view;\n\t      this._currentView = riot.mount('#riot-app', view)[0];\n\t    }\n\t  }]);\n\t\n\t  return Router;\n\t})();\n\t\n\texports['default'] = new Router();\n\tmodule.exports = exports['default'];\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 24 */\n/*!*********************************!*\\\n  !*** ./src/stores/cartstore.js ***!\n  \\*********************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar CartStore = (function () {\n\t  function CartStore() {\n\t    _classCallCheck(this, CartStore);\n\t\n\t    riot.observable(this);\n\t    this.cartItems = [];\n\t\n\t    this.db = riot.db;\n\t    // this.db = new PouchDB('todos');\n\t    // this.remoteCouch = true;\n\t\n\t    this.bindEvents();\n\t  }\n\t\n\t  // add store to riot control\n\t\n\t  _createClass(CartStore, [{\n\t    key: 'bindEvents',\n\t    value: function bindEvents() {\n\t      var _this = this;\n\t\n\t      var self = this;\n\t      var cartTriggerChangeds = function cartTriggerChangeds(d) {\n\t        _this.cartItems = d;\n\t        _this.trigger(riot.EVT.cartLoadItemsSuccess, _this.cartItems);\n\t        // console.log(d);\n\t      };\n\t\n\t      var clearDB = function clearDB() {\n\t        _this.db.destroy('todos').then(function () {\n\t          self.db = new PouchDB('todos');\n\t        });\n\t        _this.trigger(riot.EVT.clearDbSuccess, []);\n\t      };\n\t\n\t      var cancelCart = function cancelCart() {\n\t        self.db.allDocs({ startkey: 'cartitem_', endkey: 'cartitem_￿' }).then(function (result) {\n\t          // Promise isn't supported by all browsers; you may want to use bluebird\n\t          return Promise.all(result.rows.map(function (row) {\n\t            return self.db.remove(row.id, row.value.rev);\n\t          }));\n\t        }).then(function () {\n\t          // this.trigger(riot.EVT.cancelCartSuccess, []); \n\t          // done!\n\t        })['catch'](function (err) {\n\t          // error!\n\t        });\n\t\n\t        // this.db.allDocs({\n\t        //     startkey: 'cartitem_',\n\t        //     endkey: 'cartitem_\\uffff',\n\t        //   },\n\t        //   function(err, doc) {\n\t        //     // console.log(doc.rows);\n\t        //     self.db.get(doc).then(function(doc) {\n\t        //       return db.remove(doc);\n\t        //     }).then(function (result) {\n\t        //       // handle result\n\t        //     }).catch(function (err) {\n\t        //       console.log(err);\n\t        //     });\n\t        // });\n\t      };\n\t\n\t      var cartLoadItems = function cartLoadItems() {\n\t        /* ALLDOCS METHOD */\n\t        // this.db.allDocs({\n\t        //     // descending: true,\n\t        //     startkey: 'cartitem_',\n\t        //     endkey: 'cartitem_\\uffff',\n\t        //     include_docs: true}, function(err, doc) {\n\t        //       console.log(doc);\n\t        //   cartTriggerChangeds(doc.rows.map(function(r){ return r.doc;}));\n\t        // });\n\t\n\t        /* QUERY METHOD */\n\t        // var myMapReduceFun2 = {\n\t        //   map: function (doc) {\n\t        //     if (doc.type==\"cartitem\") {\n\t        //       // emit([doc.name.toLowerCase(), doc.cat.toLowerCase()])\n\t        //       emit(doc.name, null);\n\t        //     }\n\t        //   }\n\t        // };\n\t        // this.db.query(myMapReduceFun2, {include_docs : true, descending: true}).then(function (result) {\n\t        //   cartTriggerChangeds(result.rows.map(function(r){ return r.doc;}));\n\t        //   // console.log(result)\n\t\n\t        // }).catch(function (err) {\n\t        //   console.log(err);\n\t        // });\n\t\n\t        /* FIND METHOD */\n\t        self.db.createIndex({\n\t          index: {\n\t            fields: ['created', 'type'],\n\t            name: 'mycartindex',\n\t            ddoc: 'mydesigndoc',\n\t            type: 'json'\n\t          }\n\t        }).then(function () {\n\t          return self.db.find({\n\t            selector: { 'created': { $gt: 0 }, 'type': 'cartitem' },\n\t            fields: ['created', 'price', 'type', 'title', 'qty', '_id'],\n\t            sort: [{ 'created': 'desc' }]\n\t          }).then(function (result) {\n\t            // console.log(result);\n\t            // return result.docs;\n\t            cartTriggerChangeds(result.docs.map(function (r) {\n\t              return r;\n\t            }));\n\t            // self.trigger(riot.EVT.searchItemSuccess, result);\n\t            // return Promise.resolve(result);\n\t          })['catch'](function (err) {\n\t            console.log(err);\n\t          });\n\t        }).then(function () {\n\t          return self.db.getIndexes().then(function (result) {\n\t            result.indexes.forEach(function (value, i) {\n\t              if (value.name == \"mycartindex\") {\n\t                self.db.deleteIndex({\n\t                  \"name\": \"mycartindex\",\n\t                  \"ddoc\": value.ddoc\n\t                });\n\t              }\n\t            });\n\t          })['catch'](function (err) {\n\t            // ouch, an error\n\t          });\n\t        });\n\t      };\n\t\n\t      var cartAddTodo = function cartAddTodo(item) {\n\t        // console.log(item);\n\t        _this.db.put(item, function callback(err, result) {\n\t          if (!err) {\n\t            // console.log('ADD')\n\t            self.trigger(riot.EVT.cartSaveItemSuccess, item);\n\t          } else {\n\t            if (err.status == 409) {\n\t              cartUpdateTodo(item, { mode: 'inc', qty: 1 });\n\t            } else {\n\t              console.log(err);\n\t            }\n\t          }\n\t        });\n\t      };\n\t\n\t      var cartUpdateTodo = function cartUpdateTodo(item, params) {\n\t        _this.db.get(item._id).then(function (origDoc) {\n\t          item._rev = origDoc._rev;\n\t\n\t          if (params.qty) {\n\t            if (params.mode == \"inc\") item.qty = parseInt(origDoc.qty) + parseInt(params.qty);else item.qty = parseInt(params.qty);\n\t          }\n\t          _.remove(item, { '_rev': item._rev });\n\t          // console.log('UPDATE')\n\t          // console.log(item)\n\t          self.trigger(riot.EVT.cartUpdateItemSuccess, item);\n\t\n\t          return self.db.put(item);\n\t        })['catch'](function (err) {\n\t          if (err.status === 409) {\n\t            console.log(err);\n\t          } else {// new doc\n\t            // return self.db.put(item);\n\t          }\n\t        });\n\t      };\n\t\n\t      var cartRemoveTodo = function cartRemoveTodo(item) {\n\t        _this.db.get(item._id).then(function (origDoc) {\n\t          item._rev = origDoc._rev;\n\t\n\t          self.db.remove(item);\n\t          return self.trigger(riot.EVT.cartRemoveItemSuccess, item);\n\t        })['catch'](function (err) {\n\t          if (err.status === 409) {\n\t            console.log(err);\n\t            // location.reload()\n\t          } else {\n\t              // new doc\n\t              return self.db.remove(item);\n\t            }\n\t        });\n\t      };\n\t\n\t      var cartSearchItem = function cartSearchItem(text) {\n\t        var s = text.text;\n\t        // console.log(s.text);\n\t        /* MAP QUERY METHOD */\n\t        // var myMapReduceFun = {\n\t        //   map: function (doc) {\n\t        //     if (doc.type==\"item\") {\n\t        //       emit(doc.title, null);\n\t        //     }\n\t        //   }\n\t        // };\n\t        // this.db.query(myMapReduceFun, {startkey: s, endkey: s+'\\uffff', limit: 10}).then(function (result) {\n\t        //   self.trigger(riot.EVT.cartSearchItemSuccess, result.rows);\n\t        //   console.log(\"Query\");\n\t        //   console.log(result.rows);\n\t        //   // console.log(s);\n\t        //   return Promise.resolve(result);\n\t        // }).catch(function (err) {\n\t        //   console.log(err);\n\t        // });\n\t\n\t        /* FIND METHOD */\n\t        /* CATATAN PENTING: \n\t        Perlu dikembangkan untuk membuat INDEX terlebih dahulu */\n\t\n\t        var regexp = new RegExp(s, 'i'); // Case Insensitive\n\t        _this.db.find({\n\t          selector: {\n\t            type: \"item\",\n\t            title: { $regex: regexp }\n\t          }\n\t        }).then(function (result) {\n\t          // console.log(result);\n\t          self.trigger(riot.EVT.cartSearchItemSuccess, result.docs);\n\t        })['catch'](function (err) {\n\t          console.log(err);\n\t        });\n\t\n\t        /* FIND METHOD */\n\t        // this.db.createIndex({\n\t        //   index: {\n\t        //       fields: ['title'],\n\t        //       limit:2,\n\t        //       name: 'myindex',\n\t        //     }\n\t        // }).then(function () {\n\t\n\t        //   return self.db.find({\n\t        //     selector: {title: {$regex: s.text}},\n\t        //     limit:5\n\t        //   }).then(function (result) {\n\t        //     // console.log(result);\n\t        //     self.trigger(riot.EVT.searchItemSuccess, result);\n\t        //     return Promise.resolve(result);\n\t        //   }).catch(function (err) {\n\t        //     console.log(err);\n\t        //   });\n\t        // }).then(function () {\n\t        //   return self.db.getIndexes().then(function (result) {\n\t        //     result.indexes.forEach(function (value, i) {\n\t        //       if(value.name == \"myindex\") {\n\t        //         self.db.deleteIndex({\n\t        //           \"name\": \"myindex\",\n\t        //           \"ddoc\": value.ddoc,\n\t        //         }) \n\t        //       }\n\t        //     });\n\t        //   }).catch(function (err) {\n\t        //     // ouch, an error\n\t        //   });\n\t        // });\n\t      };\n\t\n\t      this.on(riot.EVT.cartLoadItems, function () {\n\t        cartLoadItems();\n\t      });\n\t\n\t      this.on(riot.EVT.cartRemoveItem, function (opts) {\n\t        cartRemoveTodo(opts);\n\t      });\n\t\n\t      this.on(riot.EVT.cartSaveItem, function (opts) {\n\t\n\t        var _myId = opts.title;\n\t        _myId = _myId.replace(/\\W/g, '');\n\t\n\t        var createdOn = Math.floor(Date.now() / 1000);\n\t\n\t        var item = {\n\t          _id: 'cartitem_' + _myId,\n\t          title: opts.title,\n\t          qty: 1,\n\t          type: 'cartitem',\n\t          created: createdOn\n\t        };\n\t\n\t        _this.db.get('item_' + _myId).then(function (origDoc) {\n\t          item.price = origDoc.price;\n\t          cartAddTodo(item);\n\t        })['catch'](function (err) {\n\t          if (err.status === 409) {\n\t            console.log(err);\n\t          } else {\n\t            // new doc\n\t            console.log(err);\n\t          }\n\t        });\n\t      });\n\t\n\t      this.on(riot.EVT.clearDb, function () {\n\t        clearDB();\n\t      });\n\t\n\t      this.on(riot.EVT.cartSearchItem, function (s) {\n\t        cartSearchItem(s);\n\t      });\n\t\n\t      this.on(riot.EVT.cancelCart, function (mode) {\n\t        cancelCart();\n\t        if (mode.print) {\n\t          // Mode = Print;\n\t          // console.log(\"print\");\n\t          // this.trigger(riot.EVT.cancelCartPrintSuccess, []); \n\t        } else {\n\t            _this.trigger(riot.EVT.cancelCartSuccess, []);\n\t          }\n\t      });\n\t\n\t      this.on(riot.EVT.cartEditItemOn, function (s) {\n\t        cartUpdateTodo(s, { qty: s.qty });\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return CartStore;\n\t})();\n\t\n\tvar cartStore = new CartStore();\n\triot.control.addStore(cartStore);\n\t\n\texports['default'] = cartStore;\n\tmodule.exports = exports['default'];\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 25 */\n/*!************************************!*\\\n  !*** ./src/stores/productstore.js ***!\n  \\************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar ProductStore = (function () {\n\t  function ProductStore() {\n\t    _classCallCheck(this, ProductStore);\n\t\n\t    riot.observable(this);\n\t    this.productItems = [];\n\t\n\t    this.db = riot.db;\n\t    this.edit_id = false;\n\t    this.pageSizeCart = riot.pageSizeProductCart;\n\t    this.pageSize = riot.pageSize;\n\t    this.offset = riot.offset;\n\t    this.bindEvents();\n\t  }\n\t\n\t  // add store to riot control\n\t\n\t  _createClass(ProductStore, [{\n\t    key: 'bindEvents',\n\t    value: function bindEvents() {\n\t      var _this = this;\n\t\n\t      var self = this;\n\t      var productsTriggerChangeds = function productsTriggerChangeds(d) {\n\t        // console.log(d);\n\t        // this.productItems = d;\n\t        _this.trigger(riot.EVT.productLoadItemsSuccess, d);\n\t      };\n\t\n\t      var productLoadItems_ = function productLoadItems_() {\n\t\n\t        /* FIND METHOD */\n\t\n\t        self.db.createIndex({\n\t          index: {\n\t            fields: ['title', 'type'],\n\t            name: 'myproductcartindex',\n\t            ddoc: 'myproductcartdoc',\n\t            type: 'json'\n\t          }\n\t        }).then(function () {\n\t          return self.db.find({\n\t            selector: { 'title': { $gt: 0 }, 'type': 'item' },\n\t            fields: ['created', 'price', 'type', 'title', '_id'],\n\t            sort: [{ 'title': 'asc' }],\n\t            limit: self.pageSizeCart, skip: 0,\n\t            include_docs: true\n\t          }).then(function (result) {\n\t            // console.log(result);\n\t            // return result.docs;\n\t            // productsTriggerChangeds(result);\n\t            self.trigger(riot.EVT.productLoadItemsSuccess_, result);\n\t            // self.trigger(riot.EVT.searchItemSuccess, result);\n\t            // return Promise.resolve(result);\n\t          })['catch'](function (err) {\n\t            console.log(err);\n\t          });\n\t        }).then(function () {\n\t          return self.db.getIndexes().then(function (result) {\n\t            result.indexes.forEach(function (value, i) {\n\t              if (value.name == \"myproductcartindex\") {\n\t                self.db.deleteIndex({\n\t                  \"name\": \"myproductcartindex\",\n\t                  \"ddoc\": value.ddoc\n\t                });\n\t              }\n\t            });\n\t          })['catch'](function (err) {\n\t            // ouch, an error\n\t          });\n\t        });\n\t      };\n\t\n\t      var productLoadItems = function productLoadItems() {\n\t\n\t        /* MAP QUERY METHOD */\n\t        // var myMapReduceFun = {\n\t        //   map: function (doc) {\n\t        //     if (doc.type==\"item\") {\n\t        //       // emit([doc.name.toLowerCase(), doc.cat.toLowerCase()])\n\t        //       emit(doc.title.toLowerCase(), null);\n\t        //     }\n\t        //   }\n\t        // };\n\t        // this.db.query(myMapReduceFun, {limit: self.pageSize, skip: self.offset, include_docs : true}).then(function (result) {\n\t        //   return productsTriggerChangeds(result);\n\t        // }).catch(function (err) {\n\t        //   console.log(err);\n\t        // });\n\t\n\t        /* FIND METHOD */\n\t\n\t        self.db.createIndex({\n\t          index: {\n\t            fields: ['created', 'type'],\n\t            name: 'myproductindex',\n\t            ddoc: 'myproductdoc',\n\t            type: 'json'\n\t          }\n\t        }).then(function () {\n\t          return self.db.find({\n\t            selector: { 'created': { $gt: 0 }, 'type': 'item' },\n\t            fields: ['created', 'price', 'type', 'title', '_id'],\n\t            sort: [{ 'created': 'desc' }],\n\t            limit: self.pageSize, skip: self.offset, include_docs: true\n\t          }).then(function (result) {\n\t            // console.log(result);\n\t            // return result.docs;\n\t            productsTriggerChangeds(result);\n\t            // self.trigger(riot.EVT.searchItemSuccess, result);\n\t            // return Promise.resolve(result);\n\t          })['catch'](function (err) {\n\t            console.log(err);\n\t          });\n\t        }).then(function () {\n\t          return self.db.getIndexes().then(function (result) {\n\t            result.indexes.forEach(function (value, i) {\n\t              if (value.name == \"myproductindex\") {\n\t                self.db.deleteIndex({\n\t                  \"name\": \"myproductindex\",\n\t                  \"ddoc\": value.ddoc\n\t                });\n\t              }\n\t            });\n\t          })['catch'](function (err) {\n\t            // ouch, an error\n\t          });\n\t        });\n\t\n\t        // this.db.allDocs({\n\t        //   startkey: 'item_',\n\t        //   endkey: 'item_\\uffff',\n\t        //   include_docs: true,\n\t        // }).then(function (result) {\n\t        //   // handle result\n\t        //   productsTriggerChangeds(result.rows.map(function(r){\n\t        //     return r.doc;\n\t        //   }));\n\t        // }).catch(function (err) {\n\t        //   console.log(err);\n\t        // });\n\t      };\n\t\n\t      var productAddTodo = function productAddTodo(item) {\n\t        // console.log(item);\n\t        _this.db.put(item, (function callback(err, result) {\n\t          if (!err) {\n\t            this.trigger(riot.EVT.productSaveItemSuccess, item);\n\t          } else {\n\t            console.log(err);\n\t          }\n\t        }).bind(_this));\n\t      };\n\t\n\t      var productUpdateTodo = function productUpdateTodo(item) {\n\t        // console.log(item);\n\t        _this.db.get(self.edit_id).then(function (origDoc) {\n\t          item._rev = origDoc._rev;\n\t          return this.db.put(item);\n\t        })['catch']((function (err) {\n\t          if (err.status === 409) {\n\t            console.log(err);\n\t          } else {\n\t            // new doc\n\t            self.edit_id = false;\n\t            this.trigger(riot.EVT.productUpdateItemSuccess, item);\n\t            // console.log(item);\n\t            return this.db.put(item);\n\t          }\n\t        }).bind(_this));\n\t      };\n\t\n\t      var productRemoveTodo = function productRemoveTodo(item) {\n\t        _this.db.get(item._id).then(function (origDoc) {\n\t          item._rev = origDoc._rev;\n\t\n\t          self.db.remove(item);\n\t          return self.trigger(riot.EVT.productRemoveItemSuccess, item);\n\t        })['catch'](function (err) {\n\t          if (err.status === 409) {\n\t            console.log(err);\n\t          } else {\n\t            // new doc\n\t            return self.db.remove(item);\n\t          }\n\t        });\n\t      };\n\t\n\t      var productSearchItem = function productSearchItem(text) {\n\t        var s = text.text;\n\t        var regexp = new RegExp(s, 'i'); // Case Insensitive\n\t        // this.db.find({\n\t        //   selector: {\n\t        //       type: \"item\",\n\t        //       title: {$regex: regexp}\n\t        //     }\n\t        // }).then(function (result) {\n\t        //   console.log(result)\n\t        //   self.trigger(riot.EVT.productSearchItemSuccess, result.docs);\n\t        // }).catch(function (err) {\n\t        //   console.log(err);\n\t        // });\n\t        self.db.createIndex({\n\t          index: {\n\t            fields: ['title', 'type'],\n\t            name: 'mysearchproductindex',\n\t            ddoc: 'mysearchproductdoc',\n\t            type: 'json'\n\t          }\n\t        }).then(function () {\n\t          return self.db.find({\n\t            selector: { 'title': { $regex: regexp }, 'type': 'item' },\n\t            fields: ['title', 'type', 'created', 'price', '_id'],\n\t            // sort: [{'title': 'asc'}],\n\t            limit: self.pageSize,\n\t            // skip: self.offset,\n\t            include_docs: true\n\t          }).then(function (result) {\n\t            self.trigger(riot.EVT.productSearchItemSuccess, result.docs);\n\t          })['catch'](function (err) {\n\t            console.log(err);\n\t          });\n\t        }).then(function () {\n\t          return self.db.getIndexes().then(function (result) {\n\t            result.indexes.forEach(function (value, i) {\n\t              if (value.name == \"mysearchproductindex\") {\n\t                self.db.deleteIndex({\n\t                  \"name\": \"mysearchproductindex\",\n\t                  \"ddoc\": value.ddoc\n\t                });\n\t              }\n\t            });\n\t          })['catch'](function (err) {\n\t            // ouch, an error\n\t          });\n\t        });\n\t      };\n\t      // let myMapFunction = (doc) => {\n\t      //     emit(doc.title);\n\t      // }\n\t\n\t      // let searchItem = (text) => {\n\t      //   var s = text.text;\n\t      //   // console.log(s.text);\n\t      //   /* MAP QUERY METHOD */\n\t      //   var myMapReduceFun = {\n\t      //     map: function (doc) {\n\t      //       emit(doc.title, null);\n\t      //     }\n\t      //   };\n\t      //   this.db.query(myMapReduceFun, {startkey: s, endkey: s+'\\uffff'}).then(function (result) {\n\t      //     self.trigger(riot.EVT.searchItemSuccess, result.rows);\n\t      //     // console.log(result.rows);\n\t      //     return Promise.resolve(result);\n\t      //   }).catch(function (err) {\n\t      //     console.log(err);\n\t      //   });\n\t\n\t      //   /* FIND METHOD */\n\t      //   // this.db.createIndex({\n\t      //   //   index: {\n\t      //   //       fields: ['title'],\n\t      //   //       limit:2,\n\t      //   //       name: 'myindex',\n\t      //   //     }\n\t      //   // }).then(function () {\n\t\n\t      //   //   return self.db.find({\n\t      //   //     selector: {title: {$regex: s.text}},\n\t      //   //     limit:5\n\t      //   //   }).then(function (result) {\n\t      //   //     // console.log(result);\n\t      //   //     self.trigger(riot.EVT.searchItemSuccess, result);\n\t      //   //     return Promise.resolve(result);\n\t      //   //   }).catch(function (err) {\n\t      //   //     console.log(err);\n\t      //   //   });\n\t      //   // }).then(function () {\n\t      //   //   return self.db.getIndexes().then(function (result) {\n\t      //   //     result.indexes.forEach(function (value, i) {\n\t      //   //       if(value.name == \"myindex\") {\n\t      //   //         self.db.deleteIndex({\n\t      //   //           \"name\": \"myindex\",\n\t      //   //           \"ddoc\": value.ddoc,\n\t      //   //         }) \n\t      //   //       }\n\t      //   //     });\n\t      //   //   }).catch(function (err) {\n\t      //   //     // ouch, an error\n\t      //   //   });\n\t      //   // });\n\t      // }\n\t\n\t      this.on(riot.EVT.productLoadItems_, function () {\n\t        productLoadItems_();\n\t      });\n\t\n\t      this.on(riot.EVT.productLoadItems, function (opts) {\n\t        try {\n\t          _this.offset = (parseFloat(opts.page) - 1) * _this.pageSize;\n\t        } catch (e) {\n\t          _this.offset = riot.offset;\n\t        }\n\t        productLoadItems();\n\t      });\n\t\n\t      this.on(riot.EVT.productRemoveItem, function (opts) {\n\t        productRemoveTodo(opts);\n\t      });\n\t\n\t      this.on(riot.EVT.productSaveItem, function (opts) {\n\t        // console.log(opts);\n\t        if (opts._id) {\n\t          self.edit_id = opts._id;\n\t        }\n\t\n\t        var _myId = opts.title;\n\t        _myId = _myId.replace(/\\W/g, '');\n\t\n\t        var createdOn = Math.floor((Date.now() + riot.timezone * 60 * 60 * 1000) / 1000);\n\t\n\t        var item = {\n\t          _id: 'item_' + _myId,\n\t          title: opts.title,\n\t          price: opts.price,\n\t          stock: opts.stock,\n\t          type: 'item',\n\t          created: createdOn\n\t        };\n\t\n\t        if (self.edit_id) {\n\t          productUpdateTodo(item);\n\t        } else {\n\t          productAddTodo(item);\n\t        }\n\t      });\n\t\n\t      // this.on(riot.EVT.clearDb, () => {\n\t      //   clearDB();\n\t      // });\n\t\n\t      this.on(riot.EVT.productSearchItem, function (s) {\n\t        productSearchItem(s);\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return ProductStore;\n\t})();\n\t\n\tvar productStore = new ProductStore();\n\triot.control.addStore(productStore);\n\t\n\texports['default'] = productStore;\n\tmodule.exports = exports['default'];\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 26 */\n/*!*********************************!*\\\n  !*** ./src/stores/salestore.js ***!\n  \\*********************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _helperJs = __webpack_require__(/*! ../helper.js */ 2);\n\t\n\tvar SaleStore = (function () {\n\t  function SaleStore() {\n\t    _classCallCheck(this, SaleStore);\n\t\n\t    riot.observable(this);\n\t    this.productItems = [];\n\t\n\t    this.db = riot.db;\n\t    this.pageSize = riot.pageSize;\n\t    this.offset = riot.offset;\n\t    this.bindEvents();\n\t  }\n\t\n\t  // add store to riot control\n\t\n\t  _createClass(SaleStore, [{\n\t    key: 'bindEvents',\n\t    value: function bindEvents() {\n\t      var _this = this;\n\t\n\t      var self = this;\n\t      var salesTriggerChangeds = function salesTriggerChangeds(d) {\n\t        // console.log(d)\n\t        _this.trigger(riot.EVT.salesLoadItemsSuccess, d);\n\t      };\n\t\n\t      var salesTotalTriggerChangeds = function salesTotalTriggerChangeds(d) {\n\t\n\t        var grandTotal = _.sumBy(d.docs, function (o) {\n\t          return o.total;\n\t        });\n\t        // console.log(grandTotal)\n\t        _this.trigger(riot.EVT.salesTotalSuccess, grandTotal);\n\t      };\n\t\n\t      var salesSave = function salesSave(item) {\n\t        // console.log(item);\n\t        _this.db.put(item, (function callback(err, result) {\n\t          if (!err) {\n\t            this.trigger(riot.EVT.salesSaveSuccess, item._id);\n\t          } else {\n\t            console.log(err);\n\t          }\n\t        }).bind(_this));\n\t      };\n\t\n\t      var salesGet = function salesGet(id) {\n\t        _this.db.allDocs({\n\t          startkey: id,\n\t          endkey: id + '￿',\n\t          include_docs: true\n\t        }).then(function (result) {\n\t          // handle result\n\t          // productsTriggerChangeds(result.rows.map(function(r){\n\t          // console.log(result.rows[0].doc);\n\t          self.trigger(riot.EVT.salesGetSuccess, result.rows[0].doc);\n\t          // return r.doc;\n\t          // }));\n\t        })['catch'](function (err) {\n\t          console.log(err);\n\t        });\n\t      };\n\t\n\t      var salesLoadItems = function salesLoadItems(date) {\n\t        /* FIND METHOD */\n\t        var startdate = (0, _helperJs.toTimestamp)((0, _helperJs.fromTimestampToString)(date) + \" 00:00:00\");\n\t        var enddate = (0, _helperJs.toTimestamp)((0, _helperJs.fromTimestampToString)(date) + \" 23:59:00\");\n\t        self.db.createIndex({\n\t          index: {\n\t            fields: ['created', 'type'],\n\t            name: 'mysalesindex',\n\t            ddoc: 'mysalestdoc',\n\t            type: 'json'\n\t          }\n\t        }).then(function () {\n\t          return self.db.find({\n\t            selector: { 'created': { $gt: startdate, $lt: enddate }, 'type': 'sales' },\n\t            fields: ['created', 'discount', 'type', 'payment', '_id', 'total', 'cash', 'items'],\n\t            sort: [{ 'created': 'desc' }],\n\t            limit: self.pageSize, skip: self.offset, include_docs: true\n\t          }).then(function (result) {\n\t            // console.log(result);\n\t            // return result.docs;\n\t            salesTriggerChangeds(result);\n\t            // self.trigger(riot.EVT.searchItemSuccess, result);\n\t            // return Promise.resolve(result);\n\t          })['catch'](function (err) {\n\t            console.log(err);\n\t          });\n\t        }).then(function () {\n\t          return self.db.getIndexes().then(function (result) {\n\t            result.indexes.forEach(function (value, i) {\n\t              if (value.name == \"mysalesindex\") {\n\t                self.db.deleteIndex({\n\t                  \"name\": \"mysalesindex\",\n\t                  \"ddoc\": value.ddoc\n\t                });\n\t              }\n\t            });\n\t          })['catch'](function (err) {\n\t            // ouch, an error\n\t          });\n\t        });\n\t      };\n\t\n\t      var salesTotal = function salesTotal(date) {\n\t\n\t        /* FIND METHOD */\n\t        var startdate = (0, _helperJs.toTimestamp)((0, _helperJs.fromTimestampToString)(date) + \" 00:00:00\");\n\t        var enddate = (0, _helperJs.toTimestamp)((0, _helperJs.fromTimestampToString)(date) + \" 23:59:00\");\n\t        self.db.createIndex({\n\t          index: {\n\t            fields: ['created', 'type'],\n\t            name: 'mysalestotalindex',\n\t            ddoc: 'mysalestotaldoc',\n\t            type: 'json'\n\t          }\n\t        }).then(function () {\n\t          return self.db.find({\n\t            selector: { 'created': { $gte: startdate, $lte: enddate }, 'type': 'sales' },\n\t            fields: ['created', 'type', 'total'],\n\t            sort: [{ 'created': 'desc' }],\n\t            include_docs: true\n\t          }).then(function (result) {\n\t            // console.log(result);\n\t            // return result.docs;\n\t            salesTotalTriggerChangeds(result);\n\t            // self.trigger(riot.EVT.searchItemSuccess, result);\n\t            // return Promise.resolve(result);\n\t          })['catch'](function (err) {\n\t            console.log(err);\n\t          });\n\t        }).then(function () {\n\t          return self.db.getIndexes().then(function (result) {\n\t            result.indexes.forEach(function (value, i) {\n\t              if (value.name == \"mysalestotalindex\") {\n\t                self.db.deleteIndex({\n\t                  \"name\": \"mysalestotalindex\",\n\t                  \"ddoc\": value.ddoc\n\t                });\n\t              }\n\t            });\n\t          })['catch'](function (err) {\n\t            // ouch, an error\n\t          });\n\t        });\n\t      };\n\t\n\t      var salesSearchItem = function salesSearchItem(text) {\n\t        var s = text.text;\n\t        var regexp = new RegExp(s, 'i'); // Case Insensitive\n\t        _this.db.find({\n\t          selector: {\n\t            type: \"sales\",\n\t            title: { $regex: regexp }\n\t          }\n\t        }).then(function (result) {\n\t          console.log(result.docs);\n\t          self.trigger(riot.EVT.salesSearchItemSuccess, result.docs);\n\t        })['catch'](function (err) {\n\t          console.log(err);\n\t        });\n\t      };\n\t\n\t      this.on(riot.EVT.salesSave, function (opts) {\n\t        salesSave(opts);\n\t      });\n\t\n\t      this.on(riot.EVT.salesLoadItems, function (opts) {\n\t        if (opts.page) {\n\t          _this.offset = (parseFloat(opts.page) - 1) * _this.pageSize;\n\t        }\n\t\n\t        // var date = Math.floor(Date.now() / 1000)\n\t        // if(typeof (opts.date) > 0) date = opts.date;\n\t        salesLoadItems(opts.date);\n\t      });\n\t\n\t      this.on(riot.EVT.salesSearchItem, function (s) {\n\t        salesSearchItem(s);\n\t      });\n\t\n\t      this.on(riot.EVT.salesGet, function (id) {\n\t        salesGet(id);\n\t      });\n\t\n\t      this.on(riot.EVT.salesTotal, function (date) {\n\t        salesTotal(date);\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return SaleStore;\n\t})();\n\t\n\tvar saleStore = new SaleStore();\n\triot.control.addStore(saleStore);\n\t\n\texports['default'] = saleStore;\n\tmodule.exports = exports['default'];\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 27 */\n/*!*********************************!*\\\n  !*** ./src/stores/shopstore.js ***!\n  \\*********************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar ShopStore = (function () {\n\t  function ShopStore() {\n\t    _classCallCheck(this, ShopStore);\n\t\n\t    riot.observable(this);\n\t    this.productItems = [];\n\t\n\t    this.db = riot.db;\n\t    this.edit_id = false;\n\t    this.pageSize = riot.pageSize;\n\t    this.offset = riot.offset;\n\t    this.bindEvents();\n\t  }\n\t\n\t  // add store to riot control\n\t\n\t  _createClass(ShopStore, [{\n\t    key: \"bindEvents\",\n\t    value: function bindEvents() {\n\t      var _this = this;\n\t\n\t      var self = this;\n\t\n\t      var shopLoadData = function shopLoadData() {\n\t        /* ALLDOCS METHOD */\n\t        // this.db.allDocs({\n\t        //     // descending: true,\n\t        //     startkey: 'cartitem_',\n\t        //     endkey: 'cartitem_\\uffff',\n\t        //     include_docs: true}, function(err, doc) {\n\t        //       console.log(doc);\n\t        //   cartTriggerChangeds(doc.rows.map(function(r){ return r.doc;}));\n\t        // });\n\t\n\t        /* QUERY METHOD */\n\t        var myMapReduceFun2 = {\n\t          map: function map(doc) {\n\t            if (doc.type == \"shop\") {\n\t              // emit([doc.name.toLowerCase(), doc.cat.toLowerCase()])\n\t              emit(doc.value, null);\n\t            }\n\t          }\n\t        };\n\t        _this.db.query(myMapReduceFun2, { include_docs: false }).then(function (result) {\n\t\n\t          var uu = [];\n\t\n\t          uu = result.rows.map(function (r) {\n\t            if (r.id === \"shop_name\") return { 'name': r.key };\n\t            if (r.id === \"shop_timezone\") return { 'timezone': r.key };\n\t          });\n\t\n\t          var items = [];\n\t          for (var key in result.rows) {\n\t            var type = result.rows[key].id;\n\t            var value = result.rows[key].key;\n\t            if (type === \"shop_name\") items['name'] = value;\n\t            if (type === \"shop_timezone\") items['timezone'] = value;\n\t          }\n\t          self.trigger(riot.EVT.shopLoadDataSuccess, items);\n\t          // return (result.rows[0].key)\n\t        })[\"catch\"](function (err) {\n\t          console.log(err);\n\t        });\n\t      };\n\t\n\t      var shopSaveData = function shopSaveData(item) {\n\t\n\t        _this.db.put(item, function callback(err, result) {\n\t          if (!err) {\n\t            self.trigger(riot.EVT.shopSaveSuccess, item.value);\n\t          } else {\n\t            if (err.status == 409) {\n\t              shopUpdateData(item, { value: item.value });\n\t            } else {\n\t              console.log(err);\n\t            }\n\t          }\n\t        });\n\t      };\n\t\n\t      var shopUpdateData = function shopUpdateData(item, params) {\n\t        // console.log(item);\n\t        _this.db.get(item._id).then(function (origDoc) {\n\t          item._rev = origDoc._rev;\n\t          item.value = params.value;\n\t          self.trigger(riot.EVT.shopUpdateSuccess, item.value);\n\t          return self.db.put(item);\n\t        })[\"catch\"](function (err) {\n\t          if (err.status === 409) {\n\t            console.log(err);\n\t          } else {\n\t            // new doc\n\t            return self.db.put(item);\n\t          }\n\t        });\n\t      };\n\t\n\t      this.on(riot.EVT.shopSaveName, function (s) {\n\t        var updatedOn = Math.floor((Date.now() + riot.timezone * 60 * 60 * 1000) / 1000);\n\t        var item = {\n\t          _id: 'shop_name',\n\t          value: s,\n\t          type: 'shop',\n\t          updated: updatedOn\n\t        };\n\t        shopSaveData(item);\n\t      });\n\t\n\t      this.on(riot.EVT.shopSaveTimezone, function (s) {\n\t        var updatedOn = Math.floor((Date.now() + riot.timezone * 60 * 60 * 1000) / 1000);\n\t        var item = {\n\t          _id: 'shop_timezone',\n\t          value: s,\n\t          type: 'shop',\n\t          updated: updatedOn\n\t        };\n\t        shopSaveData(item);\n\t      });\n\t\n\t      this.on(riot.EVT.shopLoadData, function () {\n\t        shopLoadData();\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return ShopStore;\n\t})();\n\t\n\tvar shopStore = new ShopStore();\n\triot.control.addStore(shopStore);\n\t\n\texports[\"default\"] = shopStore;\n\tmodule.exports = exports[\"default\"];\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 28 */\n/*!**************************************!*\\\n  !*** ./~/riotcontrol/riotcontrol.js ***!\n  \\**************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar RiotControl = {\n\t  _stores: [],\n\t  addStore: function(store) {\n\t    this._stores.push(store);\n\t  }\n\t};\n\t\n\t['on','one','off','trigger'].forEach(function(api){\n\t  RiotControl[api] = function() {\n\t    var args = [].slice.call(arguments);\n\t    this._stores.forEach(function(el){\n\t      el[api].apply(null, args);\n\t    });\n\t  };\n\t});\n\t\n\tif (true) module.exports = RiotControl;\n\n\n/***/ },\n/* 29 */\n/*!****************************************!*\\\n  !*** (webpack)/buildin/amd-options.js ***!\n  \\****************************************/\n/***/ function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {module.exports = __webpack_amd_options__;\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, {}))\n\n/***/ },\n/* 30 */\n/*!***********************************!*\\\n  !*** (webpack)/buildin/module.js ***!\n  \\***********************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = function(module) {\r\n\t\tif(!module.webpackPolyfill) {\r\n\t\t\tmodule.deprecate = function() {};\r\n\t\t\tmodule.paths = [];\r\n\t\t\t// module.parent = undefined by default\r\n\t\t\tmodule.children = [];\r\n\t\t\tmodule.webpackPolyfill = 1;\r\n\t\t}\r\n\t\treturn module;\r\n\t}\r\n\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** bundle.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 0670878ab57bc0a6d557\n **/","/* Riot v2.6.4, @license MIT */\n\n;(function(window, undefined) {\n  'use strict';\nvar riot = { version: 'v2.6.4', settings: {} },\n  // be aware, internal usage\n  // ATTENTION: prefix the global dynamic variables with `__`\n\n  // counter to give a unique id to all the Tag instances\n  __uid = 0,\n  // tags instances cache\n  __virtualDom = [],\n  // tags implementation cache\n  __tagImpl = {},\n\n  /**\n   * Const\n   */\n  GLOBAL_MIXIN = '__global_mixin',\n\n  // riot specific prefixes\n  RIOT_PREFIX = 'riot-',\n  RIOT_TAG = RIOT_PREFIX + 'tag',\n  RIOT_TAG_IS = 'data-is',\n\n  // for typeof == '' comparisons\n  T_STRING = 'string',\n  T_OBJECT = 'object',\n  T_UNDEF  = 'undefined',\n  T_FUNCTION = 'function',\n  XLINK_NS = 'http://www.w3.org/1999/xlink',\n  XLINK_REGEX = /^xlink:(\\w+)/,\n  // special native tags that cannot be treated like the others\n  SPECIAL_TAGS_REGEX = /^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,\n  RESERVED_WORDS_BLACKLIST = /^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|parent|opts|trigger|o(?:n|ff|ne))$/,\n  // SVG tags list https://www.w3.org/TR/SVG/attindex.html#PresentationAttributes\n  SVG_TAGS_LIST = ['altGlyph', 'animate', 'animateColor', 'circle', 'clipPath', 'defs', 'ellipse', 'feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feFlood', 'feGaussianBlur', 'feImage', 'feMerge', 'feMorphology', 'feOffset', 'feSpecularLighting', 'feTile', 'feTurbulence', 'filter', 'font', 'foreignObject', 'g', 'glyph', 'glyphRef', 'image', 'line', 'linearGradient', 'marker', 'mask', 'missing-glyph', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect', 'stop', 'svg', 'switch', 'symbol', 'text', 'textPath', 'tref', 'tspan', 'use'],\n\n  // version# for IE 8-11, 0 for others\n  IE_VERSION = (window && window.document || {}).documentMode | 0,\n\n  // detect firefox to fix #1374\n  FIREFOX = window && !!window.InstallTrigger\n/* istanbul ignore next */\nriot.observable = function(el) {\n\n  /**\n   * Extend the original object or create a new empty one\n   * @type { Object }\n   */\n\n  el = el || {}\n\n  /**\n   * Private variables\n   */\n  var callbacks = {},\n    slice = Array.prototype.slice\n\n  /**\n   * Private Methods\n   */\n\n  /**\n   * Helper function needed to get and loop all the events in a string\n   * @param   { String }   e - event string\n   * @param   {Function}   fn - callback\n   */\n  function onEachEvent(e, fn) {\n    var es = e.split(' '), l = es.length, i = 0\n    for (; i < l; i++) {\n      var name = es[i]\n      if (name) fn(name, i)\n    }\n  }\n\n  /**\n   * Public Api\n   */\n\n  // extend the el object adding the observable methods\n  Object.defineProperties(el, {\n    /**\n     * Listen to the given space separated list of `events` and\n     * execute the `callback` each time an event is triggered.\n     * @param  { String } events - events ids\n     * @param  { Function } fn - callback function\n     * @returns { Object } el\n     */\n    on: {\n      value: function(events, fn) {\n        if (typeof fn != 'function')  return el\n\n        onEachEvent(events, function(name, pos) {\n          (callbacks[name] = callbacks[name] || []).push(fn)\n          fn.typed = pos > 0\n        })\n\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Removes the given space separated list of `events` listeners\n     * @param   { String } events - events ids\n     * @param   { Function } fn - callback function\n     * @returns { Object } el\n     */\n    off: {\n      value: function(events, fn) {\n        if (events == '*' && !fn) callbacks = {}\n        else {\n          onEachEvent(events, function(name, pos) {\n            if (fn) {\n              var arr = callbacks[name]\n              for (var i = 0, cb; cb = arr && arr[i]; ++i) {\n                if (cb == fn) arr.splice(i--, 1)\n              }\n            } else delete callbacks[name]\n          })\n        }\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Listen to the given space separated list of `events` and\n     * execute the `callback` at most once\n     * @param   { String } events - events ids\n     * @param   { Function } fn - callback function\n     * @returns { Object } el\n     */\n    one: {\n      value: function(events, fn) {\n        function on() {\n          el.off(events, on)\n          fn.apply(el, arguments)\n        }\n        return el.on(events, on)\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Execute all callback functions that listen to\n     * the given space separated list of `events`\n     * @param   { String } events - events ids\n     * @returns { Object } el\n     */\n    trigger: {\n      value: function(events) {\n\n        // getting the arguments\n        var arglen = arguments.length - 1,\n          args = new Array(arglen),\n          fns\n\n        for (var i = 0; i < arglen; i++) {\n          args[i] = arguments[i + 1] // skip first argument\n        }\n\n        onEachEvent(events, function(name, pos) {\n\n          fns = slice.call(callbacks[name] || [], 0)\n\n          for (var i = 0, fn; fn = fns[i]; ++i) {\n            if (fn.busy) continue\n            fn.busy = 1\n            fn.apply(el, fn.typed ? [name].concat(args) : args)\n            if (fns[i] !== fn) { i-- }\n            fn.busy = 0\n          }\n\n          if (callbacks['*'] && name != '*')\n            el.trigger.apply(el, ['*', name].concat(args))\n\n        })\n\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    }\n  })\n\n  return el\n\n}\n/* istanbul ignore next */\n;(function(riot) {\n\n/**\n * Simple client-side router\n * @module riot-route\n */\n\n\nvar RE_ORIGIN = /^.+?\\/\\/+[^\\/]+/,\n  EVENT_LISTENER = 'EventListener',\n  REMOVE_EVENT_LISTENER = 'remove' + EVENT_LISTENER,\n  ADD_EVENT_LISTENER = 'add' + EVENT_LISTENER,\n  HAS_ATTRIBUTE = 'hasAttribute',\n  REPLACE = 'replace',\n  POPSTATE = 'popstate',\n  HASHCHANGE = 'hashchange',\n  TRIGGER = 'trigger',\n  MAX_EMIT_STACK_LEVEL = 3,\n  win = typeof window != 'undefined' && window,\n  doc = typeof document != 'undefined' && document,\n  hist = win && history,\n  loc = win && (hist.location || win.location), // see html5-history-api\n  prot = Router.prototype, // to minify more\n  clickEvent = doc && doc.ontouchstart ? 'touchstart' : 'click',\n  started = false,\n  central = riot.observable(),\n  routeFound = false,\n  debouncedEmit,\n  base, current, parser, secondParser, emitStack = [], emitStackLevel = 0\n\n/**\n * Default parser. You can replace it via router.parser method.\n * @param {string} path - current path (normalized)\n * @returns {array} array\n */\nfunction DEFAULT_PARSER(path) {\n  return path.split(/[/?#]/)\n}\n\n/**\n * Default parser (second). You can replace it via router.parser method.\n * @param {string} path - current path (normalized)\n * @param {string} filter - filter string (normalized)\n * @returns {array} array\n */\nfunction DEFAULT_SECOND_PARSER(path, filter) {\n  var re = new RegExp('^' + filter[REPLACE](/\\*/g, '([^/?#]+?)')[REPLACE](/\\.\\./, '.*') + '$'),\n    args = path.match(re)\n\n  if (args) return args.slice(1)\n}\n\n/**\n * Simple/cheap debounce implementation\n * @param   {function} fn - callback\n * @param   {number} delay - delay in seconds\n * @returns {function} debounced function\n */\nfunction debounce(fn, delay) {\n  var t\n  return function () {\n    clearTimeout(t)\n    t = setTimeout(fn, delay)\n  }\n}\n\n/**\n * Set the window listeners to trigger the routes\n * @param {boolean} autoExec - see route.start\n */\nfunction start(autoExec) {\n  debouncedEmit = debounce(emit, 1)\n  win[ADD_EVENT_LISTENER](POPSTATE, debouncedEmit)\n  win[ADD_EVENT_LISTENER](HASHCHANGE, debouncedEmit)\n  doc[ADD_EVENT_LISTENER](clickEvent, click)\n  if (autoExec) emit(true)\n}\n\n/**\n * Router class\n */\nfunction Router() {\n  this.$ = []\n  riot.observable(this) // make it observable\n  central.on('stop', this.s.bind(this))\n  central.on('emit', this.e.bind(this))\n}\n\nfunction normalize(path) {\n  return path[REPLACE](/^\\/|\\/$/, '')\n}\n\nfunction isString(str) {\n  return typeof str == 'string'\n}\n\n/**\n * Get the part after domain name\n * @param {string} href - fullpath\n * @returns {string} path from root\n */\nfunction getPathFromRoot(href) {\n  return (href || loc.href)[REPLACE](RE_ORIGIN, '')\n}\n\n/**\n * Get the part after base\n * @param {string} href - fullpath\n * @returns {string} path from base\n */\nfunction getPathFromBase(href) {\n  return base[0] == '#'\n    ? (href || loc.href || '').split(base)[1] || ''\n    : (loc ? getPathFromRoot(href) : href || '')[REPLACE](base, '')\n}\n\nfunction emit(force) {\n  // the stack is needed for redirections\n  var isRoot = emitStackLevel == 0, first\n  if (MAX_EMIT_STACK_LEVEL <= emitStackLevel) return\n\n  emitStackLevel++\n  emitStack.push(function() {\n    var path = getPathFromBase()\n    if (force || path != current) {\n      central[TRIGGER]('emit', path)\n      current = path\n    }\n  })\n  if (isRoot) {\n    while (first = emitStack.shift()) first() // stack increses within this call\n    emitStackLevel = 0\n  }\n}\n\nfunction click(e) {\n  if (\n    e.which != 1 // not left click\n    || e.metaKey || e.ctrlKey || e.shiftKey // or meta keys\n    || e.defaultPrevented // or default prevented\n  ) return\n\n  var el = e.target\n  while (el && el.nodeName != 'A') el = el.parentNode\n\n  if (\n    !el || el.nodeName != 'A' // not A tag\n    || el[HAS_ATTRIBUTE]('download') // has download attr\n    || !el[HAS_ATTRIBUTE]('href') // has no href attr\n    || el.target && el.target != '_self' // another window or frame\n    || el.href.indexOf(loc.href.match(RE_ORIGIN)[0]) == -1 // cross origin\n  ) return\n\n  if (el.href != loc.href\n    && (\n      el.href.split('#')[0] == loc.href.split('#')[0] // internal jump\n      || base[0] != '#' && getPathFromRoot(el.href).indexOf(base) !== 0 // outside of base\n      || base[0] == '#' && el.href.split(base)[0] != loc.href.split(base)[0] // outside of #base\n      || !go(getPathFromBase(el.href), el.title || doc.title) // route not found\n    )) return\n\n  e.preventDefault()\n}\n\n/**\n * Go to the path\n * @param {string} path - destination path\n * @param {string} title - page title\n * @param {boolean} shouldReplace - use replaceState or pushState\n * @returns {boolean} - route not found flag\n */\nfunction go(path, title, shouldReplace) {\n  // Server-side usage: directly execute handlers for the path\n  if (!hist) return central[TRIGGER]('emit', getPathFromBase(path))\n\n  path = base + normalize(path)\n  title = title || doc.title\n  // browsers ignores the second parameter `title`\n  shouldReplace\n    ? hist.replaceState(null, title, path)\n    : hist.pushState(null, title, path)\n  // so we need to set it manually\n  doc.title = title\n  routeFound = false\n  emit()\n  return routeFound\n}\n\n/**\n * Go to path or set action\n * a single string:                go there\n * two strings:                    go there with setting a title\n * two strings and boolean:        replace history with setting a title\n * a single function:              set an action on the default route\n * a string/RegExp and a function: set an action on the route\n * @param {(string|function)} first - path / action / filter\n * @param {(string|RegExp|function)} second - title / action\n * @param {boolean} third - replace flag\n */\nprot.m = function(first, second, third) {\n  if (isString(first) && (!second || isString(second))) go(first, second, third || false)\n  else if (second) this.r(first, second)\n  else this.r('@', first)\n}\n\n/**\n * Stop routing\n */\nprot.s = function() {\n  this.off('*')\n  this.$ = []\n}\n\n/**\n * Emit\n * @param {string} path - path\n */\nprot.e = function(path) {\n  this.$.concat('@').some(function(filter) {\n    var args = (filter == '@' ? parser : secondParser)(normalize(path), normalize(filter))\n    if (typeof args != 'undefined') {\n      this[TRIGGER].apply(null, [filter].concat(args))\n      return routeFound = true // exit from loop\n    }\n  }, this)\n}\n\n/**\n * Register route\n * @param {string} filter - filter for matching to url\n * @param {function} action - action to register\n */\nprot.r = function(filter, action) {\n  if (filter != '@') {\n    filter = '/' + normalize(filter)\n    this.$.push(filter)\n  }\n  this.on(filter, action)\n}\n\nvar mainRouter = new Router()\nvar route = mainRouter.m.bind(mainRouter)\n\n/**\n * Create a sub router\n * @returns {function} the method of a new Router object\n */\nroute.create = function() {\n  var newSubRouter = new Router()\n  // assign sub-router's main method\n  var router = newSubRouter.m.bind(newSubRouter)\n  // stop only this sub-router\n  router.stop = newSubRouter.s.bind(newSubRouter)\n  return router\n}\n\n/**\n * Set the base of url\n * @param {(str|RegExp)} arg - a new base or '#' or '#!'\n */\nroute.base = function(arg) {\n  base = arg || '#'\n  current = getPathFromBase() // recalculate current path\n}\n\n/** Exec routing right now **/\nroute.exec = function() {\n  emit(true)\n}\n\n/**\n * Replace the default router to yours\n * @param {function} fn - your parser function\n * @param {function} fn2 - your secondParser function\n */\nroute.parser = function(fn, fn2) {\n  if (!fn && !fn2) {\n    // reset parser for testing...\n    parser = DEFAULT_PARSER\n    secondParser = DEFAULT_SECOND_PARSER\n  }\n  if (fn) parser = fn\n  if (fn2) secondParser = fn2\n}\n\n/**\n * Helper function to get url query as an object\n * @returns {object} parsed query\n */\nroute.query = function() {\n  var q = {}\n  var href = loc.href || current\n  href[REPLACE](/[?&](.+?)=([^&]*)/g, function(_, k, v) { q[k] = v })\n  return q\n}\n\n/** Stop routing **/\nroute.stop = function () {\n  if (started) {\n    if (win) {\n      win[REMOVE_EVENT_LISTENER](POPSTATE, debouncedEmit)\n      win[REMOVE_EVENT_LISTENER](HASHCHANGE, debouncedEmit)\n      doc[REMOVE_EVENT_LISTENER](clickEvent, click)\n    }\n    central[TRIGGER]('stop')\n    started = false\n  }\n}\n\n/**\n * Start routing\n * @param {boolean} autoExec - automatically exec after starting if true\n */\nroute.start = function (autoExec) {\n  if (!started) {\n    if (win) {\n      if (document.readyState == 'complete') start(autoExec)\n      // the timeout is needed to solve\n      // a weird safari bug https://github.com/riot/route/issues/33\n      else win[ADD_EVENT_LISTENER]('load', function() {\n        setTimeout(function() { start(autoExec) }, 1)\n      })\n    }\n    started = true\n  }\n}\n\n/** Prepare the router **/\nroute.base()\nroute.parser()\n\nriot.route = route\n})(riot)\n/* istanbul ignore next */\n\n/**\n * The riot template engine\n * @version v2.4.2\n */\n/**\n * riot.util.brackets\n *\n * - `brackets    ` - Returns a string or regex based on its parameter\n * - `brackets.set` - Change the current riot brackets\n *\n * @module\n */\n\nvar brackets = (function (UNDEF) {\n\n  var\n    REGLOB = 'g',\n\n    R_MLCOMMS = /\\/\\*[^*]*\\*+(?:[^*\\/][^*]*\\*+)*\\//g,\n\n    R_STRINGS = /\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'/g,\n\n    S_QBLOCKS = R_STRINGS.source + '|' +\n      /(?:\\breturn\\s+|(?:[$\\w\\)\\]]|\\+\\+|--)\\s*(\\/)(?![*\\/]))/.source + '|' +\n      /\\/(?=[^*\\/])[^[\\/\\\\]*(?:(?:\\[(?:\\\\.|[^\\]\\\\]*)*\\]|\\\\.)[^[\\/\\\\]*)*?(\\/)[gim]*/.source,\n\n    UNSUPPORTED = RegExp('[\\\\' + 'x00-\\\\x1F<>a-zA-Z0-9\\'\",;\\\\\\\\]'),\n\n    NEED_ESCAPE = /(?=[[\\]()*+?.^$|])/g,\n\n    FINDBRACES = {\n      '(': RegExp('([()])|'   + S_QBLOCKS, REGLOB),\n      '[': RegExp('([[\\\\]])|' + S_QBLOCKS, REGLOB),\n      '{': RegExp('([{}])|'   + S_QBLOCKS, REGLOB)\n    },\n\n    DEFAULT = '{ }'\n\n  var _pairs = [\n    '{', '}',\n    '{', '}',\n    /{[^}]*}/,\n    /\\\\([{}])/g,\n    /\\\\({)|{/g,\n    RegExp('\\\\\\\\(})|([[({])|(})|' + S_QBLOCKS, REGLOB),\n    DEFAULT,\n    /^\\s*{\\^?\\s*([$\\w]+)(?:\\s*,\\s*(\\S+))?\\s+in\\s+(\\S.*)\\s*}/,\n    /(^|[^\\\\]){=[\\S\\s]*?}/\n  ]\n\n  var\n    cachedBrackets = UNDEF,\n    _regex,\n    _cache = [],\n    _settings\n\n  function _loopback (re) { return re }\n\n  function _rewrite (re, bp) {\n    if (!bp) bp = _cache\n    return new RegExp(\n      re.source.replace(/{/g, bp[2]).replace(/}/g, bp[3]), re.global ? REGLOB : ''\n    )\n  }\n\n  function _create (pair) {\n    if (pair === DEFAULT) return _pairs\n\n    var arr = pair.split(' ')\n\n    if (arr.length !== 2 || UNSUPPORTED.test(pair)) {\n      throw new Error('Unsupported brackets \"' + pair + '\"')\n    }\n    arr = arr.concat(pair.replace(NEED_ESCAPE, '\\\\').split(' '))\n\n    arr[4] = _rewrite(arr[1].length > 1 ? /{[\\S\\s]*?}/ : _pairs[4], arr)\n    arr[5] = _rewrite(pair.length > 3 ? /\\\\({|})/g : _pairs[5], arr)\n    arr[6] = _rewrite(_pairs[6], arr)\n    arr[7] = RegExp('\\\\\\\\(' + arr[3] + ')|([[({])|(' + arr[3] + ')|' + S_QBLOCKS, REGLOB)\n    arr[8] = pair\n    return arr\n  }\n\n  function _brackets (reOrIdx) {\n    return reOrIdx instanceof RegExp ? _regex(reOrIdx) : _cache[reOrIdx]\n  }\n\n  _brackets.split = function split (str, tmpl, _bp) {\n    // istanbul ignore next: _bp is for the compiler\n    if (!_bp) _bp = _cache\n\n    var\n      parts = [],\n      match,\n      isexpr,\n      start,\n      pos,\n      re = _bp[6]\n\n    isexpr = start = re.lastIndex = 0\n\n    while ((match = re.exec(str))) {\n\n      pos = match.index\n\n      if (isexpr) {\n\n        if (match[2]) {\n          re.lastIndex = skipBraces(str, match[2], re.lastIndex)\n          continue\n        }\n        if (!match[3]) {\n          continue\n        }\n      }\n\n      if (!match[1]) {\n        unescapeStr(str.slice(start, pos))\n        start = re.lastIndex\n        re = _bp[6 + (isexpr ^= 1)]\n        re.lastIndex = start\n      }\n    }\n\n    if (str && start < str.length) {\n      unescapeStr(str.slice(start))\n    }\n\n    return parts\n\n    function unescapeStr (s) {\n      if (tmpl || isexpr) {\n        parts.push(s && s.replace(_bp[5], '$1'))\n      } else {\n        parts.push(s)\n      }\n    }\n\n    function skipBraces (s, ch, ix) {\n      var\n        match,\n        recch = FINDBRACES[ch]\n\n      recch.lastIndex = ix\n      ix = 1\n      while ((match = recch.exec(s))) {\n        if (match[1] &&\n          !(match[1] === ch ? ++ix : --ix)) break\n      }\n      return ix ? s.length : recch.lastIndex\n    }\n  }\n\n  _brackets.hasExpr = function hasExpr (str) {\n    return _cache[4].test(str)\n  }\n\n  _brackets.loopKeys = function loopKeys (expr) {\n    var m = expr.match(_cache[9])\n\n    return m\n      ? { key: m[1], pos: m[2], val: _cache[0] + m[3].trim() + _cache[1] }\n      : { val: expr.trim() }\n  }\n\n  _brackets.array = function array (pair) {\n    return pair ? _create(pair) : _cache\n  }\n\n  function _reset (pair) {\n    if ((pair || (pair = DEFAULT)) !== _cache[8]) {\n      _cache = _create(pair)\n      _regex = pair === DEFAULT ? _loopback : _rewrite\n      _cache[9] = _regex(_pairs[9])\n    }\n    cachedBrackets = pair\n  }\n\n  function _setSettings (o) {\n    var b\n\n    o = o || {}\n    b = o.brackets\n    Object.defineProperty(o, 'brackets', {\n      set: _reset,\n      get: function () { return cachedBrackets },\n      enumerable: true\n    })\n    _settings = o\n    _reset(b)\n  }\n\n  Object.defineProperty(_brackets, 'settings', {\n    set: _setSettings,\n    get: function () { return _settings }\n  })\n\n  /* istanbul ignore next: in the browser riot is always in the scope */\n  _brackets.settings = typeof riot !== 'undefined' && riot.settings || {}\n  _brackets.set = _reset\n\n  _brackets.R_STRINGS = R_STRINGS\n  _brackets.R_MLCOMMS = R_MLCOMMS\n  _brackets.S_QBLOCKS = S_QBLOCKS\n\n  return _brackets\n\n})()\n\n/**\n * @module tmpl\n *\n * tmpl          - Root function, returns the template value, render with data\n * tmpl.hasExpr  - Test the existence of a expression inside a string\n * tmpl.loopKeys - Get the keys for an 'each' loop (used by `_each`)\n */\n\nvar tmpl = (function () {\n\n  var _cache = {}\n\n  function _tmpl (str, data) {\n    if (!str) return str\n\n    return (_cache[str] || (_cache[str] = _create(str))).call(data, _logErr)\n  }\n\n  _tmpl.haveRaw = brackets.hasRaw\n\n  _tmpl.hasExpr = brackets.hasExpr\n\n  _tmpl.loopKeys = brackets.loopKeys\n\n  // istanbul ignore next\n  _tmpl.clearCache = function () { _cache = {} }\n\n  _tmpl.errorHandler = null\n\n  function _logErr (err, ctx) {\n\n    if (_tmpl.errorHandler) {\n\n      err.riotData = {\n        tagName: ctx && ctx.root && ctx.root.tagName,\n        _riot_id: ctx && ctx._riot_id  //eslint-disable-line camelcase\n      }\n      _tmpl.errorHandler(err)\n    }\n  }\n\n  function _create (str) {\n    var expr = _getTmpl(str)\n\n    if (expr.slice(0, 11) !== 'try{return ') expr = 'return ' + expr\n\n    return new Function('E', expr + ';')    // eslint-disable-line no-new-func\n  }\n\n  var\n    CH_IDEXPR = String.fromCharCode(0x2057),\n    RE_CSNAME = /^(?:(-?[_A-Za-z\\xA0-\\xFF][-\\w\\xA0-\\xFF]*)|\\u2057(\\d+)~):/,\n    RE_QBLOCK = RegExp(brackets.S_QBLOCKS, 'g'),\n    RE_DQUOTE = /\\u2057/g,\n    RE_QBMARK = /\\u2057(\\d+)~/g\n\n  function _getTmpl (str) {\n    var\n      qstr = [],\n      expr,\n      parts = brackets.split(str.replace(RE_DQUOTE, '\"'), 1)\n\n    if (parts.length > 2 || parts[0]) {\n      var i, j, list = []\n\n      for (i = j = 0; i < parts.length; ++i) {\n\n        expr = parts[i]\n\n        if (expr && (expr = i & 1\n\n            ? _parseExpr(expr, 1, qstr)\n\n            : '\"' + expr\n                .replace(/\\\\/g, '\\\\\\\\')\n                .replace(/\\r\\n?|\\n/g, '\\\\n')\n                .replace(/\"/g, '\\\\\"') +\n              '\"'\n\n          )) list[j++] = expr\n\n      }\n\n      expr = j < 2 ? list[0]\n           : '[' + list.join(',') + '].join(\"\")'\n\n    } else {\n\n      expr = _parseExpr(parts[1], 0, qstr)\n    }\n\n    if (qstr[0]) {\n      expr = expr.replace(RE_QBMARK, function (_, pos) {\n        return qstr[pos]\n          .replace(/\\r/g, '\\\\r')\n          .replace(/\\n/g, '\\\\n')\n      })\n    }\n    return expr\n  }\n\n  var\n    RE_BREND = {\n      '(': /[()]/g,\n      '[': /[[\\]]/g,\n      '{': /[{}]/g\n    }\n\n  function _parseExpr (expr, asText, qstr) {\n\n    expr = expr\n          .replace(RE_QBLOCK, function (s, div) {\n            return s.length > 2 && !div ? CH_IDEXPR + (qstr.push(s) - 1) + '~' : s\n          })\n          .replace(/\\s+/g, ' ').trim()\n          .replace(/\\ ?([[\\({},?\\.:])\\ ?/g, '$1')\n\n    if (expr) {\n      var\n        list = [],\n        cnt = 0,\n        match\n\n      while (expr &&\n            (match = expr.match(RE_CSNAME)) &&\n            !match.index\n        ) {\n        var\n          key,\n          jsb,\n          re = /,|([[{(])|$/g\n\n        expr = RegExp.rightContext\n        key  = match[2] ? qstr[match[2]].slice(1, -1).trim().replace(/\\s+/g, ' ') : match[1]\n\n        while (jsb = (match = re.exec(expr))[1]) skipBraces(jsb, re)\n\n        jsb  = expr.slice(0, match.index)\n        expr = RegExp.rightContext\n\n        list[cnt++] = _wrapExpr(jsb, 1, key)\n      }\n\n      expr = !cnt ? _wrapExpr(expr, asText)\n           : cnt > 1 ? '[' + list.join(',') + '].join(\" \").trim()' : list[0]\n    }\n    return expr\n\n    function skipBraces (ch, re) {\n      var\n        mm,\n        lv = 1,\n        ir = RE_BREND[ch]\n\n      ir.lastIndex = re.lastIndex\n      while (mm = ir.exec(expr)) {\n        if (mm[0] === ch) ++lv\n        else if (!--lv) break\n      }\n      re.lastIndex = lv ? expr.length : ir.lastIndex\n    }\n  }\n\n  // istanbul ignore next: not both\n  var // eslint-disable-next-line max-len\n    JS_CONTEXT = '\"in this?this:' + (typeof window !== 'object' ? 'global' : 'window') + ').',\n    JS_VARNAME = /[,{][\\$\\w]+(?=:)|(^ *|[^$\\w\\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\\w]))([$_A-Za-z][$\\w]*)/g,\n    JS_NOPROPS = /^(?=(\\.[$\\w]+))\\1(?:[^.[(]|$)/\n\n  function _wrapExpr (expr, asText, key) {\n    var tb\n\n    expr = expr.replace(JS_VARNAME, function (match, p, mvar, pos, s) {\n      if (mvar) {\n        pos = tb ? 0 : pos + match.length\n\n        if (mvar !== 'this' && mvar !== 'global' && mvar !== 'window') {\n          match = p + '(\"' + mvar + JS_CONTEXT + mvar\n          if (pos) tb = (s = s[pos]) === '.' || s === '(' || s === '['\n        } else if (pos) {\n          tb = !JS_NOPROPS.test(s.slice(pos))\n        }\n      }\n      return match\n    })\n\n    if (tb) {\n      expr = 'try{return ' + expr + '}catch(e){E(e,this)}'\n    }\n\n    if (key) {\n\n      expr = (tb\n          ? 'function(){' + expr + '}.call(this)' : '(' + expr + ')'\n        ) + '?\"' + key + '\":\"\"'\n\n    } else if (asText) {\n\n      expr = 'function(v){' + (tb\n          ? expr.replace('return ', 'v=') : 'v=(' + expr + ')'\n        ) + ';return v||v===0?v:\"\"}.call(this)'\n    }\n\n    return expr\n  }\n\n  _tmpl.version = brackets.version = 'v2.4.2'\n\n  return _tmpl\n\n})()\n\n/*\n  lib/browser/tag/mkdom.js\n\n  Includes hacks needed for the Internet Explorer version 9 and below\n  See: http://kangax.github.io/compat-table/es5/#ie8\n       http://codeplanet.io/dropping-ie8/\n*/\nvar mkdom = (function _mkdom() {\n  var\n    reHasYield  = /<yield\\b/i,\n    reYieldAll  = /<yield\\s*(?:\\/>|>([\\S\\s]*?)<\\/yield\\s*>|>)/ig,\n    reYieldSrc  = /<yield\\s+to=['\"]([^'\">]*)['\"]\\s*>([\\S\\s]*?)<\\/yield\\s*>/ig,\n    reYieldDest = /<yield\\s+from=['\"]?([-\\w]+)['\"]?\\s*(?:\\/>|>([\\S\\s]*?)<\\/yield\\s*>)/ig\n  var\n    rootEls = { tr: 'tbody', th: 'tr', td: 'tr', col: 'colgroup' },\n    tblTags = IE_VERSION && IE_VERSION < 10\n      ? SPECIAL_TAGS_REGEX : /^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/\n\n  /**\n   * Creates a DOM element to wrap the given content. Normally an `DIV`, but can be\n   * also a `TABLE`, `SELECT`, `TBODY`, `TR`, or `COLGROUP` element.\n   *\n   * @param   {string} templ  - The template coming from the custom tag definition\n   * @param   {string} [html] - HTML content that comes from the DOM element where you\n   *           will mount the tag, mostly the original tag in the page\n   * @returns {HTMLElement} DOM element with _templ_ merged through `YIELD` with the _html_.\n   */\n  function _mkdom(templ, html) {\n    var\n      match   = templ && templ.match(/^\\s*<([-\\w]+)/),\n      tagName = match && match[1].toLowerCase(),\n      el = mkEl('div', isSVGTag(tagName))\n\n    // replace all the yield tags with the tag inner html\n    templ = replaceYield(templ, html)\n\n    /* istanbul ignore next */\n    if (tblTags.test(tagName))\n      el = specialTags(el, templ, tagName)\n    else\n      setInnerHTML(el, templ)\n\n    el.stub = true\n\n    return el\n  }\n\n  /*\n    Creates the root element for table or select child elements:\n    tr/th/td/thead/tfoot/tbody/caption/col/colgroup/option/optgroup\n  */\n  function specialTags(el, templ, tagName) {\n    var\n      select = tagName[0] === 'o',\n      parent = select ? 'select>' : 'table>'\n\n    // trim() is important here, this ensures we don't have artifacts,\n    // so we can check if we have only one element inside the parent\n    el.innerHTML = '<' + parent + templ.trim() + '</' + parent\n    parent = el.firstChild\n\n    // returns the immediate parent if tr/th/td/col is the only element, if not\n    // returns the whole tree, as this can include additional elements\n    if (select) {\n      parent.selectedIndex = -1  // for IE9, compatible w/current riot behavior\n    } else {\n      // avoids insertion of cointainer inside container (ex: tbody inside tbody)\n      var tname = rootEls[tagName]\n      if (tname && parent.childElementCount === 1) parent = $(tname, parent)\n    }\n    return parent\n  }\n\n  /*\n    Replace the yield tag from any tag template with the innerHTML of the\n    original tag in the page\n  */\n  function replaceYield(templ, html) {\n    // do nothing if no yield\n    if (!reHasYield.test(templ)) return templ\n\n    // be careful with #1343 - string on the source having `$1`\n    var src = {}\n\n    html = html && html.replace(reYieldSrc, function (_, ref, text) {\n      src[ref] = src[ref] || text   // preserve first definition\n      return ''\n    }).trim()\n\n    return templ\n      .replace(reYieldDest, function (_, ref, def) {  // yield with from - to attrs\n        return src[ref] || def || ''\n      })\n      .replace(reYieldAll, function (_, def) {        // yield without any \"from\"\n        return html || def || ''\n      })\n  }\n\n  return _mkdom\n\n})()\n\n/**\n * Convert the item looped into an object used to extend the child tag properties\n * @param   { Object } expr - object containing the keys used to extend the children tags\n * @param   { * } key - value to assign to the new object returned\n * @param   { * } val - value containing the position of the item in the array\n * @returns { Object } - new object containing the values of the original item\n *\n * The variables 'key' and 'val' are arbitrary.\n * They depend on the collection type looped (Array, Object)\n * and on the expression used on the each tag\n *\n */\nfunction mkitem(expr, key, val) {\n  var item = {}\n  item[expr.key] = key\n  if (expr.pos) item[expr.pos] = val\n  return item\n}\n\n/**\n * Unmount the redundant tags\n * @param   { Array } items - array containing the current items to loop\n * @param   { Array } tags - array containing all the children tags\n */\nfunction unmountRedundant(items, tags) {\n\n  var i = tags.length,\n    j = items.length,\n    t\n\n  while (i > j) {\n    t = tags[--i]\n    tags.splice(i, 1)\n    t.unmount()\n  }\n}\n\n/**\n * Move the nested custom tags in non custom loop tags\n * @param   { Object } child - non custom loop tag\n * @param   { Number } i - current position of the loop tag\n */\nfunction moveNestedTags(child, i) {\n  Object.keys(child.tags).forEach(function(tagName) {\n    var tag = child.tags[tagName]\n    if (isArray(tag))\n      each(tag, function (t) {\n        moveChildTag(t, tagName, i)\n      })\n    else\n      moveChildTag(tag, tagName, i)\n  })\n}\n\n/**\n * Adds the elements for a virtual tag\n * @param { Tag } tag - the tag whose root's children will be inserted or appended\n * @param { Node } src - the node that will do the inserting or appending\n * @param { Tag } target - only if inserting, insert before this tag's first child\n */\nfunction addVirtual(tag, src, target) {\n  var el = tag._root, sib\n  tag._virts = []\n  while (el) {\n    sib = el.nextSibling\n    if (target)\n      src.insertBefore(el, target._root)\n    else\n      src.appendChild(el)\n\n    tag._virts.push(el) // hold for unmounting\n    el = sib\n  }\n}\n\n/**\n * Move virtual tag and all child nodes\n * @param { Tag } tag - first child reference used to start move\n * @param { Node } src  - the node that will do the inserting\n * @param { Tag } target - insert before this tag's first child\n * @param { Number } len - how many child nodes to move\n */\nfunction moveVirtual(tag, src, target, len) {\n  var el = tag._root, sib, i = 0\n  for (; i < len; i++) {\n    sib = el.nextSibling\n    src.insertBefore(el, target._root)\n    el = sib\n  }\n}\n\n\n/**\n * Manage tags having the 'each'\n * @param   { Object } dom - DOM node we need to loop\n * @param   { Tag } parent - parent tag instance where the dom node is contained\n * @param   { String } expr - string contained in the 'each' attribute\n */\nfunction _each(dom, parent, expr) {\n\n  // remove the each property from the original tag\n  remAttr(dom, 'each')\n\n  var mustReorder = typeof getAttr(dom, 'no-reorder') !== T_STRING || remAttr(dom, 'no-reorder'),\n    tagName = getTagName(dom),\n    impl = __tagImpl[tagName] || { tmpl: getOuterHTML(dom) },\n    useRoot = SPECIAL_TAGS_REGEX.test(tagName),\n    root = dom.parentNode,\n    ref = document.createTextNode(''),\n    child = getTag(dom),\n    isOption = tagName.toLowerCase() === 'option', // the option tags must be treated differently\n    tags = [],\n    oldItems = [],\n    hasKeys,\n    isVirtual = dom.tagName == 'VIRTUAL'\n\n  // parse the each expression\n  expr = tmpl.loopKeys(expr)\n\n  // insert a marked where the loop tags will be injected\n  root.insertBefore(ref, dom)\n\n  // clean template code\n  parent.one('before-mount', function () {\n\n    // remove the original DOM node\n    dom.parentNode.removeChild(dom)\n    if (root.stub) root = parent.root\n\n  }).on('update', function () {\n    // get the new items collection\n    var items = tmpl(expr.val, parent),\n      // create a fragment to hold the new DOM nodes to inject in the parent tag\n      frag = document.createDocumentFragment()\n\n    // object loop. any changes cause full redraw\n    if (!isArray(items)) {\n      hasKeys = items || false\n      items = hasKeys ?\n        Object.keys(items).map(function (key) {\n          return mkitem(expr, key, items[key])\n        }) : []\n    }\n\n    // loop all the new items\n    var i = 0,\n      itemsLength = items.length\n\n    for (; i < itemsLength; i++) {\n      // reorder only if the items are objects\n      var\n        item = items[i],\n        _mustReorder = mustReorder && typeof item == T_OBJECT && !hasKeys,\n        oldPos = oldItems.indexOf(item),\n        pos = ~oldPos && _mustReorder ? oldPos : i,\n        // does a tag exist in this position?\n        tag = tags[pos]\n\n      item = !hasKeys && expr.key ? mkitem(expr, item, i) : item\n\n      // new tag\n      if (\n        !_mustReorder && !tag // with no-reorder we just update the old tags\n        ||\n        _mustReorder && !~oldPos || !tag // by default we always try to reorder the DOM elements\n      ) {\n\n        tag = new Tag(impl, {\n          parent: parent,\n          isLoop: true,\n          hasImpl: !!__tagImpl[tagName],\n          root: useRoot ? root : dom.cloneNode(),\n          item: item\n        }, dom.innerHTML)\n\n        tag.mount()\n\n        if (isVirtual) tag._root = tag.root.firstChild // save reference for further moves or inserts\n        // this tag must be appended\n        if (i == tags.length || !tags[i]) { // fix 1581\n          if (isVirtual)\n            addVirtual(tag, frag)\n          else frag.appendChild(tag.root)\n        }\n        // this tag must be insert\n        else {\n          if (isVirtual)\n            addVirtual(tag, root, tags[i])\n          else root.insertBefore(tag.root, tags[i].root) // #1374 some browsers reset selected here\n          oldItems.splice(i, 0, item)\n        }\n\n        tags.splice(i, 0, tag)\n        pos = i // handled here so no move\n      } else tag.update(item, true)\n\n      // reorder the tag if it's not located in its previous position\n      if (\n        pos !== i && _mustReorder &&\n        tags[i] // fix 1581 unable to reproduce it in a test!\n      ) {\n        // update the DOM\n        if (isVirtual)\n          moveVirtual(tag, root, tags[i], dom.childNodes.length)\n        else if (tags[i].root.parentNode) root.insertBefore(tag.root, tags[i].root)\n        // update the position attribute if it exists\n        if (expr.pos)\n          tag[expr.pos] = i\n        // move the old tag instance\n        tags.splice(i, 0, tags.splice(pos, 1)[0])\n        // move the old item\n        oldItems.splice(i, 0, oldItems.splice(pos, 1)[0])\n        // if the loop tags are not custom\n        // we need to move all their custom tags into the right position\n        if (!child && tag.tags) moveNestedTags(tag, i)\n      }\n\n      // cache the original item to use it in the events bound to this node\n      // and its children\n      tag._item = item\n      // cache the real parent tag internally\n      defineProperty(tag, '_parent', parent)\n    }\n\n    // remove the redundant tags\n    unmountRedundant(items, tags)\n\n    // insert the new nodes\n    root.insertBefore(frag, ref)\n    if (isOption) {\n\n      // #1374 FireFox bug in <option selected={expression}>\n      if (FIREFOX && !root.multiple) {\n        for (var n = 0; n < root.length; n++) {\n          if (root[n].__riot1374) {\n            root.selectedIndex = n  // clear other options\n            delete root[n].__riot1374\n            break\n          }\n        }\n      }\n    }\n\n    // set the 'tags' property of the parent tag\n    // if child is 'undefined' it means that we don't need to set this property\n    // for example:\n    // we don't need store the `myTag.tags['div']` property if we are looping a div tag\n    // but we need to track the `myTag.tags['child']` property looping a custom child node named `child`\n    if (child) parent.tags[tagName] = tags\n\n    // clone the items array\n    oldItems = items.slice()\n\n  })\n\n}\n/**\n * Object that will be used to inject and manage the css of every tag instance\n */\nvar styleManager = (function(_riot) {\n\n  if (!window) return { // skip injection on the server\n    add: function () {},\n    inject: function () {}\n  }\n\n  var styleNode = (function () {\n    // create a new style element with the correct type\n    var newNode = mkEl('style')\n    setAttr(newNode, 'type', 'text/css')\n\n    // replace any user node or insert the new one into the head\n    var userNode = $('style[type=riot]')\n    if (userNode) {\n      if (userNode.id) newNode.id = userNode.id\n      userNode.parentNode.replaceChild(newNode, userNode)\n    }\n    else document.getElementsByTagName('head')[0].appendChild(newNode)\n\n    return newNode\n  })()\n\n  // Create cache and shortcut to the correct property\n  var cssTextProp = styleNode.styleSheet,\n    stylesToInject = ''\n\n  // Expose the style node in a non-modificable property\n  Object.defineProperty(_riot, 'styleNode', {\n    value: styleNode,\n    writable: true\n  })\n\n  /**\n   * Public api\n   */\n  return {\n    /**\n     * Save a tag style to be later injected into DOM\n     * @param   { String } css [description]\n     */\n    add: function(css) {\n      stylesToInject += css\n    },\n    /**\n     * Inject all previously saved tag styles into DOM\n     * innerHTML seems slow: http://jsperf.com/riot-insert-style\n     */\n    inject: function() {\n      if (stylesToInject) {\n        if (cssTextProp) cssTextProp.cssText += stylesToInject\n        else styleNode.innerHTML += stylesToInject\n        stylesToInject = ''\n      }\n    }\n  }\n\n})(riot)\n\n\nfunction parseNamedElements(root, tag, childTags, forceParsingNamed) {\n\n  walk(root, function(dom) {\n    if (dom.nodeType == 1) {\n      dom.isLoop = dom.isLoop ||\n                  (dom.parentNode && dom.parentNode.isLoop || getAttr(dom, 'each'))\n                    ? 1 : 0\n\n      // custom child tag\n      if (childTags) {\n        var child = getTag(dom)\n\n        if (child && !dom.isLoop)\n          childTags.push(initChildTag(child, {root: dom, parent: tag}, dom.innerHTML, tag))\n      }\n\n      if (!dom.isLoop || forceParsingNamed)\n        setNamed(dom, tag, [])\n    }\n\n  })\n\n}\n\nfunction parseExpressions(root, tag, expressions) {\n\n  function addExpr(dom, val, extra) {\n    if (tmpl.hasExpr(val)) {\n      expressions.push(extend({ dom: dom, expr: val }, extra))\n    }\n  }\n\n  walk(root, function(dom) {\n    var type = dom.nodeType,\n      attr\n\n    // text node\n    if (type == 3 && dom.parentNode.tagName != 'STYLE') addExpr(dom, dom.nodeValue)\n    if (type != 1) return\n\n    /* element */\n\n    // loop\n    attr = getAttr(dom, 'each')\n\n    if (attr) { _each(dom, tag, attr); return false }\n\n    // attribute expressions\n    each(dom.attributes, function(attr) {\n      var name = attr.name,\n        bool = name.split('__')[1]\n\n      addExpr(dom, attr.value, { attr: bool || name, bool: bool })\n      if (bool) { remAttr(dom, name); return false }\n\n    })\n\n    // skip custom tags\n    if (getTag(dom)) return false\n\n  })\n\n}\nfunction Tag(impl, conf, innerHTML) {\n\n  var self = riot.observable(this),\n    opts = inherit(conf.opts) || {},\n    parent = conf.parent,\n    isLoop = conf.isLoop,\n    hasImpl = conf.hasImpl,\n    item = cleanUpData(conf.item),\n    expressions = [],\n    childTags = [],\n    root = conf.root,\n    tagName = root.tagName.toLowerCase(),\n    attr = {},\n    propsInSyncWithParent = [],\n    dom\n\n  // only call unmount if we have a valid __tagImpl (has name property)\n  if (impl.name && root._tag) root._tag.unmount(true)\n\n  // not yet mounted\n  this.isMounted = false\n  root.isLoop = isLoop\n\n  // keep a reference to the tag just created\n  // so we will be able to mount this tag multiple times\n  root._tag = this\n\n  // create a unique id to this tag\n  // it could be handy to use it also to improve the virtual dom rendering speed\n  defineProperty(this, '_riot_id', ++__uid) // base 1 allows test !t._riot_id\n\n  extend(this, { parent: parent, root: root, opts: opts}, item)\n  // protect the \"tags\" property from being overridden\n  defineProperty(this, 'tags', {})\n\n  // grab attributes\n  each(root.attributes, function(el) {\n    var val = el.value\n    // remember attributes with expressions only\n    if (tmpl.hasExpr(val)) attr[el.name] = val\n  })\n\n  dom = mkdom(impl.tmpl, innerHTML)\n\n  // options\n  function updateOpts() {\n    var ctx = hasImpl && isLoop ? self : parent || self\n\n    // update opts from current DOM attributes\n    each(root.attributes, function(el) {\n      var val = el.value\n      opts[toCamel(el.name)] = tmpl.hasExpr(val) ? tmpl(val, ctx) : val\n    })\n    // recover those with expressions\n    each(Object.keys(attr), function(name) {\n      opts[toCamel(name)] = tmpl(attr[name], ctx)\n    })\n  }\n\n  function normalizeData(data) {\n    for (var key in item) {\n      if (typeof self[key] !== T_UNDEF && isWritable(self, key))\n        self[key] = data[key]\n    }\n  }\n\n  function inheritFrom(target) {\n    each(Object.keys(target), function(k) {\n      // some properties must be always in sync with the parent tag\n      var mustSync = !RESERVED_WORDS_BLACKLIST.test(k) && contains(propsInSyncWithParent, k)\n\n      if (typeof self[k] === T_UNDEF || mustSync) {\n        // track the property to keep in sync\n        // so we can keep it updated\n        if (!mustSync) propsInSyncWithParent.push(k)\n        self[k] = target[k]\n      }\n    })\n  }\n\n  /**\n   * Update the tag expressions and options\n   * @param   { * }  data - data we want to use to extend the tag properties\n   * @param   { Boolean } isInherited - is this update coming from a parent tag?\n   * @returns { self }\n   */\n  defineProperty(this, 'update', function(data, isInherited) {\n\n    // make sure the data passed will not override\n    // the component core methods\n    data = cleanUpData(data)\n    // inherit properties from the parent in loop\n    if (isLoop) {\n      inheritFrom(self.parent)\n    }\n    // normalize the tag properties in case an item object was initially passed\n    if (data && isObject(item)) {\n      normalizeData(data)\n      item = data\n    }\n    extend(self, data)\n    updateOpts()\n    self.trigger('update', data)\n    update(expressions, self)\n\n    // the updated event will be triggered\n    // once the DOM will be ready and all the re-flows are completed\n    // this is useful if you want to get the \"real\" root properties\n    // 4 ex: root.offsetWidth ...\n    if (isInherited && self.parent)\n      // closes #1599\n      self.parent.one('updated', function() { self.trigger('updated') })\n    else rAF(function() { self.trigger('updated') })\n\n    return this\n  })\n\n  defineProperty(this, 'mixin', function() {\n    each(arguments, function(mix) {\n      var instance,\n        props = [],\n        obj\n\n      mix = typeof mix === T_STRING ? riot.mixin(mix) : mix\n\n      // check if the mixin is a function\n      if (isFunction(mix)) {\n        // create the new mixin instance\n        instance = new mix()\n      } else instance = mix\n\n      var proto = Object.getPrototypeOf(instance)\n\n      // build multilevel prototype inheritance chain property list\n      do props = props.concat(Object.getOwnPropertyNames(obj || instance))\n      while (obj = Object.getPrototypeOf(obj || instance))\n\n      // loop the keys in the function prototype or the all object keys\n      each(props, function(key) {\n        // bind methods to self\n        // allow mixins to override other properties/parent mixins\n        if (key != 'init') {\n          // check for getters/setters\n          var descriptor = Object.getOwnPropertyDescriptor(instance, key) || Object.getOwnPropertyDescriptor(proto, key)\n          var hasGetterSetter = descriptor && (descriptor.get || descriptor.set)\n\n          // apply method only if it does not already exist on the instance\n          if (!self.hasOwnProperty(key) && hasGetterSetter) {\n            Object.defineProperty(self, key, descriptor)\n          } else {\n            self[key] = isFunction(instance[key]) ?\n              instance[key].bind(self) :\n              instance[key]\n          }\n        }\n      })\n\n      // init method will be called automatically\n      if (instance.init) instance.init.bind(self)()\n    })\n    return this\n  })\n\n  defineProperty(this, 'mount', function() {\n\n    updateOpts()\n\n    // add global mixins\n    var globalMixin = riot.mixin(GLOBAL_MIXIN)\n\n    if (globalMixin)\n      for (var i in globalMixin)\n        if (globalMixin.hasOwnProperty(i))\n          self.mixin(globalMixin[i])\n\n    // children in loop should inherit from true parent\n    if (self._parent && self._parent.root.isLoop) {\n      inheritFrom(self._parent)\n    }\n\n    // initialiation\n    if (impl.fn) impl.fn.call(self, opts)\n\n    // parse layout after init. fn may calculate args for nested custom tags\n    parseExpressions(dom, self, expressions)\n\n    // mount the child tags\n    toggle(true)\n\n    // update the root adding custom attributes coming from the compiler\n    // it fixes also #1087\n    if (impl.attrs)\n      walkAttributes(impl.attrs, function (k, v) { setAttr(root, k, v) })\n    if (impl.attrs || hasImpl)\n      parseExpressions(self.root, self, expressions)\n\n    if (!self.parent || isLoop) self.update(item)\n\n    // internal use only, fixes #403\n    self.trigger('before-mount')\n\n    if (isLoop && !hasImpl) {\n      // update the root attribute for the looped elements\n      root = dom.firstChild\n    } else {\n      while (dom.firstChild) root.appendChild(dom.firstChild)\n      if (root.stub) root = parent.root\n    }\n\n    defineProperty(self, 'root', root)\n\n    // parse the named dom nodes in the looped child\n    // adding them to the parent as well\n    if (isLoop)\n      parseNamedElements(self.root, self.parent, null, true)\n\n    // if it's not a child tag we can trigger its mount event\n    if (!self.parent || self.parent.isMounted) {\n      self.isMounted = true\n      self.trigger('mount')\n    }\n    // otherwise we need to wait that the parent event gets triggered\n    else self.parent.one('mount', function() {\n      // avoid to trigger the `mount` event for the tags\n      // not visible included in an if statement\n      if (!isInStub(self.root)) {\n        self.parent.isMounted = self.isMounted = true\n        self.trigger('mount')\n      }\n    })\n  })\n\n\n  defineProperty(this, 'unmount', function(keepRootTag) {\n    var el = root,\n      p = el.parentNode,\n      ptag,\n      tagIndex = __virtualDom.indexOf(self)\n\n    self.trigger('before-unmount')\n\n    // remove this tag instance from the global virtualDom variable\n    if (~tagIndex)\n      __virtualDom.splice(tagIndex, 1)\n\n    if (p) {\n\n      if (parent) {\n        ptag = getImmediateCustomParentTag(parent)\n        // remove this tag from the parent tags object\n        // if there are multiple nested tags with same name..\n        // remove this element form the array\n        if (isArray(ptag.tags[tagName]))\n          each(ptag.tags[tagName], function(tag, i) {\n            if (tag._riot_id == self._riot_id)\n              ptag.tags[tagName].splice(i, 1)\n          })\n        else\n          // otherwise just delete the tag instance\n          ptag.tags[tagName] = undefined\n      }\n\n      else\n        while (el.firstChild) el.removeChild(el.firstChild)\n\n      if (!keepRootTag)\n        p.removeChild(el)\n      else {\n        // the riot-tag and the data-is attributes aren't needed anymore, remove them\n        remAttr(p, RIOT_TAG_IS)\n        remAttr(p, RIOT_TAG) // this will be removed in riot 3.0.0\n      }\n\n    }\n\n    if (this._virts) {\n      each(this._virts, function(v) {\n        if (v.parentNode) v.parentNode.removeChild(v)\n      })\n    }\n\n    self.trigger('unmount')\n    toggle()\n    self.off('*')\n    self.isMounted = false\n    delete root._tag\n\n  })\n\n  // proxy function to bind updates\n  // dispatched from a parent tag\n  function onChildUpdate(data) { self.update(data, true) }\n\n  function toggle(isMount) {\n\n    // mount/unmount children\n    each(childTags, function(child) { child[isMount ? 'mount' : 'unmount']() })\n\n    // listen/unlisten parent (events flow one way from parent to children)\n    if (!parent) return\n    var evt = isMount ? 'on' : 'off'\n\n    // the loop tags will be always in sync with the parent automatically\n    if (isLoop)\n      parent[evt]('unmount', self.unmount)\n    else {\n      parent[evt]('update', onChildUpdate)[evt]('unmount', self.unmount)\n    }\n  }\n\n\n  // named elements available for fn\n  parseNamedElements(dom, this, childTags)\n\n}\n/**\n * Attach an event to a DOM node\n * @param { String } name - event name\n * @param { Function } handler - event callback\n * @param { Object } dom - dom node\n * @param { Tag } tag - tag instance\n */\nfunction setEventHandler(name, handler, dom, tag) {\n\n  dom[name] = function(e) {\n\n    var ptag = tag._parent,\n      item = tag._item,\n      el\n\n    if (!item)\n      while (ptag && !item) {\n        item = ptag._item\n        ptag = ptag._parent\n      }\n\n    // cross browser event fix\n    e = e || window.event\n\n    // override the event properties\n    if (isWritable(e, 'currentTarget')) e.currentTarget = dom\n    if (isWritable(e, 'target')) e.target = e.srcElement\n    if (isWritable(e, 'which')) e.which = e.charCode || e.keyCode\n\n    e.item = item\n\n    // prevent default behaviour (by default)\n    if (handler.call(tag, e) !== true && !/radio|check/.test(dom.type)) {\n      if (e.preventDefault) e.preventDefault()\n      e.returnValue = false\n    }\n\n    if (!e.preventUpdate) {\n      el = item ? getImmediateCustomParentTag(ptag) : tag\n      el.update()\n    }\n\n  }\n\n}\n\n\n/**\n * Insert a DOM node replacing another one (used by if- attribute)\n * @param   { Object } root - parent node\n * @param   { Object } node - node replaced\n * @param   { Object } before - node added\n */\nfunction insertTo(root, node, before) {\n  if (!root) return\n  root.insertBefore(before, node)\n  root.removeChild(node)\n}\n\n/**\n * Update the expressions in a Tag instance\n * @param   { Array } expressions - expression that must be re evaluated\n * @param   { Tag } tag - tag instance\n */\nfunction update(expressions, tag) {\n\n  each(expressions, function(expr, i) {\n\n    var dom = expr.dom,\n      attrName = expr.attr,\n      value = tmpl(expr.expr, tag),\n      parent = expr.parent || expr.dom.parentNode\n\n    if (expr.bool) {\n      value = !!value\n    } else if (value == null) {\n      value = ''\n    }\n\n    // #1638: regression of #1612, update the dom only if the value of the\n    // expression was changed\n    if (expr.value === value) {\n      return\n    }\n    expr.value = value\n\n    // textarea and text nodes has no attribute name\n    if (!attrName) {\n      // about #815 w/o replace: the browser converts the value to a string,\n      // the comparison by \"==\" does too, but not in the server\n      value += ''\n      // test for parent avoids error with invalid assignment to nodeValue\n      if (parent) {\n        // cache the parent node because somehow it will become null on IE\n        // on the next iteration\n        expr.parent = parent\n        if (parent.tagName === 'TEXTAREA') {\n          parent.value = value                    // #1113\n          if (!IE_VERSION) dom.nodeValue = value  // #1625 IE throws here, nodeValue\n        }                                         // will be available on 'updated'\n        else dom.nodeValue = value\n      }\n      return\n    }\n\n    // ~~#1612: look for changes in dom.value when updating the value~~\n    if (attrName === 'value') {\n      if (dom.value !== value) {\n        dom.value = value\n        setAttr(dom, attrName, value)\n      }\n      return\n    } else {\n      // remove original attribute\n      remAttr(dom, attrName)\n    }\n\n    // event handler\n    if (isFunction(value)) {\n      setEventHandler(attrName, value, dom, tag)\n\n    // if- conditional\n    } else if (attrName == 'if') {\n      var stub = expr.stub,\n        add = function() { insertTo(stub.parentNode, stub, dom) },\n        remove = function() { insertTo(dom.parentNode, dom, stub) }\n\n      // add to DOM\n      if (value) {\n        if (stub) {\n          add()\n          dom.inStub = false\n          // avoid to trigger the mount event if the tags is not visible yet\n          // maybe we can optimize this avoiding to mount the tag at all\n          if (!isInStub(dom)) {\n            walk(dom, function(el) {\n              if (el._tag && !el._tag.isMounted)\n                el._tag.isMounted = !!el._tag.trigger('mount')\n            })\n          }\n        }\n      // remove from DOM\n      } else {\n        stub = expr.stub = stub || document.createTextNode('')\n        // if the parentNode is defined we can easily replace the tag\n        if (dom.parentNode)\n          remove()\n        // otherwise we need to wait the updated event\n        else (tag.parent || tag).one('updated', remove)\n\n        dom.inStub = true\n      }\n    // show / hide\n    } else if (attrName === 'show') {\n      dom.style.display = value ? '' : 'none'\n\n    } else if (attrName === 'hide') {\n      dom.style.display = value ? 'none' : ''\n\n    } else if (expr.bool) {\n      dom[attrName] = value\n      if (value) setAttr(dom, attrName, attrName)\n      if (FIREFOX && attrName === 'selected' && dom.tagName === 'OPTION') {\n        dom.__riot1374 = value   // #1374\n      }\n\n    } else if (value === 0 || value && typeof value !== T_OBJECT) {\n      // <img src=\"{ expr }\">\n      if (startsWith(attrName, RIOT_PREFIX) && attrName != RIOT_TAG) {\n        attrName = attrName.slice(RIOT_PREFIX.length)\n      }\n      setAttr(dom, attrName, value)\n    }\n\n  })\n\n}\n/**\n * Specialized function for looping an array-like collection with `each={}`\n * @param   { Array } els - collection of items\n * @param   {Function} fn - callback function\n * @returns { Array } the array looped\n */\nfunction each(els, fn) {\n  var len = els ? els.length : 0\n\n  for (var i = 0, el; i < len; i++) {\n    el = els[i]\n    // return false -> current item was removed by fn during the loop\n    if (el != null && fn(el, i) === false) i--\n  }\n  return els\n}\n\n/**\n * Detect if the argument passed is a function\n * @param   { * } v - whatever you want to pass to this function\n * @returns { Boolean } -\n */\nfunction isFunction(v) {\n  return typeof v === T_FUNCTION || false   // avoid IE problems\n}\n\n/**\n * Get the outer html of any DOM node SVGs included\n * @param   { Object } el - DOM node to parse\n * @returns { String } el.outerHTML\n */\nfunction getOuterHTML(el) {\n  if (el.outerHTML) return el.outerHTML\n  // some browsers do not support outerHTML on the SVGs tags\n  else {\n    var container = mkEl('div')\n    container.appendChild(el.cloneNode(true))\n    return container.innerHTML\n  }\n}\n\n/**\n * Set the inner html of any DOM node SVGs included\n * @param { Object } container - DOM node where we will inject the new html\n * @param { String } html - html to inject\n */\nfunction setInnerHTML(container, html) {\n  if (typeof container.innerHTML != T_UNDEF) container.innerHTML = html\n  // some browsers do not support innerHTML on the SVGs tags\n  else {\n    var doc = new DOMParser().parseFromString(html, 'application/xml')\n    container.appendChild(\n      container.ownerDocument.importNode(doc.documentElement, true)\n    )\n  }\n}\n\n/**\n * Checks wether a DOM node must be considered part of an svg document\n * @param   { String }  name - tag name\n * @returns { Boolean } -\n */\nfunction isSVGTag(name) {\n  return ~SVG_TAGS_LIST.indexOf(name)\n}\n\n/**\n * Detect if the argument passed is an object, exclude null.\n * NOTE: Use isObject(x) && !isArray(x) to excludes arrays.\n * @param   { * } v - whatever you want to pass to this function\n * @returns { Boolean } -\n */\nfunction isObject(v) {\n  return v && typeof v === T_OBJECT         // typeof null is 'object'\n}\n\n/**\n * Remove any DOM attribute from a node\n * @param   { Object } dom - DOM node we want to update\n * @param   { String } name - name of the property we want to remove\n */\nfunction remAttr(dom, name) {\n  dom.removeAttribute(name)\n}\n\n/**\n * Convert a string containing dashes to camel case\n * @param   { String } string - input string\n * @returns { String } my-string -> myString\n */\nfunction toCamel(string) {\n  return string.replace(/-(\\w)/g, function(_, c) {\n    return c.toUpperCase()\n  })\n}\n\n/**\n * Get the value of any DOM attribute on a node\n * @param   { Object } dom - DOM node we want to parse\n * @param   { String } name - name of the attribute we want to get\n * @returns { String | undefined } name of the node attribute whether it exists\n */\nfunction getAttr(dom, name) {\n  return dom.getAttribute(name)\n}\n\n/**\n * Set any DOM/SVG attribute\n * @param { Object } dom - DOM node we want to update\n * @param { String } name - name of the property we want to set\n * @param { String } val - value of the property we want to set\n */\nfunction setAttr(dom, name, val) {\n  var xlink = XLINK_REGEX.exec(name)\n  if (xlink && xlink[1])\n    dom.setAttributeNS(XLINK_NS, xlink[1], val)\n  else\n    dom.setAttribute(name, val)\n}\n\n/**\n * Detect the tag implementation by a DOM node\n * @param   { Object } dom - DOM node we need to parse to get its tag implementation\n * @returns { Object } it returns an object containing the implementation of a custom tag (template and boot function)\n */\nfunction getTag(dom) {\n  return dom.tagName && __tagImpl[getAttr(dom, RIOT_TAG_IS) ||\n    getAttr(dom, RIOT_TAG) || dom.tagName.toLowerCase()]\n}\n/**\n * Add a child tag to its parent into the `tags` object\n * @param   { Object } tag - child tag instance\n * @param   { String } tagName - key where the new tag will be stored\n * @param   { Object } parent - tag instance where the new child tag will be included\n */\nfunction addChildTag(tag, tagName, parent) {\n  var cachedTag = parent.tags[tagName]\n\n  // if there are multiple children tags having the same name\n  if (cachedTag) {\n    // if the parent tags property is not yet an array\n    // create it adding the first cached tag\n    if (!isArray(cachedTag))\n      // don't add the same tag twice\n      if (cachedTag !== tag)\n        parent.tags[tagName] = [cachedTag]\n    // add the new nested tag to the array\n    if (!contains(parent.tags[tagName], tag))\n      parent.tags[tagName].push(tag)\n  } else {\n    parent.tags[tagName] = tag\n  }\n}\n\n/**\n * Move the position of a custom tag in its parent tag\n * @param   { Object } tag - child tag instance\n * @param   { String } tagName - key where the tag was stored\n * @param   { Number } newPos - index where the new tag will be stored\n */\nfunction moveChildTag(tag, tagName, newPos) {\n  var parent = tag.parent,\n    tags\n  // no parent no move\n  if (!parent) return\n\n  tags = parent.tags[tagName]\n\n  if (isArray(tags))\n    tags.splice(newPos, 0, tags.splice(tags.indexOf(tag), 1)[0])\n  else addChildTag(tag, tagName, parent)\n}\n\n/**\n * Create a new child tag including it correctly into its parent\n * @param   { Object } child - child tag implementation\n * @param   { Object } opts - tag options containing the DOM node where the tag will be mounted\n * @param   { String } innerHTML - inner html of the child node\n * @param   { Object } parent - instance of the parent tag including the child custom tag\n * @returns { Object } instance of the new child tag just created\n */\nfunction initChildTag(child, opts, innerHTML, parent) {\n  var tag = new Tag(child, opts, innerHTML),\n    tagName = getTagName(opts.root),\n    ptag = getImmediateCustomParentTag(parent)\n  // fix for the parent attribute in the looped elements\n  tag.parent = ptag\n  // store the real parent tag\n  // in some cases this could be different from the custom parent tag\n  // for example in nested loops\n  tag._parent = parent\n\n  // add this tag to the custom parent tag\n  addChildTag(tag, tagName, ptag)\n  // and also to the real parent tag\n  if (ptag !== parent)\n    addChildTag(tag, tagName, parent)\n  // empty the child node once we got its template\n  // to avoid that its children get compiled multiple times\n  opts.root.innerHTML = ''\n\n  return tag\n}\n\n/**\n * Loop backward all the parents tree to detect the first custom parent tag\n * @param   { Object } tag - a Tag instance\n * @returns { Object } the instance of the first custom parent tag found\n */\nfunction getImmediateCustomParentTag(tag) {\n  var ptag = tag\n  while (!getTag(ptag.root)) {\n    if (!ptag.parent) break\n    ptag = ptag.parent\n  }\n  return ptag\n}\n\n/**\n * Helper function to set an immutable property\n * @param   { Object } el - object where the new property will be set\n * @param   { String } key - object key where the new property will be stored\n * @param   { * } value - value of the new property\n* @param   { Object } options - set the propery overriding the default options\n * @returns { Object } - the initial object\n */\nfunction defineProperty(el, key, value, options) {\n  Object.defineProperty(el, key, extend({\n    value: value,\n    enumerable: false,\n    writable: false,\n    configurable: true\n  }, options))\n  return el\n}\n\n/**\n * Get the tag name of any DOM node\n * @param   { Object } dom - DOM node we want to parse\n * @returns { String } name to identify this dom node in riot\n */\nfunction getTagName(dom) {\n  var child = getTag(dom),\n    namedTag = getAttr(dom, 'name'),\n    tagName = namedTag && !tmpl.hasExpr(namedTag) ?\n                namedTag :\n              child ? child.name : dom.tagName.toLowerCase()\n\n  return tagName\n}\n\n/**\n * Extend any object with other properties\n * @param   { Object } src - source object\n * @returns { Object } the resulting extended object\n *\n * var obj = { foo: 'baz' }\n * extend(obj, {bar: 'bar', foo: 'bar'})\n * console.log(obj) => {bar: 'bar', foo: 'bar'}\n *\n */\nfunction extend(src) {\n  var obj, args = arguments\n  for (var i = 1; i < args.length; ++i) {\n    if (obj = args[i]) {\n      for (var key in obj) {\n        // check if this property of the source object could be overridden\n        if (isWritable(src, key))\n          src[key] = obj[key]\n      }\n    }\n  }\n  return src\n}\n\n/**\n * Check whether an array contains an item\n * @param   { Array } arr - target array\n * @param   { * } item - item to test\n * @returns { Boolean } Does 'arr' contain 'item'?\n */\nfunction contains(arr, item) {\n  return ~arr.indexOf(item)\n}\n\n/**\n * Check whether an object is a kind of array\n * @param   { * } a - anything\n * @returns {Boolean} is 'a' an array?\n */\nfunction isArray(a) { return Array.isArray(a) || a instanceof Array }\n\n/**\n * Detect whether a property of an object could be overridden\n * @param   { Object }  obj - source object\n * @param   { String }  key - object property\n * @returns { Boolean } is this property writable?\n */\nfunction isWritable(obj, key) {\n  var props = Object.getOwnPropertyDescriptor(obj, key)\n  return typeof obj[key] === T_UNDEF || props && props.writable\n}\n\n\n/**\n * With this function we avoid that the internal Tag methods get overridden\n * @param   { Object } data - options we want to use to extend the tag instance\n * @returns { Object } clean object without containing the riot internal reserved words\n */\nfunction cleanUpData(data) {\n  if (!(data instanceof Tag) && !(data && typeof data.trigger == T_FUNCTION))\n    return data\n\n  var o = {}\n  for (var key in data) {\n    if (!RESERVED_WORDS_BLACKLIST.test(key)) o[key] = data[key]\n  }\n  return o\n}\n\n/**\n * Walk down recursively all the children tags starting dom node\n * @param   { Object }   dom - starting node where we will start the recursion\n * @param   { Function } fn - callback to transform the child node just found\n */\nfunction walk(dom, fn) {\n  if (dom) {\n    // stop the recursion\n    if (fn(dom) === false) return\n    else {\n      dom = dom.firstChild\n\n      while (dom) {\n        walk(dom, fn)\n        dom = dom.nextSibling\n      }\n    }\n  }\n}\n\n/**\n * Minimize risk: only zero or one _space_ between attr & value\n * @param   { String }   html - html string we want to parse\n * @param   { Function } fn - callback function to apply on any attribute found\n */\nfunction walkAttributes(html, fn) {\n  var m,\n    re = /([-\\w]+) ?= ?(?:\"([^\"]*)|'([^']*)|({[^}]*}))/g\n\n  while (m = re.exec(html)) {\n    fn(m[1].toLowerCase(), m[2] || m[3] || m[4])\n  }\n}\n\n/**\n * Check whether a DOM node is in stub mode, useful for the riot 'if' directive\n * @param   { Object }  dom - DOM node we want to parse\n * @returns { Boolean } -\n */\nfunction isInStub(dom) {\n  while (dom) {\n    if (dom.inStub) return true\n    dom = dom.parentNode\n  }\n  return false\n}\n\n/**\n * Create a generic DOM node\n * @param   { String } name - name of the DOM node we want to create\n * @param   { Boolean } isSvg - should we use a SVG as parent node?\n * @returns { Object } DOM node just created\n */\nfunction mkEl(name, isSvg) {\n  return isSvg ?\n    document.createElementNS('http://www.w3.org/2000/svg', 'svg') :\n    document.createElement(name)\n}\n\n/**\n * Shorter and fast way to select multiple nodes in the DOM\n * @param   { String } selector - DOM selector\n * @param   { Object } ctx - DOM node where the targets of our search will is located\n * @returns { Object } dom nodes found\n */\nfunction $$(selector, ctx) {\n  return (ctx || document).querySelectorAll(selector)\n}\n\n/**\n * Shorter and fast way to select a single node in the DOM\n * @param   { String } selector - unique dom selector\n * @param   { Object } ctx - DOM node where the target of our search will is located\n * @returns { Object } dom node found\n */\nfunction $(selector, ctx) {\n  return (ctx || document).querySelector(selector)\n}\n\n/**\n * Simple object prototypal inheritance\n * @param   { Object } parent - parent object\n * @returns { Object } child instance\n */\nfunction inherit(parent) {\n  return Object.create(parent || null)\n}\n\n/**\n * Get the name property needed to identify a DOM node in riot\n * @param   { Object } dom - DOM node we need to parse\n * @returns { String | undefined } give us back a string to identify this dom node\n */\nfunction getNamedKey(dom) {\n  return getAttr(dom, 'id') || getAttr(dom, 'name')\n}\n\n/**\n * Set the named properties of a tag element\n * @param { Object } dom - DOM node we need to parse\n * @param { Object } parent - tag instance where the named dom element will be eventually added\n * @param { Array } keys - list of all the tag instance properties\n */\nfunction setNamed(dom, parent, keys) {\n  // get the key value we want to add to the tag instance\n  var key = getNamedKey(dom),\n    isArr,\n    // add the node detected to a tag instance using the named property\n    add = function(value) {\n      // avoid to override the tag properties already set\n      if (contains(keys, key)) return\n      // check whether this value is an array\n      isArr = isArray(value)\n      // if the key was never set\n      if (!value)\n        // set it once on the tag instance\n        parent[key] = dom\n      // if it was an array and not yet set\n      else if (!isArr || isArr && !contains(value, dom)) {\n        // add the dom node into the array\n        if (isArr)\n          value.push(dom)\n        else\n          parent[key] = [value, dom]\n      }\n    }\n\n  // skip the elements with no named properties\n  if (!key) return\n\n  // check whether this key has been already evaluated\n  if (tmpl.hasExpr(key))\n    // wait the first updated event only once\n    parent.one('mount', function() {\n      key = getNamedKey(dom)\n      add(parent[key])\n    })\n  else\n    add(parent[key])\n\n}\n\n/**\n * Faster String startsWith alternative\n * @param   { String } src - source string\n * @param   { String } str - test string\n * @returns { Boolean } -\n */\nfunction startsWith(src, str) {\n  return src.slice(0, str.length) === str\n}\n\n/**\n * requestAnimationFrame function\n * Adapted from https://gist.github.com/paulirish/1579671, license MIT\n */\nvar rAF = (function (w) {\n  var raf = w.requestAnimationFrame    ||\n            w.mozRequestAnimationFrame || w.webkitRequestAnimationFrame\n\n  if (!raf || /iP(ad|hone|od).*OS 6/.test(w.navigator.userAgent)) {  // buggy iOS6\n    var lastTime = 0\n\n    raf = function (cb) {\n      var nowtime = Date.now(), timeout = Math.max(16 - (nowtime - lastTime), 0)\n      setTimeout(function () { cb(lastTime = nowtime + timeout) }, timeout)\n    }\n  }\n  return raf\n\n})(window || {})\n\n/**\n * Mount a tag creating new Tag instance\n * @param   { Object } root - dom node where the tag will be mounted\n * @param   { String } tagName - name of the riot tag we want to mount\n * @param   { Object } opts - options to pass to the Tag instance\n * @returns { Tag } a new Tag instance\n */\nfunction mountTo(root, tagName, opts) {\n  var tag = __tagImpl[tagName],\n    // cache the inner HTML to fix #855\n    innerHTML = root._innerHTML = root._innerHTML || root.innerHTML\n\n  // clear the inner html\n  root.innerHTML = ''\n\n  if (tag && root) tag = new Tag(tag, { root: root, opts: opts }, innerHTML)\n\n  if (tag && tag.mount) {\n    tag.mount()\n    // add this tag to the virtualDom variable\n    if (!contains(__virtualDom, tag)) __virtualDom.push(tag)\n  }\n\n  return tag\n}\n/**\n * Riot public api\n */\n\n// share methods for other riot parts, e.g. compiler\nriot.util = { brackets: brackets, tmpl: tmpl }\n\n/**\n * Create a mixin that could be globally shared across all the tags\n */\nriot.mixin = (function() {\n  var mixins = {},\n    globals = mixins[GLOBAL_MIXIN] = {},\n    _id = 0\n\n  /**\n   * Create/Return a mixin by its name\n   * @param   { String }  name - mixin name (global mixin if object)\n   * @param   { Object }  mixin - mixin logic\n   * @param   { Boolean } g - is global?\n   * @returns { Object }  the mixin logic\n   */\n  return function(name, mixin, g) {\n    // Unnamed global\n    if (isObject(name)) {\n      riot.mixin('__unnamed_'+_id++, name, true)\n      return\n    }\n\n    var store = g ? globals : mixins\n\n    // Getter\n    if (!mixin) {\n      if (typeof store[name] === T_UNDEF) {\n        throw new Error('Unregistered mixin: ' + name)\n      }\n      return store[name]\n    }\n    // Setter\n    if (isFunction(mixin)) {\n      extend(mixin.prototype, store[name] || {})\n      store[name] = mixin\n    }\n    else {\n      store[name] = extend(store[name] || {}, mixin)\n    }\n  }\n\n})()\n\n/**\n * Create a new riot tag implementation\n * @param   { String }   name - name/id of the new riot tag\n * @param   { String }   html - tag template\n * @param   { String }   css - custom tag css\n * @param   { String }   attrs - root tag attributes\n * @param   { Function } fn - user function\n * @returns { String } name/id of the tag just created\n */\nriot.tag = function(name, html, css, attrs, fn) {\n  if (isFunction(attrs)) {\n    fn = attrs\n    if (/^[\\w\\-]+\\s?=/.test(css)) {\n      attrs = css\n      css = ''\n    } else attrs = ''\n  }\n  if (css) {\n    if (isFunction(css)) fn = css\n    else styleManager.add(css)\n  }\n  name = name.toLowerCase()\n  __tagImpl[name] = { name: name, tmpl: html, attrs: attrs, fn: fn }\n  return name\n}\n\n/**\n * Create a new riot tag implementation (for use by the compiler)\n * @param   { String }   name - name/id of the new riot tag\n * @param   { String }   html - tag template\n * @param   { String }   css - custom tag css\n * @param   { String }   attrs - root tag attributes\n * @param   { Function } fn - user function\n * @returns { String } name/id of the tag just created\n */\nriot.tag2 = function(name, html, css, attrs, fn) {\n  if (css) styleManager.add(css)\n  //if (bpair) riot.settings.brackets = bpair\n  __tagImpl[name] = { name: name, tmpl: html, attrs: attrs, fn: fn }\n  return name\n}\n\n/**\n * Mount a tag using a specific tag implementation\n * @param   { String } selector - tag DOM selector\n * @param   { String } tagName - tag implementation name\n * @param   { Object } opts - tag logic\n * @returns { Array } new tags instances\n */\nriot.mount = function(selector, tagName, opts) {\n\n  var els,\n    allTags,\n    tags = []\n\n  // helper functions\n\n  function addRiotTags(arr) {\n    var list = ''\n    each(arr, function (e) {\n      if (!/[^-\\w]/.test(e)) {\n        e = e.trim().toLowerCase()\n        list += ',[' + RIOT_TAG_IS + '=\"' + e + '\"],[' + RIOT_TAG + '=\"' + e + '\"]'\n      }\n    })\n    return list\n  }\n\n  function selectAllTags() {\n    var keys = Object.keys(__tagImpl)\n    return keys + addRiotTags(keys)\n  }\n\n  function pushTags(root) {\n    if (root.tagName) {\n      var riotTag = getAttr(root, RIOT_TAG_IS) || getAttr(root, RIOT_TAG)\n\n      // have tagName? force riot-tag to be the same\n      if (tagName && riotTag !== tagName) {\n        riotTag = tagName\n        setAttr(root, RIOT_TAG_IS, tagName)\n        setAttr(root, RIOT_TAG, tagName) // this will be removed in riot 3.0.0\n      }\n      var tag = mountTo(root, riotTag || root.tagName.toLowerCase(), opts)\n\n      if (tag) tags.push(tag)\n    } else if (root.length) {\n      each(root, pushTags)   // assume nodeList\n    }\n  }\n\n  // ----- mount code -----\n\n  // inject styles into DOM\n  styleManager.inject()\n\n  if (isObject(tagName)) {\n    opts = tagName\n    tagName = 0\n  }\n\n  // crawl the DOM to find the tag\n  if (typeof selector === T_STRING) {\n    if (selector === '*')\n      // select all the tags registered\n      // and also the tags found with the riot-tag attribute set\n      selector = allTags = selectAllTags()\n    else\n      // or just the ones named like the selector\n      selector += addRiotTags(selector.split(/, */))\n\n    // make sure to pass always a selector\n    // to the querySelectorAll function\n    els = selector ? $$(selector) : []\n  }\n  else\n    // probably you have passed already a tag or a NodeList\n    els = selector\n\n  // select all the registered and mount them inside their root elements\n  if (tagName === '*') {\n    // get all custom tags\n    tagName = allTags || selectAllTags()\n    // if the root els it's just a single tag\n    if (els.tagName)\n      els = $$(tagName, els)\n    else {\n      // select all the children for all the different root elements\n      var nodeList = []\n      each(els, function (_el) {\n        nodeList.push($$(tagName, _el))\n      })\n      els = nodeList\n    }\n    // get rid of the tagName\n    tagName = 0\n  }\n\n  pushTags(els)\n\n  return tags\n}\n\n/**\n * Update all the tags instances created\n * @returns { Array } all the tags instances\n */\nriot.update = function() {\n  return each(__virtualDom, function(tag) {\n    tag.update()\n  })\n}\n\n/**\n * Export the Virtual DOM\n */\nriot.vdom = __virtualDom\n\n/**\n * Export the Tag constructor\n */\nriot.Tag = Tag\n  // support CommonJS, AMD & browser\n  /* istanbul ignore next */\n  if (typeof exports === T_OBJECT)\n    module.exports = riot\n  else if (typeof define === T_FUNCTION && typeof define.amd !== T_UNDEF)\n    define(function() { return riot })\n  else\n    window.riot = riot\n\n})(typeof window != 'undefined' ? window : void 0);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/riot/riot.js\n ** module id = 1\n ** module chunks = 0\n **/","exports.addCommas = function(nStr) {\n    nStr += '';\n    var x = nStr.split('.');\n    var x1 = x[0];\n    var x2 = x.length > 1 ? '.' + x[1] : '';\n    var rgx = /(\\d+)(\\d{3})/;\n    while (rgx.test(x1)) {\n        x1 = x1.replace(rgx, '$1' + '.' + '$2');\n    }\n    return x1 + x2;\n}\n\nexports.avoidDup = function(nObj) {\n    var noDup =  \n        _.map(\n            _.uniq(\n                _.map(nObj, function(obj){\n                    return JSON.stringify(obj);\n                })\n            ), function(obj) {\n              return JSON.parse(obj);\n            }\n        )\n    return noDup;\n}\n\nexports.formattedTime = function(timestamp, dateOnly=false, timezone=7) {\n\t\n\tvar date = new Date((timestamp - (timezone*60*60))*1000);\n    // Day date part from the timestamp\n    var day = \"0\" + date.getDate();\n    // Month part from the timestamp\n    var month = \"0\" + (date.getMonth() + 1);\n    // Year part from the timestamp\n    var year = date.getFullYear();\n    // Hours part from the timestamp\n    var hours = date.getHours();\n    // Minutes part from the timestamp\n    var minutes = \"0\" + date.getMinutes();\n    // Seconds part from the timestamp\n    var seconds = \"0\" + date.getSeconds();\n\n    // Will display time in 10:30:23 format\n    if(dateOnly)\n    \treturn day.substr(-2) + \"/\" + month.substr(-2) + \"/\" + year;\n   \telse \n   \t\treturn day.substr(-2) + \"/\" + month.substr(-2) + \"/\" + year + \" \" + hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);\n\n}\n\nexports.fromTimestampToString = function(ts, separator=\"/\") {\n\t\n\tvar date = new Date(ts*1000);\n\t// console.log(date);\n    // Day date part from the timestamp\n    var day = \"0\" + (date.getDate());\n    // Month part from the timestamp\n    var month = \"0\" + (date.getMonth()+1);\n    // Year part from the timestamp\n    var year = date.getFullYear();\n\n    // Will display time in 10:30:23 format\n    // return year + separator + month.substr(-2) + separator + day.substr(-2)\n    return month.substr(-2) + separator + day.substr(-2) + separator + year\n}\n\nexports.toTimestamp = function(s) {\n\t// return Date.parse(s+\"-0500\")/1000;\n    return Date.parse(s+\"-0500\")/1000;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/helper.js\n **/","(function () {\r\n  'use strict';\r\n\r\n  // common function which is often using\r\n  var commonUse = {\r\n    /**\r\n     * [Add class to element]\r\n     *\r\n     * @param el {Object}   -- element.\r\n     * @param cls {String}  -- classes.\r\n     */\r\n    addClass: function(el, cls) {\r\n      var elClass = el.className;\r\n      var blank = (elClass !== '') ? ' ' : '';\r\n      var added = elClass + blank + cls;\r\n      el.className = added;\r\n    },\r\n\r\n    /**\r\n     * [Remove class from element]\r\n     *\r\n     * @param el {Object}   -- element.\r\n     * @param cls {String}  -- classes.\r\n     */\r\n    removeClass: function(el, cls) {\r\n      var elClass = ' '+el.className+' ';\r\n      elClass = elClass.replace(/(\\s+)/gi, ' ');\r\n      var removed = elClass.replace(' '+cls+' ', ' ');\r\n      removed = removed.replace(/(^\\s+)|(\\s+$)/g, '');\r\n      el.className = removed;\r\n    },\r\n\r\n    /**\r\n     * [if element has some class]\r\n     *\r\n     * @param el {Object}   -- element.\r\n     * @param cls {String}  -- classes.\r\n     *\r\n     * @return  {Boolean}   -- true or false.\r\n     */\r\n    hasClass: function(el, cls) {\r\n      var elClass = el.className;\r\n      var elClassList = elClass.split(/\\s+/);\r\n      var x = 0;\r\n      for(x in elClassList) {\r\n        if(elClassList[x] == cls) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n\r\n    /**\r\n     * [add event to some element, dom0, dom1, supports fuck ie]\r\n     *\r\n     * @param el {Object}       -- element.\r\n     * @param type {String}     -- event type, such as 'click', 'mouseover'.\r\n     * @param func {Function}   -- function.\r\n     *\r\n     */\r\n    addEvent: function(el, type, func) {\r\n      if(el.addEventListener) {\r\n        el.addEventListener(type, func, false);\r\n      } else if(el.attachEvent){ \r\n        el.attachEvent('on' + type, func);\r\n      } else{ \r\n        el['on' + type] = func; \r\n      }  \r\n    },\r\n\r\n    /**\r\n     * [remove event to some element, dom0, dom1, supports fuck ie]\r\n     *\r\n     * @param el {Object}       -- element.\r\n     * @param type {String}     -- event type, such as 'click', 'mouseover'.\r\n     * @param func {Function}   -- function.\r\n     *\r\n     */\r\n    removeEvent: function(el, type, func) {\r\n      if (el.removeEventListener){ \r\n        el.removeEventListener(type, func, false);\r\n      } else if (el.detachEvent){\r\n        el.detachEvent('on' + type, func);\r\n      } else {\r\n        delete el['on' + type];\r\n      }\r\n    },\r\n\r\n    /**\r\n     * [Remove element node]\r\n     *\r\n     * @param el {Object}   -- element.\r\n     *\r\n     */\r\n    removeElement: function(el) {\r\n      (el && el.parentNode) && el.parentNode.removeChild(el);\r\n    },\r\n\r\n    /**\r\n     * [Set unique id]\r\n     *\r\n     * @param prefix {String}   -- id prefix name.\r\n     *\r\n     * @return  {String}\r\n     */\r\n    setUid: function(prefix) {\r\n      do prefix += Math.floor(Math.random() * 1000000);\r\n      while (document.getElementById(prefix));\r\n      return prefix;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * [Alertiy public API]\r\n   *\r\n   * @return {Object}\r\n   */\r\n  var Alerty = function() {\r\n\r\n    // private object for Alerty object inherit\r\n    var Dialog = {\r\n      \r\n      // static defaults params\r\n      defaults: {\r\n        okLabel: '\\u786e\\u5b9a',\r\n        cancelLabel: '\\u53d6\\u6d88',\r\n        time: 2000\r\n      },\r\n\r\n      previousCallback: null,  // for cache previous toasts callbak, to handle if call more than 1 alerty\r\n\r\n      // html templates\r\n      template: '<div class=\"alerty-overlay\" tabindex=\"-1\"></div>'+\r\n                '<div class=\"alerty\">'+\r\n                  '<div class=\"alerty-title\"></div>'+\r\n                  '<div class=\"alerty-content\">'+\r\n                    '<p class=\"alerty-message\"></p>'+\r\n                    '<div class=\"alerty-prompt\">'+\r\n                      '<input type=\"text\" placeholder=\"\" value=\"\">'+\r\n                      '<div class=\"input-line\"></div>'+\r\n                    '</div>'+\r\n                  '</div>'+\r\n                  '<div class=\"alerty-action\">'+\r\n                    '<a class=\"btn-cancel\"></a>'+\r\n                    '<a class=\"btn-ok\"></a>'+\r\n                  '</div>'+\r\n                '</div>',\r\n\r\n\r\n\r\n      /** \r\n       * [Build the HTML contents]\r\n       *\r\n       * @param type {String}           -- get the dialog type to arrange the correspondent html content.\r\n       * @param content {String}        -- the text contents dialog to users.\r\n       * @param opts {Object}           -- options.\r\n       * @param onOk {Function}         -- custom callback function after click ok button.\r\n       * @param onCancel {Function}     -- custom callback function after click cancel button.\r\n       */\r\n      setup: function(type, content, opts, onOk, onCancel) {\r\n        // for if argument opts is not given.\r\n        var detect = typeof opts === 'function';\r\n        if (detect) {\r\n          onCancel = onOk;\r\n          onOk = opts;\r\n        }\r\n\r\n        var $oldModal = document.querySelector('.alerty');\r\n\r\n\r\n        // if previous modal is open, remove it and immediately callback\r\n        if ($oldModal) {\r\n          commonUse.removeElement($oldModal);\r\n          var _callback = this.previousCallback;\r\n          if (_callback) _callback();\r\n        }\r\n\r\n        var $wrapper = document.createElement('div');\r\n        $wrapper.innerHTML = this.template;\r\n\r\n        // append alerty to body\r\n        while ($wrapper.firstChild) {\r\n          document.body.appendChild($wrapper.firstChild);\r\n        }\r\n\r\n        // cache alerty dom for next use\r\n        var $modal = document.querySelector('.alerty');\r\n        var $overlay = document.querySelector('.alerty-overlay');\r\n        var $title = $modal.querySelector('.alerty-title');\r\n        var $message = $modal.querySelector('.alerty-message');\r\n        var $btnArea = $modal.querySelector('.alerty-action');\r\n        var $btnOk = $modal.querySelector('.btn-ok');\r\n        var $btnCancel = $modal.querySelector('.btn-cancel');\r\n        var $prompt = $modal.querySelector('.alerty-prompt');\r\n        var $input = $prompt.querySelector('input');\r\n\r\n        // set uid\r\n        $modal.id = commonUse.setUid('alerty');\r\n        $overlay.id = 'overlay-'+$modal.id;\r\n\r\n        // animation show alerty\r\n        commonUse.addClass($overlay, 'active');\r\n        commonUse.addClass($modal, 'alerty-show');\r\n        $message.innerHTML = content;  // set msg\r\n\r\n        if (opts && opts.time) this.defaults.time = opts.time; // handle time if set\r\n\r\n        if (type !== 'prompt') {\r\n          commonUse.removeElement($prompt); // other type do not need\r\n        } else {\r\n          $input.focus(); // auto focus input if type prompt\r\n\r\n          if(opts && opts.inputType) $input.setAttribute('type', opts.inputType); // handle input type, such as 'password'\r\n          if(opts && opts.inputPlaceholder) $input.setAttribute('placeholder', opts.inputPlaceholder); // handle input placeholder\r\n          if(opts && opts.inputValue) $input.setAttribute('value', opts.inputValue); // handle input default value \r\n        }\r\n\r\n        if (type === 'toasts') {\r\n          this.previousCallback = onOk;  // cache callback\r\n\r\n          // rearrange template\r\n          commonUse.removeElement($title);\r\n          commonUse.removeElement($btnArea);\r\n          commonUse.removeElement($overlay);\r\n          commonUse.addClass($modal, 'toasts');\r\n\r\n          if (opts && opts.place === 'top') commonUse.addClass($modal, 'place-top'); // handle toasts top place\r\n          if (opts && opts.bgColor) $modal.style.backgroundColor = opts.bgColor;\r\n          if (opts && opts.fontColor) $message.style.color =opts.fontColor;\r\n\r\n        } else {\r\n          commonUse.addClass(document.body, 'no-scrolling'); // body no scorll\r\n          (opts && opts.title) ? $title.innerHTML = opts.title : commonUse.removeElement($title); // handle title if set\r\n          (opts && opts.okLabel) ? $btnOk.innerHTML = opts.okLabel : $btnOk.innerHTML = this.defaults.okLabel; // handle ok text if set\r\n          $modal.style.marginTop =  - $modal.offsetHeight / 2 + 'px'; // set the place to center using margin-top;\r\n\r\n          if (type === 'confirm' || type === 'prompt') {\r\n            (opts && opts.cancelLabel) ? $btnCancel.innerHTML = opts.cancelLabel : $btnCancel.innerHTML = this.defaults.cancelLabel; // handle cancel text if set\r\n          } else {\r\n            commonUse.removeElement($btnCancel); // toasts and alery type do not need cancel btn\r\n          }\r\n        }\r\n\r\n        this.bindEvent($modal, onOk, onCancel); // see next\r\n      },\r\n\r\n      /** \r\n       * [Bind event to dialog]\r\n       *\r\n       * @param $modal {Object}       -- modal node.\r\n       * @param: onOk {Function}      -- ok callback.\r\n       * @param: onCancel {Function}  -- cancel callback.\r\n       */\r\n      bindEvent: function($modal, onOk, onCancel) {\r\n        var that = this;\r\n        var $btnOk = $modal.querySelector('.btn-ok');\r\n        var $btnCancel = $modal.querySelector('.btn-cancel');\r\n\r\n        // toasts delay hide\r\n        if (commonUse.hasClass($modal, 'toasts')) {\r\n          setTimeout(function() {\r\n            // if toasts has been removed\r\n            if (document.getElementById($modal.id) === null) return;\r\n            that.close($modal, onOk);\r\n          }, that.defaults.time);\r\n        }\r\n        // click ok button\r\n        if ($btnOk) {\r\n          commonUse.addEvent($btnOk, 'click', function() {\r\n            that.close($modal, onOk);\r\n          });\r\n        }\r\n        // click cancel button\r\n        if ($btnCancel) {\r\n          commonUse.addEvent($btnCancel, 'click', function() {\r\n            that.close($modal, onCancel);\r\n          });\r\n        }\r\n      },\r\n\r\n      /** \r\n       * [Close the actived modal and remove it]\r\n       *\r\n       * @param: $modal {Obejct}  -- modal element to remove.\r\n       * @param: callback {Function}  -- callback function.\r\n       */\r\n      close: function($modal, callback) {\r\n        var $input = $modal.querySelector('input');\r\n        var $overlay = document.getElementById('overlay-'+$modal.id);\r\n\r\n        // hide alerty with animation\r\n        commonUse.removeClass($modal, 'alerty-show');\r\n        commonUse.addClass($modal, 'alerty-hide');\r\n\r\n        // remove alerty and other added elements\r\n        setTimeout(function(){\r\n          $overlay && commonUse.removeClass($overlay, 'active'), commonUse.removeClass(document.body, 'no-scrolling');\r\n          \r\n          commonUse.removeElement($modal);\r\n          commonUse.removeElement($overlay);\r\n          if (callback) {\r\n            setTimeout(function(){\r\n              !$input ? callback() : callback($input.value);  // handle prompt type, callback the input value\r\n            }, 100);\r\n          }\r\n        },100);\r\n      }\r\n    };\r\n\r\n    return {\r\n      // return alerty.toasts();\r\n      toasts: function(content, opts, callback) {\r\n        Dialog.setup('toasts', content, opts, callback);\r\n      },\r\n\r\n      // return alerty.alert();\r\n      alert: function(content, opts, onOk) {\r\n        Dialog.setup('alert', content, opts, onOk);\r\n      },\r\n\r\n      // return alerty.confirm();\r\n      confirm: function(content, opts, onOk, onCancel) {\r\n        Dialog.setup('confirm', content, opts, onOk, onCancel);\r\n      },\r\n\r\n      // return alerty.prompt();\r\n      prompt: function(content, opts, callback) {\r\n        Dialog.setup('prompt', content, opts, callback);\r\n      }\r\n    };\r\n  };\r\n\r\n\r\n\r\n  // NPM, AMD, and wndow support\r\n  if ('undefined' !== typeof module && !! module && !! module.exports) {\r\n    module.exports = function() {\r\n      return new Alerty();\r\n    };\r\n    var obj = new Alerty();\r\n    for (var key in obj) {\r\n      module.exports[key] = obj[key];\r\n    }\r\n  } else if (typeof define === 'function' && define.amd) {\r\n    define(function() {\r\n      return new Alerty();\r\n    });\r\n  } else {\r\n    window.alerty = new Alerty();\r\n  }\r\n}());\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/alerty/dist/js/alerty.js\n ** module id = 3\n ** module chunks = 0\n **/","/*!\n * Pikaday\n *\n * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday\n */\n\n(function (root, factory)\n{\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else if ( typeof exports === 'object' ) {\n        // Node/CommonJS\n        module.exports = factory();\n    } else {\n        // Browser globals\n        root.Pikaday = factory();\n    }\n\n}(this, function (moment)\n{\n    'use strict';\n\n    /**\n     * feature detection and helper functions\n     */\n    var hasMoment = typeof moment === 'function',\n\n    hasEventListeners = !!window.addEventListener,\n\n    document = window.document,\n\n    sto = window.setTimeout,\n\n    addEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.addEventListener(e, callback, !!capture);\n        } else {\n            el.attachEvent('on' + e, callback);\n        }\n    },\n\n    removeEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.removeEventListener(e, callback, !!capture);\n        } else {\n            el.detachEvent('on' + e, callback);\n        }\n    },\n\n    fireEvent = function(el, eventName, data)\n    {\n        var ev;\n\n        if (document.createEvent) {\n            ev = document.createEvent('HTMLEvents');\n            ev.initEvent(eventName, true, false);\n            ev = extend(ev, data);\n            el.dispatchEvent(ev);\n        } else if (document.createEventObject) {\n            ev = document.createEventObject();\n            ev = extend(ev, data);\n            el.fireEvent('on' + eventName, ev);\n        }\n    },\n\n    trim = function(str)\n    {\n        return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g,'');\n    },\n\n    hasClass = function(el, cn)\n    {\n        return (' ' + el.className + ' ').indexOf(' ' + cn + ' ') !== -1;\n    },\n\n    addClass = function(el, cn)\n    {\n        if (!hasClass(el, cn)) {\n            el.className = (el.className === '') ? cn : el.className + ' ' + cn;\n        }\n    },\n\n    removeClass = function(el, cn)\n    {\n        el.className = trim((' ' + el.className + ' ').replace(' ' + cn + ' ', ' '));\n    },\n\n    isArray = function(obj)\n    {\n        return (/Array/).test(Object.prototype.toString.call(obj));\n    },\n\n    isDate = function(obj)\n    {\n        return (/Date/).test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime());\n    },\n\n    isWeekend = function(date)\n    {\n        var day = date.getDay();\n        return day === 0 || day === 6;\n    },\n\n    isLeapYear = function(year)\n    {\n        // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951\n        return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n    },\n\n    getDaysInMonth = function(year, month)\n    {\n        return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n    },\n\n    setToStartOfDay = function(date)\n    {\n        if (isDate(date)) date.setHours(0,0,0,0);\n    },\n\n    compareDates = function(a,b)\n    {\n        // weak date comparison (use setToStartOfDay(date) to ensure correct result)\n        return a.getTime() === b.getTime();\n    },\n\n    extend = function(to, from, overwrite)\n    {\n        var prop, hasProp;\n        for (prop in from) {\n            hasProp = to[prop] !== undefined;\n            if (hasProp && typeof from[prop] === 'object' && from[prop] !== null && from[prop].nodeName === undefined) {\n                if (isDate(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = new Date(from[prop].getTime());\n                    }\n                }\n                else if (isArray(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = from[prop].slice(0);\n                    }\n                } else {\n                    to[prop] = extend({}, from[prop], overwrite);\n                }\n            } else if (overwrite || !hasProp) {\n                to[prop] = from[prop];\n            }\n        }\n        return to;\n    },\n\n    adjustCalendar = function(calendar) {\n        if (calendar.month < 0) {\n            calendar.year -= Math.ceil(Math.abs(calendar.month)/12);\n            calendar.month += 12;\n        }\n        if (calendar.month > 11) {\n            calendar.year += Math.floor(Math.abs(calendar.month)/12);\n            calendar.month -= 12;\n        }\n        return calendar;\n    },\n\n    /**\n     * defaults and localisation\n     */\n    defaults = {\n\n        // bind the picker to a form field\n        field: null,\n\n        // automatically show/hide the picker on `field` focus (default `true` if `field` is set)\n        bound: undefined,\n\n        // position of the datepicker, relative to the field (default to bottom & left)\n        // ('bottom' & 'left' keywords are not used, 'top' & 'right' are modifier on the bottom/left position)\n        position: 'bottom left',\n\n        // automatically fit in the viewport even if it means repositioning from the position option\n        reposition: true,\n\n        // the default output format for `.toString()` and `field` value\n        format: 'YYYY-MM-DD',\n\n        // the initial date to view when first opened\n        defaultDate: null,\n\n        // make the `defaultDate` the initial selected value\n        setDefaultDate: false,\n\n        // first day of week (0: Sunday, 1: Monday etc)\n        firstDay: 0,\n\n        // the minimum/earliest date that can be selected\n        minDate: null,\n        // the maximum/latest date that can be selected\n        maxDate: null,\n\n        // number of years either side, or array of upper/lower range\n        yearRange: 10,\n\n        // show week numbers at head of row\n        showWeekNumber: false,\n\n        // used internally (don't config outside)\n        minYear: 0,\n        maxYear: 9999,\n        minMonth: undefined,\n        maxMonth: undefined,\n\n        startRange: null,\n        endRange: null,\n\n        isRTL: false,\n\n        // Additional text to append to the year in the calendar title\n        yearSuffix: '',\n\n        // Render the month after year in the calendar title\n        showMonthAfterYear: false,\n\n        // how many months are visible\n        numberOfMonths: 1,\n\n        // when numberOfMonths is used, this will help you to choose where the main calendar will be (default `left`, can be set to `right`)\n        // only used for the first display or when a selected date is not visible\n        mainCalendar: 'left',\n\n        // Specify a DOM element to render the calendar in\n        container: undefined,\n\n        // internationalization\n        i18n: {\n            previousMonth : 'Previous Month',\n            nextMonth     : 'Next Month',\n            months        : ['January','February','March','April','May','June','July','August','September','October','November','December'],\n            weekdays      : ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\n            weekdaysShort : ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']\n        },\n\n        // Theme Classname\n        theme: null,\n\n        // callback function\n        onSelect: null,\n        onOpen: null,\n        onClose: null,\n        onDraw: null\n    },\n\n\n    /**\n     * templating functions to abstract HTML rendering\n     */\n    renderDayName = function(opts, day, abbr)\n    {\n        day += opts.firstDay;\n        while (day >= 7) {\n            day -= 7;\n        }\n        return abbr ? opts.i18n.weekdaysShort[day] : opts.i18n.weekdays[day];\n    },\n\n    renderDay = function(opts)\n    {\n        if (opts.isEmpty) {\n            return '<td class=\"is-empty\"></td>';\n        }\n        var arr = [];\n        if (opts.isDisabled) {\n            arr.push('is-disabled');\n        }\n        if (opts.isToday) {\n            arr.push('is-today');\n        }\n        if (opts.isSelected) {\n            arr.push('is-selected');\n        }\n        if (opts.isInRange) {\n            arr.push('is-inrange');\n        }\n        if (opts.isStartRange) {\n            arr.push('is-startrange');\n        }\n        if (opts.isEndRange) {\n            arr.push('is-endrange');\n        }\n        return '<td data-day=\"' + opts.day + '\" class=\"' + arr.join(' ') + '\">' +\n                 '<button class=\"pika-button pika-day\" type=\"button\" ' +\n                    'data-pika-year=\"' + opts.year + '\" data-pika-month=\"' + opts.month + '\" data-pika-day=\"' + opts.day + '\">' +\n                        opts.day +\n                 '</button>' +\n               '</td>';\n    },\n\n    renderWeek = function (d, m, y) {\n        // Lifted from http://javascript.about.com/library/blweekyear.htm, lightly modified.\n        var onejan = new Date(y, 0, 1),\n            weekNum = Math.ceil((((new Date(y, m, d) - onejan) / 86400000) + onejan.getDay()+1)/7);\n        return '<td class=\"pika-week\">' + weekNum + '</td>';\n    },\n\n    renderRow = function(days, isRTL)\n    {\n        return '<tr>' + (isRTL ? days.reverse() : days).join('') + '</tr>';\n    },\n\n    renderBody = function(rows)\n    {\n        return '<tbody>' + rows.join('') + '</tbody>';\n    },\n\n    renderHead = function(opts)\n    {\n        var i, arr = [];\n        if (opts.showWeekNumber) {\n            arr.push('<th></th>');\n        }\n        for (i = 0; i < 7; i++) {\n            arr.push('<th scope=\"col\"><abbr title=\"' + renderDayName(opts, i) + '\">' + renderDayName(opts, i, true) + '</abbr></th>');\n        }\n        return '<thead>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</thead>';\n    },\n\n    renderTitle = function(instance, c, year, month, refYear)\n    {\n        var i, j, arr,\n            opts = instance._o,\n            isMinYear = year === opts.minYear,\n            isMaxYear = year === opts.maxYear,\n            html = '<div class=\"pika-title\">',\n            monthHtml,\n            yearHtml,\n            prev = true,\n            next = true;\n\n        for (arr = [], i = 0; i < 12; i++) {\n            arr.push('<option value=\"' + (year === refYear ? i - c : 12 + i - c) + '\"' +\n                (i === month ? ' selected': '') +\n                ((isMinYear && i < opts.minMonth) || (isMaxYear && i > opts.maxMonth) ? 'disabled' : '') + '>' +\n                opts.i18n.months[i] + '</option>');\n        }\n        monthHtml = '<div class=\"pika-label\">' + opts.i18n.months[month] + '<select class=\"pika-select pika-select-month\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (isArray(opts.yearRange)) {\n            i = opts.yearRange[0];\n            j = opts.yearRange[1] + 1;\n        } else {\n            i = year - opts.yearRange;\n            j = 1 + year + opts.yearRange;\n        }\n\n        for (arr = []; i < j && i <= opts.maxYear; i++) {\n            if (i >= opts.minYear) {\n                arr.push('<option value=\"' + i + '\"' + (i === year ? ' selected': '') + '>' + (i) + '</option>');\n            }\n        }\n        yearHtml = '<div class=\"pika-label\">' + year + opts.yearSuffix + '<select class=\"pika-select pika-select-year\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (opts.showMonthAfterYear) {\n            html += yearHtml + monthHtml;\n        } else {\n            html += monthHtml + yearHtml;\n        }\n\n        if (isMinYear && (month === 0 || opts.minMonth >= month)) {\n            prev = false;\n        }\n\n        if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {\n            next = false;\n        }\n\n        if (c === 0) {\n            html += '<button class=\"pika-prev' + (prev ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.previousMonth + '</button>';\n        }\n        if (c === (instance._o.numberOfMonths - 1) ) {\n            html += '<button class=\"pika-next' + (next ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.nextMonth + '</button>';\n        }\n\n        return html += '</div>';\n    },\n\n    renderTable = function(opts, data)\n    {\n        return '<table cellpadding=\"0\" cellspacing=\"0\" class=\"pika-table\">' + renderHead(opts) + renderBody(data) + '</table>';\n    },\n\n\n    /**\n     * Pikaday constructor\n     */\n    Pikaday = function(options)\n    {\n        var self = this,\n            opts = self.config(options);\n\n        self._onMouseDown = function(e)\n        {\n            if (!self._v) {\n                return;\n            }\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n\n            if (!hasClass(target, 'is-disabled')) {\n                if (hasClass(target, 'pika-button') && !hasClass(target, 'is-empty')) {\n                    self.setDate(new Date(target.getAttribute('data-pika-year'), target.getAttribute('data-pika-month'), target.getAttribute('data-pika-day')));\n                    if (opts.bound) {\n                        sto(function() {\n                            self.hide();\n                            if (opts.field) {\n                                opts.field.blur();\n                            }\n                        }, 100);\n                    }\n                }\n                else if (hasClass(target, 'pika-prev')) {\n                    self.prevMonth();\n                }\n                else if (hasClass(target, 'pika-next')) {\n                    self.nextMonth();\n                }\n            }\n            if (!hasClass(target, 'pika-select')) {\n                // if this is touch event prevent mouse events emulation\n                if (e.preventDefault) {\n                    e.preventDefault();\n                } else {\n                    e.returnValue = false;\n                    return false;\n                }\n            } else {\n                self._c = true;\n            }\n        };\n\n        self._onChange = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n            if (hasClass(target, 'pika-select-month')) {\n                self.gotoMonth(target.value);\n            }\n            else if (hasClass(target, 'pika-select-year')) {\n                self.gotoYear(target.value);\n            }\n        };\n\n        self._onInputChange = function(e)\n        {\n            var date;\n\n            if (e.firedBy === self) {\n                return;\n            }\n            if (hasMoment) {\n                date = moment(opts.field.value, opts.format);\n                date = (date && date.isValid()) ? date.toDate() : null;\n            }\n            else {\n                date = new Date(Date.parse(opts.field.value));\n            }\n            if (isDate(date)) {\n              self.setDate(date);\n            }\n            if (!self._v) {\n                self.show();\n            }\n        };\n\n        self._onInputFocus = function()\n        {\n            self.show();\n        };\n\n        self._onInputClick = function()\n        {\n            self.show();\n        };\n\n        self._onInputBlur = function()\n        {\n            // IE allows pika div to gain focus; catch blur the input field\n            var pEl = document.activeElement;\n            do {\n                if (hasClass(pEl, 'pika-single')) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n\n            if (!self._c) {\n                self._b = sto(function() {\n                    self.hide();\n                }, 50);\n            }\n            self._c = false;\n        };\n\n        self._onClick = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement,\n                pEl = target;\n            if (!target) {\n                return;\n            }\n            if (!hasEventListeners && hasClass(target, 'pika-select')) {\n                if (!target.onchange) {\n                    target.setAttribute('onchange', 'return;');\n                    addEvent(target, 'change', self._onChange);\n                }\n            }\n            do {\n                if (hasClass(pEl, 'pika-single') || pEl === opts.trigger) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n            if (self._v && target !== opts.trigger && pEl !== opts.trigger) {\n                self.hide();\n            }\n        };\n\n        self.el = document.createElement('div');\n        self.el.className = 'pika-single' + (opts.isRTL ? ' is-rtl' : '') + (opts.theme ? ' ' + opts.theme : '');\n\n        addEvent(self.el, 'mousedown', self._onMouseDown, true);\n        addEvent(self.el, 'touchend', self._onMouseDown, true);\n        addEvent(self.el, 'change', self._onChange);\n\n        if (opts.field) {\n            if (opts.container) {\n                opts.container.appendChild(self.el);\n            } else if (opts.bound) {\n                document.body.appendChild(self.el);\n            } else {\n                opts.field.parentNode.insertBefore(self.el, opts.field.nextSibling);\n            }\n            addEvent(opts.field, 'change', self._onInputChange);\n\n            if (!opts.defaultDate) {\n                if (hasMoment && opts.field.value) {\n                    opts.defaultDate = moment(opts.field.value, opts.format).toDate();\n                } else {\n                    opts.defaultDate = new Date(Date.parse(opts.field.value));\n                }\n                opts.setDefaultDate = true;\n            }\n        }\n\n        var defDate = opts.defaultDate;\n\n        if (isDate(defDate)) {\n            if (opts.setDefaultDate) {\n                self.setDate(defDate, true);\n            } else {\n                self.gotoDate(defDate);\n            }\n        } else {\n            self.gotoDate(new Date());\n        }\n\n        if (opts.bound) {\n            this.hide();\n            self.el.className += ' is-bound';\n            addEvent(opts.trigger, 'click', self._onInputClick);\n            addEvent(opts.trigger, 'focus', self._onInputFocus);\n            addEvent(opts.trigger, 'blur', self._onInputBlur);\n        } else {\n            this.show();\n        }\n    };\n\n\n    /**\n     * public Pikaday API\n     */\n    Pikaday.prototype = {\n\n\n        /**\n         * configure functionality\n         */\n        config: function(options)\n        {\n            if (!this._o) {\n                this._o = extend({}, defaults, true);\n            }\n\n            var opts = extend(this._o, options, true);\n\n            opts.isRTL = !!opts.isRTL;\n\n            opts.field = (opts.field && opts.field.nodeName) ? opts.field : null;\n\n            opts.theme = (typeof opts.theme) === 'string' && opts.theme ? opts.theme : null;\n\n            opts.bound = !!(opts.bound !== undefined ? opts.field && opts.bound : opts.field);\n\n            opts.trigger = (opts.trigger && opts.trigger.nodeName) ? opts.trigger : opts.field;\n\n            opts.disableWeekends = !!opts.disableWeekends;\n\n            opts.disableDayFn = (typeof opts.disableDayFn) === 'function' ? opts.disableDayFn : null;\n\n            var nom = parseInt(opts.numberOfMonths, 10) || 1;\n            opts.numberOfMonths = nom > 4 ? 4 : nom;\n\n            if (!isDate(opts.minDate)) {\n                opts.minDate = false;\n            }\n            if (!isDate(opts.maxDate)) {\n                opts.maxDate = false;\n            }\n            if ((opts.minDate && opts.maxDate) && opts.maxDate < opts.minDate) {\n                opts.maxDate = opts.minDate = false;\n            }\n            if (opts.minDate) {\n                this.setMinDate(opts.minDate);\n            }\n            if (opts.maxDate) {\n                this.setMaxDate(opts.maxDate);\n            }\n\n            if (isArray(opts.yearRange)) {\n                var fallback = new Date().getFullYear() - 10;\n                opts.yearRange[0] = parseInt(opts.yearRange[0], 10) || fallback;\n                opts.yearRange[1] = parseInt(opts.yearRange[1], 10) || fallback;\n            } else {\n                opts.yearRange = Math.abs(parseInt(opts.yearRange, 10)) || defaults.yearRange;\n                if (opts.yearRange > 100) {\n                    opts.yearRange = 100;\n                }\n            }\n\n            return opts;\n        },\n\n        /**\n         * return a formatted string of the current selection (using Moment.js if available)\n         */\n        toString: function(format)\n        {\n            return !isDate(this._d) ? '' : hasMoment ? moment(this._d).format(format || this._o.format) : this._d.toDateString();\n        },\n\n        /**\n         * return a Moment.js object of the current selection (if available)\n         */\n        getMoment: function()\n        {\n            return hasMoment ? moment(this._d) : null;\n        },\n\n        /**\n         * set the current selection from a Moment.js object (if available)\n         */\n        setMoment: function(date, preventOnSelect)\n        {\n            if (hasMoment && moment.isMoment(date)) {\n                this.setDate(date.toDate(), preventOnSelect);\n            }\n        },\n\n        /**\n         * return a Date object of the current selection\n         */\n        getDate: function()\n        {\n            return isDate(this._d) ? new Date(this._d.getTime()) : null;\n        },\n\n        /**\n         * set the current selection\n         */\n        setDate: function(date, preventOnSelect)\n        {\n            if (!date) {\n                this._d = null;\n\n                if (this._o.field) {\n                    this._o.field.value = '';\n                    fireEvent(this._o.field, 'change', { firedBy: this });\n                }\n\n                return this.draw();\n            }\n            if (typeof date === 'string') {\n                date = new Date(Date.parse(date));\n            }\n            if (!isDate(date)) {\n                return;\n            }\n\n            var min = this._o.minDate,\n                max = this._o.maxDate;\n\n            if (isDate(min) && date < min) {\n                date = min;\n            } else if (isDate(max) && date > max) {\n                date = max;\n            }\n\n            this._d = new Date(date.getTime());\n            setToStartOfDay(this._d);\n            this.gotoDate(this._d);\n\n            if (this._o.field) {\n                this._o.field.value = this.toString();\n                fireEvent(this._o.field, 'change', { firedBy: this });\n            }\n            if (!preventOnSelect && typeof this._o.onSelect === 'function') {\n                this._o.onSelect.call(this, this.getDate());\n            }\n        },\n\n        /**\n         * change view to a specific date\n         */\n        gotoDate: function(date)\n        {\n            var newCalendar = true;\n\n            if (!isDate(date)) {\n                return;\n            }\n\n            if (this.calendars) {\n                var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),\n                    lastVisibleDate = new Date(this.calendars[this.calendars.length-1].year, this.calendars[this.calendars.length-1].month, 1),\n                    visibleDate = date.getTime();\n                // get the end of the month\n                lastVisibleDate.setMonth(lastVisibleDate.getMonth()+1);\n                lastVisibleDate.setDate(lastVisibleDate.getDate()-1);\n                newCalendar = (visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate);\n            }\n\n            if (newCalendar) {\n                this.calendars = [{\n                    month: date.getMonth(),\n                    year: date.getFullYear()\n                }];\n                if (this._o.mainCalendar === 'right') {\n                    this.calendars[0].month += 1 - this._o.numberOfMonths;\n                }\n            }\n\n            this.adjustCalendars();\n        },\n\n        adjustCalendars: function() {\n            this.calendars[0] = adjustCalendar(this.calendars[0]);\n            for (var c = 1; c < this._o.numberOfMonths; c++) {\n                this.calendars[c] = adjustCalendar({\n                    month: this.calendars[0].month + c,\n                    year: this.calendars[0].year\n                });\n            }\n            this.draw();\n        },\n\n        gotoToday: function()\n        {\n            this.gotoDate(new Date());\n        },\n\n        /**\n         * change view to a specific month (zero-index, e.g. 0: January)\n         */\n        gotoMonth: function(month)\n        {\n            if (!isNaN(month)) {\n                this.calendars[0].month = parseInt(month, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        nextMonth: function()\n        {\n            this.calendars[0].month++;\n            this.adjustCalendars();\n        },\n\n        prevMonth: function()\n        {\n            this.calendars[0].month--;\n            this.adjustCalendars();\n        },\n\n        /**\n         * change view to a specific full year (e.g. \"2012\")\n         */\n        gotoYear: function(year)\n        {\n            if (!isNaN(year)) {\n                this.calendars[0].year = parseInt(year, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        /**\n         * change the minDate\n         */\n        setMinDate: function(value)\n        {\n            setToStartOfDay(value);\n            this._o.minDate = value;\n            this._o.minYear  = value.getFullYear();\n            this._o.minMonth = value.getMonth();\n            this.draw();\n        },\n\n        /**\n         * change the maxDate\n         */\n        setMaxDate: function(value)\n        {\n            setToStartOfDay(value);\n            this._o.maxDate = value;\n            this._o.maxYear = value.getFullYear();\n            this._o.maxMonth = value.getMonth();\n            this.draw();\n        },\n\n        setStartRange: function(value)\n        {\n            this._o.startRange = value;\n        },\n\n        setEndRange: function(value)\n        {\n            this._o.endRange = value;\n        },\n\n        /**\n         * refresh the HTML\n         */\n        draw: function(force)\n        {\n            if (!this._v && !force) {\n                return;\n            }\n            var opts = this._o,\n                minYear = opts.minYear,\n                maxYear = opts.maxYear,\n                minMonth = opts.minMonth,\n                maxMonth = opts.maxMonth,\n                html = '';\n\n            if (this._y <= minYear) {\n                this._y = minYear;\n                if (!isNaN(minMonth) && this._m < minMonth) {\n                    this._m = minMonth;\n                }\n            }\n            if (this._y >= maxYear) {\n                this._y = maxYear;\n                if (!isNaN(maxMonth) && this._m > maxMonth) {\n                    this._m = maxMonth;\n                }\n            }\n\n            for (var c = 0; c < opts.numberOfMonths; c++) {\n                html += '<div class=\"pika-lendar\">' + renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year) + this.render(this.calendars[c].year, this.calendars[c].month) + '</div>';\n            }\n\n            this.el.innerHTML = html;\n\n            if (opts.bound) {\n                if(opts.field.type !== 'hidden') {\n                    sto(function() {\n                        opts.trigger.focus();\n                    }, 1);\n                }\n            }\n\n            if (typeof this._o.onDraw === 'function') {\n                var self = this;\n                sto(function() {\n                    self._o.onDraw.call(self);\n                }, 0);\n            }\n        },\n\n        adjustPosition: function()\n        {\n            var field, pEl, width, height, viewportWidth, viewportHeight, scrollTop, left, top, clientRect;\n\n            if (this._o.container) return;\n\n            this.el.style.position = 'absolute';\n\n            field = this._o.trigger;\n            pEl = field;\n            width = this.el.offsetWidth;\n            height = this.el.offsetHeight;\n            viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n            viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n            scrollTop = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n\n            if (typeof field.getBoundingClientRect === 'function') {\n                clientRect = field.getBoundingClientRect();\n                left = clientRect.left + window.pageXOffset;\n                top = clientRect.bottom + window.pageYOffset;\n            } else {\n                left = pEl.offsetLeft;\n                top  = pEl.offsetTop + pEl.offsetHeight;\n                while((pEl = pEl.offsetParent)) {\n                    left += pEl.offsetLeft;\n                    top  += pEl.offsetTop;\n                }\n            }\n\n            // default position is bottom & left\n            if ((this._o.reposition && left + width > viewportWidth) ||\n                (\n                    this._o.position.indexOf('right') > -1 &&\n                    left - width + field.offsetWidth > 0\n                )\n            ) {\n                left = left - width + field.offsetWidth;\n            }\n            if ((this._o.reposition && top + height > viewportHeight + scrollTop) ||\n                (\n                    this._o.position.indexOf('top') > -1 &&\n                    top - height - field.offsetHeight > 0\n                )\n            ) {\n                top = top - height - field.offsetHeight;\n            }\n\n            this.el.style.left = left + 'px';\n            this.el.style.top = top + 'px';\n        },\n\n        /**\n         * render HTML for a particular month\n         */\n        render: function(year, month)\n        {\n            var opts   = this._o,\n                now    = new Date(),\n                days   = getDaysInMonth(year, month),\n                before = new Date(year, month, 1).getDay(),\n                data   = [],\n                row    = [];\n            setToStartOfDay(now);\n            if (opts.firstDay > 0) {\n                before -= opts.firstDay;\n                if (before < 0) {\n                    before += 7;\n                }\n            }\n            var cells = days + before,\n                after = cells;\n            while(after > 7) {\n                after -= 7;\n            }\n            cells += 7 - after;\n            for (var i = 0, r = 0; i < cells; i++)\n            {\n                var day = new Date(year, month, 1 + (i - before)),\n                    isSelected = isDate(this._d) ? compareDates(day, this._d) : false,\n                    isToday = compareDates(day, now),\n                    isEmpty = i < before || i >= (days + before),\n                    isStartRange = opts.startRange && compareDates(opts.startRange, day),\n                    isEndRange = opts.endRange && compareDates(opts.endRange, day),\n                    isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,\n                    isDisabled = (opts.minDate && day < opts.minDate) ||\n                                 (opts.maxDate && day > opts.maxDate) ||\n                                 (opts.disableWeekends && isWeekend(day)) ||\n                                 (opts.disableDayFn && opts.disableDayFn(day)),\n                    dayConfig = {\n                        day: 1 + (i - before),\n                        month: month,\n                        year: year,\n                        isSelected: isSelected,\n                        isToday: isToday,\n                        isDisabled: isDisabled,\n                        isEmpty: isEmpty,\n                        isStartRange: isStartRange,\n                        isEndRange: isEndRange,\n                        isInRange: isInRange\n                    };\n\n                row.push(renderDay(dayConfig));\n\n                if (++r === 7) {\n                    if (opts.showWeekNumber) {\n                        row.unshift(renderWeek(i - before, month, year));\n                    }\n                    data.push(renderRow(row, opts.isRTL));\n                    row = [];\n                    r = 0;\n                }\n            }\n            return renderTable(opts, data);\n        },\n\n        isVisible: function()\n        {\n            return this._v;\n        },\n\n        show: function()\n        {\n            if (!this._v) {\n                removeClass(this.el, 'is-hidden');\n                this._v = true;\n                this.draw();\n                if (this._o.bound) {\n                    addEvent(document, 'click', this._onClick);\n                    this.adjustPosition();\n                }\n                if (typeof this._o.onOpen === 'function') {\n                    this._o.onOpen.call(this);\n                }\n            }\n        },\n\n        hide: function()\n        {\n            var v = this._v;\n            if (v !== false) {\n                if (this._o.bound) {\n                    removeEvent(document, 'click', this._onClick);\n                }\n                this.el.style.position = 'static'; // reset\n                this.el.style.left = 'auto';\n                this.el.style.top = 'auto';\n                addClass(this.el, 'is-hidden');\n                this._v = false;\n                if (v !== undefined && typeof this._o.onClose === 'function') {\n                    this._o.onClose.call(this);\n                }\n            }\n        },\n\n        /**\n         * GAME OVER\n         */\n        destroy: function()\n        {\n            this.hide();\n            removeEvent(this.el, 'mousedown', this._onMouseDown, true);\n            removeEvent(this.el, 'touchend', this._onMouseDown, true);\n            removeEvent(this.el, 'change', this._onChange);\n            if (this._o.field) {\n                removeEvent(this._o.field, 'change', this._onInputChange);\n                if (this._o.bound) {\n                    removeEvent(this._o.trigger, 'click', this._onInputClick);\n                    removeEvent(this._o.trigger, 'focus', this._onInputFocus);\n                    removeEvent(this._o.trigger, 'blur', this._onInputBlur);\n                }\n            }\n            if (this.el.parentNode) {\n                this.el.parentNode.removeChild(this.el);\n            }\n        }\n\n    };\n\n    return Pikaday;\n\n}));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/pikaday/pikaday_standalone.js\n ** module id = 4\n ** module chunks = 0\n **/","riot.tag2('autocomplete', '<div class=\"cart-search\"> <input type=\"text\" name=\"acinput\" onkeyup=\"{complete}\" class=\"u-full-width\" placeholder=\"Cari produk di sini... (ctrl+s)\" autofocus=\"true\" autocomplete=\"off\"> <ul class=\"ac\" id=\"aclist\" show=\"{filtered.length}\"> <li each=\"{c, i in filtered}\" class=\"{active: active==i}\" onclick=\"{selected}\">{c}</li> </ul>', '', '', function(opts) {\nvar _this = this;\n\nthis.min = opts.min || 2;\nthis.filtered = [];\nthis.active = -1;\nthis.mode = opts.mode || 'start';\nvar self = this;\n\nthis.blur = function () {\n  _this.acinput.value = '';\n  _this.active = -1;\n  _this.filtered = [];\n};\n\nvar reset = function reset() {\n  _this.selection('');\n  _this.active = -1;\n  _this.filtered = [];\n  _this.acinput.value = '';\n};\n\nthis.complete = function (e) {\n  if (e.target.value.length < _this.min) {\n    _this.filtered = [];\n    _this.active = -1;\n    return false;\n  }\n\n  riot.control.trigger(riot.EVT.cartSearchItem, { text: e.target.value });\n\n  if (e.which == 40 && _this.filtered.length) {\n    _this.active = Math.min(_this.active + 1, _this.filtered.length - 1);\n    return false;\n  }\n\n  if (e.which == 38 && _this.filtered.length) {\n    _this.active = Math.max(_this.active - 1, 0);\n    return false;\n  }\n\n  if (e.which == 13) {\n    if (_this.filtered.length) {\n      if (_this.active == -1) _this.active = 0;\n      _this.selection(_this.filtered[_this.active]);\n    }\n  }\n\n  if (e.which == 27) {\n    reset();\n  }\n};\n\nthis.re = function (e) {\n\n  return _this.mode == 'start' ? RegExp('^' + e.target.value, 'i') : RegExp(e.target.value, 'i');\n};\n\nthis.selected = function (s) {\n  _this.selection(s.item.c);\n};\n\nthis.selection = function (txt) {\n  _this.acinput.value = txt;\n  if (txt != \"\") {\n    self.save(txt);\n  }\n  return false;\n};\n\nthis.on('mount', function () {});\n\nthis.save = function (txt) {\n  if (!txt) {\n    txt = _this.acinput.value;\n  }\n  riot.control.trigger(riot.EVT.cartSaveItem, { title: txt });\n\n  reset();\n};\n\nriot.control.on(riot.EVT.cartEditItemOn, function (item) {\n  _this.blur();\n  _this.acinput.focus();\n});\n\nriot.control.on(riot.EVT.cartSaveItemSuccess, function (item) {\n  _this.blur();\n  _this.acinput.focus();\n});\n\nriot.control.on(riot.EVT.cartUpdateItemSuccess, function (item) {\n  _this.blur();\n  _this.acinput.focus();\n});\n\nriot.control.on(riot.EVT.cartSearchItemSuccess, function (searchitems) {\n  _this.filtered = _(searchitems).map(function (c) {\n    return c.title;\n  }).value();\n});\n\nriot.control.on(riot.EVT.cartRemoveItemSuccess, function (item) {\n  _this.acinput.focus();\n});\n\nriot.control.on(riot.EVT.cancelCart, function (item) {\n  _this.acinput.focus();\n});\n}); \n\n\n/** WEBPACK FOOTER **\n ** ./src/components/cart/autocomplete.tag\n **/","import { addCommas } from '../../helper.js';\nriot.tag2('cartitem', '<div class=\"cart-item\"> <div class=\"row\"> <div class=\"seven columns\"><div class=\"ellipsis\" title=\"{opts.title}\">{opts.title}</div><div class=\"u-text-left\"><small>{this.price_}</small></div></div> <div class=\"two columns u-text-center\"> <input type=\"text\" name=\"qty__\" class=\"u-full-width u-text-center\" value=\"{opts.qty}\" min=\"1\" onkeyup=\"{edit__}\" onblur=\"{edit_}\" autocomplete=\"off\" onclick=\"{focus__}\"> </div> <input type=\"hidden\" name=\"qty_\" value=\"{opts.qty}\"> <div class=\"three columns u-text-right subtotal\">{this.subtotal_}</div> </div> </div>', '', '', function(opts) {\nvar tag = this;\n\ntag.on('mount', function () {\n  tag.price_ = addCommas(opts.price);\n  tag.subtotal_ = addCommas(opts.price * opts.qty);\n});\n\ntag.remove = function (e) {\n  var r = confirm(\"HAPUS \\\"\" + opts.title.toUpperCase() + \"\\\" ?\");\n  if (r) {\n    riot.control.trigger(riot.EVT.cartRemoveItem, opts);\n  } else {\n    e.target.value = tag.qty_.value;\n    e.target.select();\n    return false;\n  }\n};\n\ntag.edit__ = function (e) {\n  if (e.which == 13) {\n    var qty_ = parseFloat(e.target.value);\n    if (isNaN(qty_) || qty_ <= 0) {\n      tag.remove(e);\n    } else {\n      var item__ = {\n        _id: opts._id,\n        title: opts.title,\n        qty: e.target.value,\n        price: opts.price,\n        type: 'cartitem',\n        created: opts.created\n      };\n      riot.control.trigger(riot.EVT.cartEditItemOn, item__);\n    }\n  }\n};\ntag.edit_ = function (e) {\n  var qty_ = parseFloat(e.target.value);\n  if (isNaN(qty_) || qty_ <= 0) {\n    e.target.value = tag.qty_.value;\n  }\n};\n\ntag.focus__ = function (e) {\n  e.target.setSelectionRange(0, e.target.value.length);\n};\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/cart/cartitem.tag\n **/","import './autocomplete.tag';\nimport './cartitem.tag';\nimport { addCommas, avoidDup } from '../../helper.js';\nriot.tag2('cartitems', '<div class=\"cart\"> <div show=\"{isNewUser || !isProductReady}\"> <h3>Pengguna Baru</h3> Untuk memudahkan Anda, lengkapi data-data di bawah ini: </div> <div show=\"{isNewUser}\" style=\"border-top:1px solid #efefef; margin-top:5px; padding-top:5px\"> &raquo; Tentukan Nama Toko kamu di <a href=\"#configurations\">Konfigurasi Toko</a> </div> <div show=\"{!isProductReady}\" style=\"border-top:1px solid #efefef; margin-top:5px; padding-top:5px\"> &raquo; Isi produk yang Anda jual di <a href=\"#products\">Manajemen Produk</a> </div> <div show=\"{isCartEmpty && isProductReady && !isNewUser}\"> <small>Cari <a href=\"#products\">produk</a> pada kotak pencarian di atas terlebih dahulu.</small> </div> <div class=\"row\" each=\"{item_, index in items}\" show=\"{!isCartEmpty && isProductReady}\"> <cartitem _id=\"{item_._id}\" title=\"{item_.title}\" price=\"{item_.price}\" qty=\"{item_.qty}\" created=\"{item_.created}\" index=\"{index}\"></cartitem> </div> </div> <div class=\"cart-total\" show=\"{!isCartEmpty && isProductReady}\"> <div class=\"cart-total-items\"> <div class=\"row\"> <div class=\"six columns\">Total ({total_items} produk)</div> <div class=\"six columns u-text-right\"><span>{total}</span></div> </div> </div> <div class=\"cart-total-payment\"> <div class=\"row\"> <div class=\"six columns\"> <label><u>T</u>unai</label> </div> <div class=\"six columns\"> <input type=\"text\" id=\"cash\" name=\"cash\" class=\"u-full-width u-text-right {red: isMinus}\" value=\"0\" placeholder=\"Masukkan uang yang diterima di sini...\" onkeyup=\"{updateTotal}\" oninput=\"{oninp}\" onclick=\"{focus__}\"> </div> </div> </div> <div class=\"cart-total-change\"> <div class=\"row\"> <div class=\"four columns\"> <label>Kembalian</label> </div> <div class=\"eight columns u-text-right\" id=\"kembalian\"><span class=\" {red: isMinus}\">{kembalian}</span></div> </div> </div> <div class=\"cart-total-pay\"> <div class=\"row \"> <div class=\"four columns\"> <button class=\"button u-full-width \" tabindex=\"-1\" onclick=\"{cancel_}\">Reset</button> </div> <div class=\"eight columns u-text-right\"> <button class=\"button button-primary u-full-width cart-total-pay-button\" onclick=\"{bayar}\">BAYAR</button> </div> </div> </div> </div>', '', 'show=\"{isReady}\"', function(opts) {\nvar alerty = require('alerty');\nvar tag = this;\ntag.isReady = false;\ntag.items = [];\ntag.total = 0;\ntag.total_ = 0;\ntag.total_items = 0;\ntag.kembalian = 0;\ntag.kembalian_ = 0;\ntag.cash_ = 0;\ntag.isMinus = true;\ntag.isCartEmpty = false;\ntag.isNewUser = null;\ntag.isProductReady = null;\n\ntag.on('mount', function () {\n  document.getElementById('preloader').style.display = \"\";\n\n  riot.control.trigger(riot.EVT.cartLoadItems);\n});\n\ntag.on('update', function () {\n  var tot = 0;\n  var tot_items = 0;\n  _.each(tag.items, function (someThing) {\n    tot += parseInt(someThing.price) * parseInt(someThing.qty);\n    tot_items++;\n  });\n  tag.total_ = tot;\n  tag.total_items = tot_items;\n\n  if (tag.total_items > 0) {\n    tag.isCartEmpty = false;\n  } else {\n      tag.isCartEmpty = true;\n      tag.items = [];\n    }\n\n  tag.total = addCommas(tag.total_);\n  tag.total_items = addCommas(tag.total_items);\n  tag.isCartEmpty = tag.isCartEmpty;\n  tag.updateTotal();\n});\n\nriot.control.on(riot.EVT.isProductReady, function (status) {\n  tag.isProductReady = status;\n  tag.update();\n});\n\nriot.control.on(riot.EVT.cartLoadItemsSuccess, function (items) {\n  tag.items = items;\n  document.getElementById('preloader').style.display = \"none\";\n  tag.isNewUser = riot.isNewUser;\n  riot.control.trigger(riot.EVT.isNewUser, tag.isNewUser);\n  tag.isReady = true;\n  tag.update();\n});\n\nriot.control.on(riot.EVT.cartSaveItemSuccess, function (item) {\n\n  tag.items.splice(0, 0, item);\n  tag.items = avoidDup(tag.items);\n  tag.update();\n  riot.control.trigger(riot.EVT.allowAdd, true);\n});\n\nriot.control.on(riot.EVT.cartUpdateItemSuccess, function (item) {\n  var index = _.indexOf(tag.items, _.find(tag.items, { _id: item._id }));\n  tag.items.splice(index, 1, item);\n  tag.update();\n  riot.control.trigger(riot.EVT.allowAdd, true);\n});\n\nriot.control.on(riot.EVT.cartRemoveItemSuccess, function (item) {\n  tag.items = avoidDup(tag.items);\n  var index = _.indexOf(tag.items, _.find(tag.items, { _id: item._id }));\n  tag.items.splice(index, 1);\n\n  tag.update();\n});\n\nriot.control.on(riot.EVT.cancelCartSuccess, function (items) {\n  tag.items = items;\n  tag.update();\n});\n\ntag.oninp = function () {\n  tag.cash_ = parseFloat(tag.cash.value.replace(/[.]/g, ''));\n\n  tag.cash.value = addCommas(tag.cash.value.replace(/[^0-9]/g, ''));\n};\n\ntag.bayar = function (e) {\n  e.preventDefault();\n  tag.updateTotal();\n  if (tag.kembalian_ < 0 || isNaN(tag.kembalian_)) {\n\n    alerty.toasts(\"ERROR: Uang kembalian tidak boleh minus!\", { place: 'top', bgColor: 'red', time: 2500 });\n    tag.cash.focus();\n    tag.cash.select();\n  } else {\n    var r = confirm(\"SIMPAN TRANSAKSI?\");\n    if (r) {\n      var createdOn = Math.floor((Date.now() + riot.timezone * 60 * 60 * 1000) / 1000);\n\n      var salesitems = tag.items.map(function (r) {\n        return {\n          'created': r.created,\n          'price': r.price,\n          'qty': r.qty,\n          'title': r.title,\n          'subtotal': r.price * r.qty\n        };\n      });\n\n      var salesTotal = _.sumBy(salesitems, function (o) {\n        return o.subtotal;\n      });\n\n      var sales = {\n        _id: 'sales_' + createdOn,\n        created: createdOn,\n        discount: 0,\n        payment: 'cash',\n        total: salesTotal,\n        cash: tag.cash_,\n        items: salesitems,\n        type: 'sales'\n      };\n\n      riot.control.trigger(riot.EVT.salesSave, sales);\n    } else {\n      return false;\n    }\n  }\n};\n\ntag.updateTotal = function (e) {\n  tag.kembalian_ = parseFloat(tag.cash_) - parseFloat(tag.total_);\n  tag.kembalian = addCommas(tag.kembalian_);\n\n  if (tag.kembalian_ < 0) {\n    tag.isMinus = true;\n  } else {\n    tag.isMinus = false;\n  }\n\n  if (e && e.which == 13) {\n    tag.bayar(e);\n  } else {\n    return false;\n  }\n};\n\ntag.cancel_ = function (e) {\n  var r = confirm(\"Reset Penjualan?\");\n  if (r) {\n    riot.control.trigger(riot.EVT.cancelCart, { mode: \"normal\" });\n  } else {\n    return false;\n  }\n};\n\ntag.hold_ = function (e) {\n  var r = confirm(\"Tunda Penjualan?\");\n  if (r) {} else {}\n};\n\nriot.control.on(riot.EVT.salesSaveSuccess, function (salesId) {\n  riot.route(\"print?cid=\" + salesId);\n});\n\ntag.focus__ = function (e) {\n  e.target.setSelectionRange(0, e.target.value.length);\n};\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/cart/cartitems.tag\n **/","import { addCommas } from '../../helper.js';\nriot.tag2('cartproductitems', '<span each=\"{productItems}\"> <a href=\"#\" onclick=\"{select}\" class=\"ellipsis\" title=\"{title}\">{title}</a> </span>', '', '', function(opts) {\nvar tag = this;\ntag.productItems = [];\ntag.price_ = 0;\nvar allowAdd = true;\n\ntag.on('mount', function () {\n  riot.control.trigger(riot.EVT.productLoadItems_);\n});\n\nriot.control.on(riot.EVT.productLoadItemsSuccess_, function (productItems) {\n  tag.productItems = productItems.docs.map(function (r) {\n    return r;\n  });\n  var size_ = _.size(tag.productItems);\n\n  if (size_ > 0) {\n    riot.control.trigger(riot.EVT.isProductReady, true);\n  } else {\n    riot.control.trigger(riot.EVT.isProductReady, false);\n  }\n\n  tag.update();\n});\n\ntag.select = function (e) {\n  if (allowAdd === true) {\n    allowAdd = false;\n    riot.control.trigger(riot.EVT.cartSaveItem, { title: e.item.title });\n  }\n};\n\nriot.control.on(riot.EVT.allowAdd, function (status) {\n  allowAdd = status;\n});\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/cart/cartproductitems.tag\n **/","import { addCommas } from '../../helper.js';\nriot.tag2('addproduct', '<form style=\"margin-bottom:0px\"> <div class=\"eight columns\"> <input type=\"text\" name=\"item\" class=\"u-full-width {this.item_error ? \\'has-error\\' : \\'has-success\\'}\" value=\"\" placeholder=\"Isi nama produk di sini\" oninput=\"{oninputitem}\" onkeyup=\"{save}\"> <small class=\"hint\">*Tekan ⏎ (enter/return) untuk menyimpan</small> </div> <div class=\"four columns\"> <input type=\"text\" id=\"price\" name=\"price\" class=\"u-full-width u-text-right {this.price_error ? \\'has-error\\' : \\'has-success\\'}\" value=\"\" placeholder=\"harga produk\" oninput=\"{oninputprice}\" onkeyup=\"{save}\"> </div> </form>', '', '', function(opts) {\nvar _this = this;\n\nvar alerty = require('alerty');\nvar self = this;\nvar ENTER_KEY = 13;\nthis.item_error = true;\nthis.price_error = true;\nthis.price_ = 0;\n\nthis.oninputitem = function () {\n  if (_this.item.value != \"\") {\n    _this.item_error = false;\n  } else {\n    _this.item_error = true;\n  }\n};\n\nthis.oninputprice = function () {\n  var prize__ = parseFloat(_this.price.value);\n  if (prize__ > 0 || !isNaN(prize__)) {\n    _this.price_error = false;\n  } else {\n    _this.price_error = true;\n  }\n  _this.price_ = parseFloat(_this.price.value.replace(\".\", \"\"));\n  _this.price.value = addCommas(_this.price.value.replace(/[^0-9-]/g, ''));\n};\n\nvar reset = function reset() {\n  _this.item.value = '';\n  _this.price.value = '0';\n\n  _this.id_edit = false;\n  _this.item.disabled = false;\n  _this.item.focus();\n  _this.update();\n};\n\nthis.save = function (e) {\n\n  var prize_ = parseFloat(_this.price_);\n  if (e.which === ENTER_KEY) {\n    if (_this.item.value && prize_ > 0 && !isNaN(prize_)) {\n      var item = {\n        title: _this.item.value,\n        price: prize_,\n        stock: 0\n      };\n\n      if (_this.is_edit) {\n        item['_id'] = _this.item.idvalue;\n      }\n\n      riot.control.trigger(riot.EVT.productSaveItem, item);\n      reset();\n    } else {\n      console.log(_this.price.value);\n      if (_this.item.value == \"\") {\n        alerty.toasts(\"ERROR: Nama produk harus diisi!\", { place: 'top', bgColor: 'black', time: 2500 });\n        _this.item.focus();\n      } else if (prize_ <= 0 || isNaN(prize_)) {\n        alerty.toasts(\"ERROR: Harga harus diisi!\", { place: 'top', bgColor: 'black', time: 2500 });\n        _this.price.focus();\n      }\n    }\n  }\n};\n\nthis.cancel = function (e) {\n  reset();\n};\n\nriot.control.on(riot.EVT.productEditItemOn, function (item) {\n  _this.is_edit = true;\n  _this.item.value = item.title;\n  _this.item.disabled = true;\n  _this.item.idvalue = item._id;\n  _this.price.value = item.price;\n  _this.stock.value = item.stock;\n  _this.item.focus();\n  _this.update();\n});\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/product/addproduct.tag\n **/","import { addCommas } from '../../helper.js';\nriot.tag2('productitem', '<div class=\"eight columns product-item-name ellipsis\"> <label>{this.title} <small class=\"green\">{⁗✔ updated⁗: this.isUpdated}</small></label> <input type=\"hidden\" name=\"item_single\" value=\"{this.title}\"> </div> <div class=\"three columns u-text-right product-item-price\"> <input type=\"text\" min=\"1\" name=\"price_single\" class=\"u-full-width u-text-right\" value=\"{price_update_}\" onkeyup=\"{edit}\" oninput=\"{oninputprice_single}\"> </div> <div class=\"one columns u-text-right product-item-price\"> <a href=\"#{this._id}\" onclick=\"{remove}\" title=\"Hapus {this.title}\">✖</a> </div>', '', '', function(opts) {\nvar _this = this;\n\nvar self = this;\nthis.price_single_ = String(this.price).replace(/[.]/g, '');\nthis.prize_ = parseFloat(this.price_single_);\nself.removed = false;\nself.isUpdated = false;\n\nthis.on('mount', function () {\n  _this.price_update_ = addCommas(_this.price_single_);\n});\n\nthis.oninputprice_single = function () {\n  var prize__ = parseFloat(_this.price_single.value);\n  if (prize__ > 0 || !isNaN(prize__)) {\n    _this.price_error = false;\n  } else {\n    _this.price_error = true;\n  }\n  _this.price_single_ = parseFloat(_this.price_single.value.replace(/[.]/g, ''));\n  _this.price_single.value = addCommas(_this.price_single.value.replace(/[^0-9-]/g, ''));\n};\n\nthis.edit = function (e) {\n\n  if (e.which == 13) {\n    var prize_ = _this.price_single_;\n\n    if (_this.item_single.value && (prize_ > 0 || !isNaN(prize_))) {\n      var item = {\n        _id: opts._id,\n        title: _this.item_single.value,\n        price: prize_,\n        stock: 0,\n        created: opts.created\n      };\n\n      riot.control.trigger(riot.EVT.productSaveItem, item);\n    }\n  }\n};\n\nthis.remove = function (e) {\n\n  var r = confirm(\"Remove \\\"\" + _this.title + \"\\\" ?\");\n  if (r == true) {\n    var opts = { _id: _this._id };\n    riot.control.trigger(riot.EVT.productRemoveItem, opts);\n  } else {\n    return false;\n  }\n};\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/product/productitem.tag\n **/","\nimport './productitem.tag';\n\nriot.tag2('productitems', '<div class=\"product-search\"> <input type=\"text\" name=\"search\" class=\"u-full-width\" value=\"\" placeholder=\"Masukkan kata yang ingin dicari dan tekan ⏎\" onblur=\"{blur2}\" onkeyup=\"{s}\"> </div> <div class=\"product-item\"> <small class=\"hint\">*Tekan ⏎ untuk menyimpan data yang dimodifikasi.</small><br> <div class=\"row\" each=\"{productItems}\"> <productitem title=\"{title}\" price=\"{price}\" stock=\"{stock}\" _id=\"{_id}\"></productitem> </div> <div class=\"pagination u-text-center\"> <ul> <li each=\"{countItems}\" class=\"{active: done}\"> <a href=\"./#products?page={id}\">{id}</a> </li> </ul> </div> </div>', '', '', function(opts) {\nvar _this = this;\n\nvar alerty = require('alerty');\nthis.productItems = [];\nthis.countItems = [];\nthis.q = [];\n\nvar q = riot.route.query();\n\nthis.on('mount', function () {\n  if (!q.page) q.page = 1;\n  document.getElementById('preloader').style.display = \"\";\n  riot.control.trigger(riot.EVT.productLoadItems, { page: q.page });\n});\n\nriot.control.on(riot.EVT.productLoadItemsSuccess, function (productItems) {\n  _this.productItems = productItems.docs.map(function (r) {\n    return r;\n  });\n\n  var array = _.range(0, productItems.total_rows / riot.pageSize);\n\n  _this.countItems = _.map(array, function (value, key) {\n    return { id: key + 1, done: q.page == key + 1 ? true : false };\n  });\n\n  document.getElementById('preloader').style.display = \"none\";\n\n  _this.update();\n});\n\nriot.control.on(riot.EVT.productSaveItemSuccess, function (item) {\n  _this.productItems.splice(0, 0, item);\n  alerty.toasts(\"SUCCESS: Produk baru berhasil ditambahkan\", { place: 'top', bgColor: '#FF8552', time: 2500 });\n  _this.update();\n});\n\nriot.control.on(riot.EVT.productUpdateItemSuccess, function (item) {\n  var index = _.indexOf(_this.productItems, _.find(_this.productItems, { _id: item._id }));\n  _this.productItems.splice(index, 1, item);\n  _this.update();\n});\n\nriot.control.on(riot.EVT.productRemoveItemSuccess, function (item) {\n\n  var index__ = _.indexOf(_this.productItems, _.find(_this.productItems, { _id: item._id }));\n\n  if (parseFloat(index__) > -1) {\n    _this.productItems.splice(index__, 1);\n  }\n  alerty.toasts(\"REMOVE SUCCESS: Produk berhasil dihapus\", { place: 'top', bgColor: '#FF8552', time: 2500 });\n  _this.update();\n});\n\nvar clearSearch = function clearSearch(s) {\n  riot.control.trigger(riot.EVT.productSearchItem, { text: s });\n};\n\nthis.s = function (e) {\n  if (e.which == 13) {\n    clearSearch(e.target.value);\n  }\n};\n\nriot.control.on(riot.EVT.productSearchItemSuccess, function (searchitems) {\n  _this.productItems = searchitems;\n\n  _this.countItems = [];\n  _this.update();\n});\n\nthis.clearAction = function (e) {\n  _this.search.value = '';\n  _this.search.focus();\n  clearSearch('');\n};\n\nriot.control.on(riot.EVT.productUpdateItemSuccess, function (item) {\n  var index = _.indexOf(_this.productItems, _.find(_this.productItems, { _id: item._id }));\n\n  _.assign(_this.productItems[index], { isUpdated: true });\n  _this.update();\n});\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/product/productitems.tag\n **/","import { addCommas, formattedTime } from '../../helper.js';\nriot.tag2('salesitem', '<div class=\"row sales-item-summary\"> <div class=\"seven columns sales-item-date\" onclick=\"{toggle}\"> {this.created_}<br><small>({this.itemTotal} produk)</small> </div> <div class=\"four columns u-text-right sales-item-total\" onclick=\"{toggle}\"> {this.grandtotal_} </div> <div class=\"one columns\"><a href=\"#print?sid={this._id}\">🖨</a></div> </div> <div class=\"sales-item-detail\" show=\"{this.isDetail}\"> <div class=\"row\" each=\"{this.items}\"> <div class=\"seven columns sales-item-number ellipsis\"> <small>&nbsp;➜ {title} // {price} x {qty}</small> </div> <div class=\"four columns u-text-right\"><small>{price*qty}</small></div> <div class=\"one columns\">&nbsp;</div> </div> </div>', '', '', function(opts) {\nvar _this = this;\n\nthis.isDetail = false;\n\nthis.on('update', function () {\n  _this.created_ = formattedTime(_this.created);\n  _this.grandtotal_ = addCommas(_this.total);\n  _this.itemTotal = _this.items.length;\n});\n\nthis.toggle = function (e) {\n  _this.isDetail = !_this.isDetail;\n  _this.update();\n};\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/sales/salesitem.tag\n **/","\n\n\nriot.tag2('about', '<div class=\"container about\"> <div class=\"row\"> <div class=\"twelve columns\"> <h3>AlBarokah {version} </h3> <p>AlBarokah adalah aplikasi POS Retail didedikasikan untuk UKM (Usaha Kecil Menengah).</p> Keunggulan AlBarokah: <ul> <li><u>Murah</u>; Tanpa internet; Tanpa install server</li> <li><u>Mudah</u>; Multi platform (Windows, Linux, Mac);</li> </ul> <hr> <p>Bantu kami untuk mengembangkan AlBarokah dengan <a href=\"https://github.com/klanjabrik/albarokah/issues\" target=\"_blank\">mengirimkan <i>error</i>/<i>bugs</i> &amp; untuk mendapatkan informasi versi terbaru&raquo;</a></p> </div> </div> </div>', '', '', function(opts) {\nvar _this = this;\n\nthis.on('mount', function () {\n  _this.version = riot.AppVersion;\n  _this.update();\n});\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/about.tag\n **/","\nriot.tag2('configurations', '<div class=\"container conf\"> <div class=\"row\"> <div class=\"twelve columns\"> <h3>Konfigurasi</h3> <h6>Nama Toko</h6> <input type=\"text\" name=\"shopName\" class=\"u-full-width\" value=\"{shopname}\" placeholder=\"Nama toko\" autofocus=\"true\" oninput=\"{edit}\"> <h6>Timezone (UTC)</h6> <select onchange=\"{edit_timezone}\" id=\"timezone_select\"> <option each=\"{timezoneData}\" value=\"{hourdiff}\" __selected=\"{selected}\">UTC {hourdiff > 0 ? \\'+\\'+hourdiff : hourdiff}</option> </select> </select> <h6>Gambar Latar Belakang</h6> <p>Ganti gambar latar belakang dengan mengganti <em>file</em> <u>background.jpg</u> file. </p> </div> </div> </div>', '', '', function(opts) {\nvar _this = this;\n\nvar alerty = require('alerty');\nvar self = this;\nthis.shopname = riot.shopname;\nthis.timezoneData = [];\n\nthis.on('mount', function () {\n  riot.control.trigger(riot.EVT.shopLoadData);\n});\n\nriot.control.on(riot.EVT.shopLoadDataSuccess, function (shop) {\n  riot.shopname = shop.name ? shop.name : riot.shopname;\n  riot.timezone = shop.timezone ? shop.timezone : riot.timezone;\n\n  _this.shopname = riot.shopname;\n\n  _this.timezoneData = [{ hourdiff: -12, selected: riot.timezone == -12 ? true : false }, { hourdiff: -11, selected: riot.timezone == -11 ? true : false }, { hourdiff: -10, selected: riot.timezone == -10 ? true : false }, { hourdiff: -9, selected: riot.timezone == -9 ? true : false }, { hourdiff: -8, selected: riot.timezone == -8 ? true : false }, { hourdiff: -7, selected: riot.timezone == -7 ? true : false }, { hourdiff: -6, selected: riot.timezone == -6 ? true : false }, { hourdiff: -5, selected: riot.timezone == -5 ? true : false }, { hourdiff: -4, selected: riot.timezone == -4 ? true : false }, { hourdiff: -3.5, selected: riot.timezone == -3.5 ? true : false }, { hourdiff: -3, selected: riot.timezone == -3 ? true : false }, { hourdiff: -2, selected: riot.timezone == -2 ? true : false }, { hourdiff: -1, selected: riot.timezone == -1 ? true : false }, { hourdiff: 0, selected: riot.timezone == 0 ? true : false }, { hourdiff: 1, selected: riot.timezone == 1 ? true : false }, { hourdiff: 2, selected: riot.timezone == 2 ? true : false }, { hourdiff: 3, selected: riot.timezone == 3 ? true : false }, { hourdiff: 4, selected: riot.timezone == 4 ? true : false }, { hourdiff: 4.5, selected: riot.timezone == 4.5 ? true : false }, { hourdiff: 5, selected: riot.timezone == -5 ? true : false }, { hourdiff: 5.5, selected: riot.timezone == 5.5 ? true : false }, { hourdiff: 5.75, selected: riot.timezone == 5.75 ? true : false }, { hourdiff: 6, selected: riot.timezone == 6 ? true : false }, { hourdiff: 6.5, selected: riot.timezone == 6.5 ? true : false }, { hourdiff: 7, selected: riot.timezone == 7 ? true : false }, { hourdiff: 8, selected: riot.timezone == 8 ? true : false }, { hourdiff: 9, selected: riot.timezone == 9 ? true : false }, { hourdiff: 9.5, selected: riot.timezone == 9.5 ? true : false }, { hourdiff: 10, selected: riot.timezone == 10 ? true : false }, { hourdiff: 11, selected: riot.timezone == 11 ? true : false }, { hourdiff: 12, selected: riot.timezone == 12 ? true : false }, { hourdiff: 13, selected: riot.timezone == 13 ? true : false }];\n  _this.update();\n});\n\nthis.edit = function (e) {\n  var val_ = e.target.value;\n  document.getElementById('home').innerHTML = e.target.value;\n  riot.control.trigger(riot.EVT.shopSaveName, e.target.value);\n  riot.isNewUser = false;\n};\n\nthis.edit_timezone = function (e) {\n  var newTimezone = document.getElementById(\"timezone_select\").options[e.target.selectedIndex].value;\n\n  riot.timezone = newTimezone;\n  riot.control.trigger(riot.EVT.shopSaveTimezone, newTimezone);\n  riot.isNewUser = false;\n};\n\nriot.control.on(riot.EVT.shopSaveSuccess, function (item) {\n  alerty.toasts(\"SUCCESS: Konfigurasi berhasil diperbaharui\", { place: 'top', bgColor: '#FF8552', time: 2500 });\n  _this.update();\n});\n\nriot.control.on(riot.EVT.shopUpdateSuccess, function (item) {\n  alerty.toasts(\"SUCCESS: Konfigurasi berhasil diperbaharui\", { place: 'top', bgColor: '#FF8552', time: 2500 });\n  _this.update();\n});\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/configurations.tag\n **/","\nriot.tag2('database', '<div class=\"container conf\"> <div class=\"row\"> <div class=\"twelve columns\"> <h3>Database</h3> <p>File CSV digunakan untuk aplikasi excel (spreadsheet), sedangkan file JSON digunakan untuk export import data antar aplikasi ALBarokah.</p> <hr> <ul> <li>Export Produk:&nbsp;&nbsp;<a href=\"\">[CSV]</a>&nbsp;&nbsp;<a href=\"\">[JSON]</a></li> <li>Export Penjualan:&nbsp;&nbsp;<a href=\"\">[CSV]</a>&nbsp;&nbsp;<a href=\"\">[JSON]</a></li> </ul> <hr> <ul> <li>Import Produk:&nbsp;&nbsp;<a href=\"\">[CSV]</a>&nbsp;&nbsp;<a href=\"\">[JSON]</a></li> <li>Import Penjualan:&nbsp;&nbsp;<a href=\"\">[CSV]</a>&nbsp;&nbsp;<a href=\"\">[JSON]</a></li> </ul> </div> </div> </div>', '', '', function(opts) {\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/database.tag\n **/","\n\n\nriot.tag2('help', '<div class=\"container about\"> <div class=\"row\"> <div class=\"twelve columns\"> <h3>Panduan</h3> <h6>1. Bagaimana menghapus produk yang sudah diinput di <a href=\"#home\">kasir</a>?</h6> <p>Fokuskan cursor pada kotak isian jumlah, kemudian ketikkan angka 0 (nol), lalu tekan enter/return.</p> <hr> <h6>2. Bagaimana melihat produk-produk yang dibeli pada suatu <a href=\"#sales\">penjualan</a>?</h6> <p>Tekan area pada baris penjualan yang dimaksud.</p> <hr> <h6>3. Export data penjualan ke excel?</h6> <p>Masuk ke halaman <a href=\"#sales\">Penjualan</a>, kemudian pilih tanggal penjualan, setelah itu <em>klik</em> tautan Simpan CSV.</p> </div> </div> </div>', '', '', function(opts) {\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/help.tag\n **/","import '../components/cart/cartitems.tag';\nimport '../components/cart/cartproductitems.tag';\nimport { addCommas } from '../helper.js';\n\nriot.tag2('home', '<div class=\"container pos\"> <div class=\"row\"> <div class=\"seven columns pos-cart-column\"> <div class=\"pos-cart\"> <div class=\"wrap_autocomplete\" show=\"{!isNewUser && isProductReady}\"> <autocomplete min=\"1\" mode=\"contains\"></autocomplete> </div> <cartitems></cartitems> </div> </div> <div class=\"five columns pos-product-column\"> <div class=\"pos-product\"> <div class=\"row title\"> <div class=\"six columns caption\"> Daftar Produk </div> <div class=\"six columns u-text-right\"> <a href=\"#products\">➕</a> </div> </div> <div class=\"pos-product-item\"> <cartproductitems></cartproductitems> </div> </div> </div> </div> </div> </div>', '', '', function(opts) {\nvar tag = this;\ntag.isNewUser = riot.isNewUser;\ntag.isProductReady = false;\n\nriot.control.on(riot.EVT.isProductReady, function (status) {\n  tag.isProductReady = status;\n  tag.update();\n});\n\nriot.control.on(riot.EVT.isNewUser, function (status) {\n  tag.isNewUser = status;\n  tag.update();\n});\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/home.tag\n **/","import { addCommas, formattedTime } from '../helper.js';\n\nriot.tag2('print', '<div class=\"container pos-print\"> <div class=\"row\"> <div class=\"twelve columns\"> <div class=\"pos-cart\"> <table width=\"100%\" class=\"pos-print\"> <caption> {shopname} <hr> </caption> <thead> <tr> <td><strong>Barang</strong></td> <td class=\"u-text-center\"><strong>Jumlah</strong></td> <td class=\"u-text-right\"><strong>Harga</strong></td> <td class=\"u-text-right\"><strong>Subtotal</strong></td> </tr> </thead> <tbody> <tr each=\"{salesItems}\"> <td>{title}</td> <td class=\"u-text-center\">{qty}</td> <td class=\"u-text-right\">{price}</td> <td class=\"u-text-right\">{subtotal}</td> </tr> </tbody> <tfoot> <tr> <td colspan=\"3\"><strong>Total</strong></td> <td class=\"u-text-right\"><strong>{total}</strong></td> </tr> <tr> <td colspan=\"3\"><strong>Disc ({disc}%)</strong></td> <td class=\"u-text-right\"><strong>{disctotal}</strong></td> </tr> <tr> <td colspan=\"3\"><strong>Grand Total</strong></td> <td class=\"u-text-right\"><strong>{grandtotal}</strong></td> </tr> <tr> <td colspan=\"1\">Dibayar tunai: {cash}</td> <td colspan=\"3\" class=\"u-text-right\">Kembalian: {kembalian}</td> </tr> <tr> <td colspan=\"4\" class=\"u-text-center\">{created}<br>Terima kasih atas kunjungan Anda.</td> </tr> </tfoot> </table> <table width=\"100%\" class=\"pos-print-action\"> <tr> <td class=\"u-text-center\"><a href=\"#\" onclick=\"window.print();\" class=\"button button-primary u-full-width\">Web Print</a></td> </tr> </table> </div> </div> </div> </div>', '', '', function(opts) {\nvar _this = this;\n\nthis.salesItems = [];\nthis.total = 0;\nthis.disc = 0;\nthis.disctotal = 0;\nthis.grandtotal = 0;\nthis.cash = 0;\nthis.kembalian = 0;\nthis.created = '';\nthis.ready = false;\n\nthis.shopname = riot.shopname;\n\nthis.on('mount', function () {\n  var q = riot.route.query();\n  if (typeof q.cid !== \"undefined\") {\n    console.log('cart');\n    riot.control.trigger(riot.EVT.cancelCart, 'print');\n    riot.control.trigger(riot.EVT.salesGet, q.cid);\n  } else if (typeof q.sid !== \"undefined\") {\n    console.log('sales');\n    riot.control.trigger(riot.EVT.salesGet, q.sid);\n  }\n});\n\nthis.on('update', function () {\n  _this.shopname = riot.shopname;\n});\n\nthis.on('updated', function () {\n  if (_this.ready) {\n    _this.ready = false;\n    window.print();\n  }\n});\n\nriot.control.on(riot.EVT.salesGetSuccess, function (salesitem) {\n  _this.salesItems = salesitem.items;\n  _this.total = addCommas(salesitem.total);\n  _this.disc = salesitem.discount;\n\n  var disctotal_ = salesitem.total * (salesitem.discount / 100);\n  _this.disctotal = addCommas(disctotal_);\n\n  var grandtotal_ = salesitem.total - disctotal_;\n  _this.grandtotal = addCommas(grandtotal_);\n  _this.cash = addCommas(salesitem.cash);\n  _this.kembalian = addCommas(salesitem.cash - grandtotal_);\n  _this.ready = true;\n\n  _this.created = formattedTime(salesitem.created);\n\n  _this.update();\n});\n\nthis.backpage = function (e) {\n  window.history.go(-1);\n};\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/print.tag\n **/","\nimport '../components/product/addproduct.tag';\nimport '../components/product/productitems.tag';\n\n\nriot.tag2('products', '<div class=\"container products\"> <div class=\"row\"> <div class=\"twelve columns\"> <h3>Produk</h3> <h6>Tambah Produk</h6> <div class=\"row product-add\"> <addproduct></addproduct> </div> <br> <h6>Daftar Produk</h6> <div class=\"product-items\"> <productitems></productitems> </div> </div> </div> </div>', '', '', function(opts) {\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/products.tag\n **/","\nimport '../components/sales/salesitem.tag';\n\nimport { addCommas, formattedTime } from '../helper.js';\n\nriot.tag2('sales', '<div class=\"container sales\"> <div class=\"row\"> <div class=\"twelve columns\"> <h3>Penjualan</h3> <div class=\"sales-items\"> <div class=\"sales-search row\"> <div class=\"twelve columns\"> <input type=\"text\" id=\"datepicker\" class=\"u-full-width\" placeholder=\"Filter tanggal penjualan\"> </div> </div> <div class=\"sales-item\"> <div class=\"row sales-item-grandtotal\"> <div class=\"six columns\"><strong>Grand Total {currentDateLabel}</strong></div> <div class=\"six columns u-text-right\"><span>{salesTotal}</span></div> </div> <br> <div class=\"row\"> <div class=\"six columns\"> <h6>Rincian Penjualan</h6> </div> <div class=\"six columns u-text-right\"> <a href=\"javascript:void 0\" onclick=\"{exportCsv}\">💾 &nbsp;Simpan CSV</a> </div> </div> <div class=\"row sales-item-header\" if=\"{!no_data}\"> <div class=\"seven columns sales-item-date\"> <strong>Waktu</strong> </div> <div class=\"four columns u-text-right sales-item-total\"> <strong>Total</strong> </div> <div class=\"one columns sales-item-number\"> &nbsp; </div> </div> <salesitem each=\"{salesItems}\" data=\"{this}\"></salesitem> <div if=\"{no_data}\"> <p>🛍&nbsp;&nbsp;Belum ada data penjualan.</p> </div> <div class=\"pagination u-text-center\"> <ul> <li each=\"{countItems}\" class=\"{active: done}\"> <a href=\"./#sales?page={id}&amp;date={currentDate}\">{id}</a> </li> </ul> </div> </div> </div> </div> </div> </div>', '', '', function(opts) {\nvar _this = this;\n\nvar alerty = require('alerty');\nvar pikaday = require('pikaday');\n\nthis.salesItems = [];\nthis.countItems = [];\n\nthis.no_data = false;\nthis.salesTotal = 0;\n\nthis.currentDate = Math.floor(Date.now() / 1000);\nthis.currentPage = 1;\n\nthis.currentDateLabel = '';\n\nvar q = riot.route.query();\n\nthis.on('mount', function () {\n  var picker = new pikaday({\n    field: document.getElementById('datepicker'),\n    format: 'DD/MMMM/YYYY',\n    onSelect: function onSelect(choosenDate) {\n      var date = new Date(choosenDate);\n\n      var day = \"0\" + date.getDate();\n\n      var month = \"0\" + (date.getMonth() + 1);\n\n      var year = date.getFullYear();\n\n      var choosenDate_ = year + \"-\" + month.substr(-2) + \"-\" + day.substr(-2);\n      console.log(choosenDate_);\n      setCurrentDate(new Date(choosenDate_).getTime() / 1000);\n      loadSalesData();\n    }\n  });\n  if (!q.page) q.page = _this.currentPage;\n  if (!q.date) q.date = _this.currentDate;\n  setCurrentPage(q.page);\n  setCurrentDate(q.date);\n  loadSalesData();\n});\n\nvar loadSalesData = function loadSalesData() {\n  document.getElementById('preloader').style.display = \"\";\n  var params = {\n    page: getCurrentPage(),\n    date: getCurrentDate()\n  };\n\n  riot.control.trigger(riot.EVT.salesLoadItems, { page: params.page, date: params.date });\n  riot.control.trigger(riot.EVT.salesTotal, params.date);\n};\n\nriot.control.on(riot.EVT.salesLoadItemsSuccess, function (salesItems) {\n  _this.salesItems = salesItems.docs.map(function (r) {\n    return r;\n  });\n\n  var array = _.range(0, salesItems.total_rows / riot.pageSize);\n  _this.countItems = _.map(array, function (value, key) {\n    return { id: key + 1, done: q.page == key + 1 ? true : false };\n  });\n  document.getElementById('preloader').style.display = \"none\";\n  _this.update();\n});\n\nriot.control.on(riot.EVT.salesTotalSuccess, function (salesTotal) {\n  _this.salesTotal = addCommas(salesTotal);\n  _this.currentDateLabel = formattedTime(getCurrentDate(), true);\n\n  if (salesTotal > 0) {\n    _this.no_data = false;\n  } else {\n    _this.no_data = true;\n  }\n\n  _this.update();\n});\n\nvar setCurrentDate = function setCurrentDate(currDate) {\n  _this.currentDate = currDate;\n};\n\nvar getCurrentDate = function getCurrentDate() {\n  return _this.currentDate;\n};\n\nvar setCurrentPage = function setCurrentPage(currPage) {\n  _this.currentPage = currPage;\n};\n\nvar getCurrentPage = function getCurrentPage() {\n  return _this.currentPage;\n};\n\nthis.exportCsv = function (e) {\n\n  if (_.size(_this.salesItems) <= 0) {\n    alerty.toasts(\"ERROR: Data penjualan kosong\", { place: 'top', bgColor: 'black', time: 2500 });\n    return false;\n  } else {\n    var dataHeader = \"Nomor, Tanggal, Produk, Jumlah, Harga, Sub Total\\n\";\n    var csvContent = \"data:text/csv;charset=utf-8,\";\n    csvContent += dataHeader;\n    var data = [],\n        total = 0;\n\n    _.each(_this.salesItems, function (value, prop) {\n      var dataString = \"\";\n      var _id = value._id;\n      var created = formattedTime(value.created);\n\n      _.each(value.items, function (value_, prop_) {\n        total += parseFloat(value_.subtotal);\n\n        dataString += _id + \", \" + created + \", \" + value_.title + \", \" + value_.qty + \", \" + value_.price + \", \" + value_.subtotal + \"\\n\";\n      });\n\n      csvContent += dataString;\n    });\n\n    var dataTotal = \", , , , , \" + total;\n    csvContent += dataTotal;\n\n    var encodedUri = encodeURI(csvContent);\n    var link = document.createElement(\"a\");\n    link.setAttribute(\"href\", encodedUri);\n    link.setAttribute(\"download\", \"sales_\" + formattedTime(getCurrentDate(), true) + \".csv\");\n    document.body.appendChild(link);\n\n    link.click();\n  }\n};\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/sales.tag\n **/","import Riotcontrol from 'riotcontrol';\n\nriot.control = Riotcontrol;\n\n// event names\n\nriot.EVT = {\n  // Shop\n  shopLoadData            : 'shop_load_name',\n  shopLoadDataSuccess     : 'shop_load_name_success',\n  shopSaveSuccess         : 'shop_save_success',\n  shopUpdateSuccess       : 'shop_update_success',\n  shopSaveData            : 'shop_save_data',\n  shopSaveName            : 'shop_save_name',\n  shopSaveTimezone        : 'shop_save_timezone',\n  // Products\n  productLoadItems         : 'product_load_items',\n  productLoadItemsSuccess  : 'product_load_items_success',\n  productLoadItems_        : 'product_load_items_',\n  productLoadItemsSuccess_ : 'product_load_items_success_',\n  productSaveItem          : 'product_save_item',\n  productSaveItemSuccess   : 'product_save_item_success',\n  productEditItemOn        : 'product_edit_item_on',\n  productUpdateItemSuccess : 'product_update_item_success',\n  productRemoveItem        : 'product_remove_item',\n  productRemoveItemSuccess : 'product_remove_item_success',\n  productSearchItem        : 'product_search_product',\n  productSearchItemSuccess : 'product_search_product_success',\n  // Cart\n  cartLoadItems         : 'cart_load_items',\n  cartLoadItemsSuccess  : 'cart_load_items_success',\n  cartSaveItem          : 'cart_save_items',\n  cartSaveItemSuccess   : 'cart_save_item_success',\n  cartEditItemOn        : 'cart_edit_item_on',\n  cartUpdateItemSuccess : 'cart_update_item_success',\n  cartRemoveItem        : 'cart_remove_item',\n  cartRemoveItemSuccess : 'cart_remove_item_success',\n  cartSearchItem        : 'cart_search_item',\n  cartSearchItemSuccess : 'cart_search_item_success',\n  cancelCart            : 'cancel_cart',\n  cancelCartSuccess     : 'cancel_cart_success',\n  cancelCartPrintSuccess: 'cancel_cart_print_success',\n  // Sales\n  salesSave              : 'sales_save',\n  salesSaveSuccess       : 'sales_save_success',\n  salesGet               : 'sales_get',\n  salesGetSuccess        : 'sales_get_success',\n  salesLoadItems         : 'sales_load_items',\n  salesLoadItemsSuccess  : 'sales_load_items_success',\n  salesTotal             : 'sales_total',\n  salesTotalSuccess      : 'sales_total_success',\n  salesSearchItem        : 'sales_search',\n  salesSearchItemSuccess : 'sales_search_success',\n  // Global\n  clearDb               : 'clear_db',\n  clearDbSuccess        : 'clear_db_success',\n  isProductReady        : 'is_product_ready',\n  isNewUser             : 'is_new_user',\n  allowAdd              : 'allow_add',\n  focusQty              : 'focus_qty'\n\n}\n\n// var PouchDB = require('pouchdb');\n// PouchDB.plugin(require('pouchdb-find'));\n\nvar _db = new PouchDB('albarokah');\n// _db.destroy().then(function () {\n//   // database destroyed\n// }).catch(function (err) {\n//   // error occurred\n// })\nriot.db = _db\nriot.AppVersion = \"2.1\"\nriot.pageSizeProductCart = 20\nriot.pageSize = 50\nriot.offset = riot.pageSize\nriot.timezone = 7\nriot.shopname = \"البركة\"\nriot.isNewUser = false\n\n// var _ = require('lodash');\n// var moment = require('moment');\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/event-helper.js\n **/","// import './css/index.css';\n\nimport './event-helper';\nimport './stores/shopstore';\nimport './stores/cartstore';\nimport './stores/productstore';\nimport './stores/salestore';\nimport './router.js';\n\nimport pikaday from 'pikaday';\n\n/* GET SHOP NAME */\nvar mrShop = {\n\tmap: function (doc) {\n\t  if (doc.type==\"shop\") {\n\t    emit(doc.value, null);\n\t  }\n\t}\n};\nriot.db.query(mrShop, {include_docs : false}).then(function (result) {\n  if(result.total_rows > 0) {\n    result.rows.map(function(r){ \n      if(r.id === \"shop_name\") {\n        riot.shopname = r.key\n        document.getElementById('home').innerHTML = riot.shopname;\n      }\n      else if(r.id === \"shop_timezone\") \n      {\n        riot.timezone = r.key\n      }\n    })\n    riot.isNewUser = false;\n  } else {\n    riot.isNewUser = true;\n  }\n}).catch(function (err) {\n\tconsole.log(err);\n});\n\n// var Mousetrap = require('mousetrap');\n\n/* SHORTCUT */\nMousetrap.bindGlobal('ctrl+1', function() { \n  document.getElementById('home').click()\n  // document.querySelector('[name=\"acinput\"]').focus();\n});\nMousetrap.bindGlobal('ctrl+p', function() { riot.route(\"products\"); });\nMousetrap.bindGlobal('ctrl+r', function() { riot.route(\"sales\"); });\n\nMousetrap.bindGlobal('ctrl+s', function() { document.querySelector('[name=\"acinput\"]').focus() });\nMousetrap.bindGlobal('ctrl+t', function() { \n  document.querySelector('[name=\"cash\"]').focus();\n  document.querySelector('[name=\"cash\"]').select();\n});\nMousetrap.bindGlobal('ctrl+m', function() { \n  // document.querySelector('[name=\"cash\"]').focus() \n  var parentElement = document.getElementById(\"myDropdown\");\n  // console.log(parentElement.childNodes[1].childNodes[2]);\n  // var uhi = parentElement.childNodes[1].childNodes[2];\n  // uhi.focus();\n  document.getElementsByClassName(\"dropbtn\")[0].focus();\n  document.getElementById(\"myDropdown\").classList.toggle(\"show\");\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import './pages/home.tag'\nimport './pages/products.tag'\nimport './pages/print.tag'\nimport './pages/sales.tag'\nimport './pages/help.tag'\nimport './pages/about.tag'\nimport './pages/configurations.tag'\nimport './pages/database.tag'\n\n\n// we need this to easily check the current route from every component \nriot.routeState = {\n  view : ''\n};\n\nclass Router{\n\n  constructor(){\n    this._currentView = null;\n    this._views = ['home', 'products', 'print', 'sales', 'configurations', 'database', 'help','about'];\n    this._defaultView = 'home';\n    \n    \n    riot.route.start(false);\n    riot.route(this._handleRoute.bind(this));\n    riot.route.exec(this._handleRoute.bind(this));\n  }\n\n  _handleRoute(view){\n    // load default view, if view is not in views list\n    if(this._views.indexOf(view) === -1){\n      return riot.route(this._defaultView);\n    }\n    this._loadView(view); \n  }\n\n  _loadView(view){\n    if (this._currentView) {\n      this._currentView.unmount(true);\n    }\n    // console.log(view)\n    document.title = \"Point of Sales // \" + view.toUpperCase();\n    riot.routeState.view = view;\n    this._currentView = riot.mount('#riot-app', view)[0];\n  }\n\n}\n\nexport default new Router();\n\n\n/** WEBPACK FOOTER **\n ** ./src/router.js\n **/","class CartStore{\n\n  constructor(){\n    riot.observable(this);\n    this.cartItems = [];\n\n    this.db = riot.db;\n    // this.db = new PouchDB('todos');\n    // this.remoteCouch = true;\n\n    this.bindEvents();\n  }\n\n  bindEvents(){\n    var self = this;\n    let cartTriggerChangeds = (d) => {\n      this.cartItems = d;\n      this.trigger(riot.EVT.cartLoadItemsSuccess, this.cartItems);  \n      // console.log(d);\n    };\n\n    let clearDB = () => {\n      this.db.destroy('todos').then(function() { \n        self.db = new PouchDB('todos');\n      });\n      this.trigger(riot.EVT.clearDbSuccess, []);  \n    }\n\n    let cancelCart = () => {\n      self.db.allDocs({startkey: 'cartitem_', endkey: 'cartitem_\\uffff'}).then(function (result) {\n        // Promise isn't supported by all browsers; you may want to use bluebird\n        return Promise.all(result.rows.map(function (row) {\n          return self.db.remove(row.id, row.value.rev);\n        }));\n        \n      }).then(function () {\n        // this.trigger(riot.EVT.cancelCartSuccess, []);  \n        // done!\n      }).catch(function (err) {\n        // error!\n      });\n\n      // this.db.allDocs({\n      //     startkey: 'cartitem_', \n      //     endkey: 'cartitem_\\uffff',\n      //   }, \n      //   function(err, doc) {\n      //     // console.log(doc.rows);\n      //     self.db.get(doc).then(function(doc) {\n      //       return db.remove(doc);\n      //     }).then(function (result) {\n      //       // handle result\n      //     }).catch(function (err) {\n      //       console.log(err);\n      //     });\n      // });\n    }\n\n    let cartLoadItems = () => {\n      /* ALLDOCS METHOD */\n      // this.db.allDocs({\n      //     // descending: true,\n      //     startkey: 'cartitem_', \n      //     endkey: 'cartitem_\\uffff', \n      //     include_docs: true}, function(err, doc) {\n      //       console.log(doc);\n      //   cartTriggerChangeds(doc.rows.map(function(r){ return r.doc;}));\n      // });\n\n      /* QUERY METHOD */\n      // var myMapReduceFun2 = {\n      //   map: function (doc) {\n      //     if (doc.type==\"cartitem\") {\n      //       // emit([doc.name.toLowerCase(), doc.cat.toLowerCase()])\n      //       emit(doc.name, null);\n      //     }\n      //   }\n      // };\n      // this.db.query(myMapReduceFun2, {include_docs : true, descending: true}).then(function (result) {\n      //   cartTriggerChangeds(result.rows.map(function(r){ return r.doc;}));\n      //   // console.log(result)\n        \n      // }).catch(function (err) {\n      //   console.log(err);\n      // });\n\n      /* FIND METHOD */\n      self.db.createIndex({\n           index: {\n            fields: ['created', 'type'],\n            name: 'mycartindex',\n            ddoc: 'mydesigndoc',\n            type: 'json',\n          }\n      }).then(function() {\n          return self.db.find({\n              selector: {'created': {$gt: 0}, 'type': 'cartitem'},\n              fields: ['created', 'price','type','title','qty', '_id'],\n              sort: [{'created': 'desc'}],\n          }).then(function (result) {\n            // console.log(result);\n            // return result.docs;\n            cartTriggerChangeds(result.docs.map(function(r){ return r;}));\n            // self.trigger(riot.EVT.searchItemSuccess, result);\n            // return Promise.resolve(result);\n          }).catch(function (err) {\n            console.log(err);\n          });\n      }).then(function () {\n        return self.db.getIndexes().then(function (result) {\n          result.indexes.forEach(function (value, i) {\n            if(value.name == \"mycartindex\") {\n              self.db.deleteIndex({\n                \"name\": \"mycartindex\",\n                \"ddoc\": value.ddoc,\n              })  \n            }\n          });\n        }).catch(function (err) {\n          // ouch, an error\n        });\n      });\n    }\n\n    let cartAddTodo = (item) => {\n      // console.log(item);\n      this.db.put(item, function callback(err, result) {\n        if (!err) {\n          // console.log('ADD')\n          self.trigger(riot.EVT.cartSaveItemSuccess, item);\n        } else {\n          if(err.status == 409) {\n            cartUpdateTodo(item, {mode:'inc', qty: 1})\n          } else {\n            console.log(err);\n          }\n        }\n      }); \n    };\n\n    let cartUpdateTodo = (item, params) => {\n      this.db.get(item._id).then(function (origDoc) {\n        item._rev = origDoc._rev;\n        \n        if(params.qty) {\n          if(params.mode ==\"inc\")\n            item.qty = parseInt(origDoc.qty)+parseInt(params.qty);\n          else\n            item.qty = parseInt(params.qty);\n        }\n        _.remove(item, { '_rev': item._rev });\n        // console.log('UPDATE')\n        // console.log(item)\n        self.trigger(riot.EVT.cartUpdateItemSuccess, item);\n\n        return self.db.put(item);\n      }).catch(function (err) {\n        if (err.status === 409) {\n          console.log(err);\n        } else { // new doc\n          // return self.db.put(item);\n        }\n      });\n    };\n\n    let cartRemoveTodo = (item) => {\n      this.db.get(item._id).then(function (origDoc) {\n        item._rev = origDoc._rev;\n        \n        self.db.remove(item);\n        return self.trigger(riot.EVT.cartRemoveItemSuccess, item);\n\n      }).catch(function (err) {\n        if (err.status === 409) {\n          console.log(err)\n          // location.reload()\n        } else { // new doc\n          return self.db.remove(item);\n        }\n      });\n    };\n\n    let cartSearchItem = (text) => {\n      var s = text.text;\n      // console.log(s.text);\n      /* MAP QUERY METHOD */\n      // var myMapReduceFun = {\n      //   map: function (doc) {\n      //     if (doc.type==\"item\") {\n      //       emit(doc.title, null);\n      //     }\n      //   }\n      // };\n      // this.db.query(myMapReduceFun, {startkey: s, endkey: s+'\\uffff', limit: 10}).then(function (result) {\n      //   self.trigger(riot.EVT.cartSearchItemSuccess, result.rows);\n      //   console.log(\"Query\");\n      //   console.log(result.rows);\n      //   // console.log(s);\n      //   return Promise.resolve(result);\n      // }).catch(function (err) {\n      //   console.log(err);\n      // });\n\n      /* FIND METHOD */\n      /* CATATAN PENTING: \n      Perlu dikembangkan untuk membuat INDEX terlebih dahulu */\n      \n      var regexp = new RegExp(s, 'i'); // Case Insensitive\n      this.db.find({\n        selector: {\n            type: \"item\",\n            title: {$regex: regexp}\n          }\n      }).then(function (result) {\n        // console.log(result);\n        self.trigger(riot.EVT.cartSearchItemSuccess, result.docs);\n      }).catch(function (err) {\n        console.log(err);\n      });\n\n      /* FIND METHOD */\n      // this.db.createIndex({\n      //   index: {\n      //       fields: ['title'],\n      //       limit:2,\n      //       name: 'myindex',\n      //     }\n      // }).then(function () {\n        \n      //   return self.db.find({\n      //     selector: {title: {$regex: s.text}},\n      //     limit:5\n      //   }).then(function (result) {\n      //     // console.log(result);\n      //     self.trigger(riot.EVT.searchItemSuccess, result);\n      //     return Promise.resolve(result);\n      //   }).catch(function (err) {\n      //     console.log(err);\n      //   });\n      // }).then(function () {\n      //   return self.db.getIndexes().then(function (result) {\n      //     result.indexes.forEach(function (value, i) {\n      //       if(value.name == \"myindex\") {\n      //         self.db.deleteIndex({\n      //           \"name\": \"myindex\",\n      //           \"ddoc\": value.ddoc,\n      //         })  \n      //       }\n      //     });\n      //   }).catch(function (err) {\n      //     // ouch, an error\n      //   });\n      // });\n    }\n\n    this.on(riot.EVT.cartLoadItems, () => {\n      cartLoadItems();\n    });\n\n    this.on(riot.EVT.cartRemoveItem, (opts) => {\n      cartRemoveTodo(opts);\n    });\n\n    this.on(riot.EVT.cartSaveItem, (opts) => {\n      \n      var _myId = opts.title;\n      _myId = _myId.replace(/\\W/g,'');\n\n      var createdOn = Math.floor(Date.now() / 1000)\n\n      var item = {\n        _id: 'cartitem_'+_myId,\n        title: opts.title,\n        qty: 1,\n        type: 'cartitem',\n        created: createdOn\n      };\n\n      this.db.get('item_'+_myId).then(function (origDoc) {\n        item.price = origDoc.price;\n        cartAddTodo(item);\n      }).catch(function (err) {\n        if (err.status === 409) {\n          console.log(err);\n        } else { // new doc\n          console.log(err)\n        }\n      });\n\n\n\n      \n    });\n\n    this.on(riot.EVT.clearDb, () => {\n      clearDB();\n    });\n\n    this.on(riot.EVT.cartSearchItem, (s) => {\n      cartSearchItem(s);\n    });\n\n    this.on(riot.EVT.cancelCart, (mode) => {\n      cancelCart();\n      if(mode.print) {\n        // Mode = Print;\n        // console.log(\"print\");\n        // this.trigger(riot.EVT.cancelCartPrintSuccess, []);  \n      } else {\n        this.trigger(riot.EVT.cancelCartSuccess, []);  \n      }\n      \n    });\n\n    this.on(riot.EVT.cartEditItemOn, (s) => {\n      cartUpdateTodo(s, {qty: s.qty})\n    });\n  }\n\n}\n\n// add store to riot control\nlet cartStore = new CartStore();\nriot.control.addStore(cartStore);\n\nexport default cartStore;\n\n\n/** WEBPACK FOOTER **\n ** ./src/stores/cartstore.js\n **/","class ProductStore{\n\n  constructor(){\n    riot.observable(this);\n    this.productItems = [];\n\n    this.db = riot.db;\n    this.edit_id = false;\n    this.pageSizeCart = riot.pageSizeProductCart\n    this.pageSize = riot.pageSize;\n    this.offset = riot.offset;\n    this.bindEvents();\n  }\n\n  bindEvents(){\n    var self = this;\n    let productsTriggerChangeds = (d) => {\n      // console.log(d);\n      // this.productItems = d;\n      this.trigger(riot.EVT.productLoadItemsSuccess, d);  \n    };\n\n    let productLoadItems_ = () => {\n\n      /* FIND METHOD */\n\n      self.db.createIndex({\n           index: {\n            fields: ['title', 'type'],\n            name: 'myproductcartindex',\n            ddoc: 'myproductcartdoc',\n            type: 'json',\n          }\n      }).then(function() {\n          return self.db.find({\n              selector: {'title': {$gt: 0},'type': 'item'},\n              fields: ['created', 'price','type','title', '_id'],\n              sort: [{'title': 'asc'}],\n              limit: self.pageSizeCart, skip: 0,\n              include_docs : true\n          }).then(function (result) {\n            // console.log(result);\n            // return result.docs;\n            // productsTriggerChangeds(result);\n            self.trigger(riot.EVT.productLoadItemsSuccess_, result);  \n            // self.trigger(riot.EVT.searchItemSuccess, result);\n            // return Promise.resolve(result);\n          }).catch(function (err) {\n            console.log(err);\n          });\n      }).then(function () {\n        return self.db.getIndexes().then(function (result) {\n          result.indexes.forEach(function (value, i) {\n            if(value.name == \"myproductcartindex\") {\n              self.db.deleteIndex({\n                \"name\": \"myproductcartindex\",\n                \"ddoc\": value.ddoc,\n              })  \n            }\n          });\n        }).catch(function (err) {\n          // ouch, an error\n        });\n      });\n    }\n\n    let productLoadItems = () => {\n\n      /* MAP QUERY METHOD */\n      // var myMapReduceFun = {\n      //   map: function (doc) {\n      //     if (doc.type==\"item\") {\n      //       // emit([doc.name.toLowerCase(), doc.cat.toLowerCase()])\n      //       emit(doc.title.toLowerCase(), null);\n      //     }\n      //   }\n      // };\n      // this.db.query(myMapReduceFun, {limit: self.pageSize, skip: self.offset, include_docs : true}).then(function (result) {\n      //   return productsTriggerChangeds(result);\n      // }).catch(function (err) {\n      //   console.log(err);\n      // });\n\n      /* FIND METHOD */\n\n      self.db.createIndex({\n           index: {\n            fields: ['created', 'type'],\n            name: 'myproductindex',\n            ddoc: 'myproductdoc',\n            type: 'json',\n          }\n      }).then(function() {\n          return self.db.find({\n              selector: {'created': {$gt: 0}, 'type': 'item'},\n              fields: ['created', 'price','type','title', '_id'],\n              sort: [{'created': 'desc'}],\n              limit: self.pageSize, skip: self.offset, include_docs : true\n          }).then(function (result) {\n            // console.log(result);\n            // return result.docs;\n            productsTriggerChangeds(result);\n            // self.trigger(riot.EVT.searchItemSuccess, result);\n            // return Promise.resolve(result);\n          }).catch(function (err) {\n            console.log(err);\n          });\n      }).then(function () {\n        return self.db.getIndexes().then(function (result) {\n          result.indexes.forEach(function (value, i) {\n            if(value.name == \"myproductindex\") {\n              self.db.deleteIndex({\n                \"name\": \"myproductindex\",\n                \"ddoc\": value.ddoc,\n              })  \n            }\n          });\n        }).catch(function (err) {\n          // ouch, an error\n        });\n      });\n\n      // this.db.allDocs({\n      //   startkey: 'item_', \n      //   endkey: 'item_\\uffff', \n      //   include_docs: true,\n      // }).then(function (result) {\n      //   // handle result\n      //   productsTriggerChangeds(result.rows.map(function(r){ \n      //     return r.doc;\n      //   }));\n      // }).catch(function (err) {\n      //   console.log(err);\n      // });\n    }\n\n    let productAddTodo = (item) => {\n      // console.log(item);\n      this.db.put(item, function callback(err, result) {\n        if (!err) {\n          this.trigger(riot.EVT.productSaveItemSuccess, item);\n        } else {\n          console.log(err);\n        }\n      }.bind(this)); \n    };\n\n    let productUpdateTodo = (item) => {\n      // console.log(item);\n      this.db.get(self.edit_id).then(function (origDoc) {\n        item._rev = origDoc._rev;\n        return this.db.put(item);\n      }).catch(function (err) {\n        if (err.status === 409) {\n          console.log(err);\n        } else { // new doc\n          self.edit_id = false;\n          this.trigger(riot.EVT.productUpdateItemSuccess, item);\n          // console.log(item);\n          return this.db.put(item);\n        }\n      }.bind(this));\n    };\n\n    let productRemoveTodo = (item) => {\n      this.db.get(item._id).then(function (origDoc) {\n        item._rev = origDoc._rev;\n        \n        self.db.remove(item);\n        return self.trigger(riot.EVT.productRemoveItemSuccess, item);\n      }).catch(function (err) {\n        if (err.status === 409) {\n          console.log(err);\n        } else { // new doc\n          return self.db.remove(item);\n        }\n      });\n    };\n\n    let productSearchItem = (text) => {\n      var s = text.text;\n      var regexp = new RegExp(s, 'i'); // Case Insensitive\n      // this.db.find({\n      //   selector: {\n      //       type: \"item\",\n      //       title: {$regex: regexp}\n      //     }\n      // }).then(function (result) {\n      //   console.log(result)\n      //   self.trigger(riot.EVT.productSearchItemSuccess, result.docs);\n      // }).catch(function (err) {\n      //   console.log(err);\n      // });\n      self.db.createIndex({\n           index: {\n            fields: ['title', 'type'],\n            name: 'mysearchproductindex',\n            ddoc: 'mysearchproductdoc',\n            type: 'json',\n          }\n      }).then(function() {\n          return self.db.find({\n              selector: {'title': {$regex: regexp}, 'type': 'item'},\n              fields: ['title', 'type', 'created', 'price', '_id'],\n              // sort: [{'title': 'asc'}],\n              limit: self.pageSize, \n              // skip: self.offset, \n              include_docs : true\n          }).then(function (result) {\n            self.trigger(riot.EVT.productSearchItemSuccess, result.docs);\n          }).catch(function (err) {\n            console.log(err);\n          });\n      }).then(function () {\n        return self.db.getIndexes().then(function (result) {\n          result.indexes.forEach(function (value, i) {\n            if(value.name == \"mysearchproductindex\") {\n              self.db.deleteIndex({\n                \"name\": \"mysearchproductindex\",\n                \"ddoc\": value.ddoc,\n              })  \n            }\n          });\n        }).catch(function (err) {\n          // ouch, an error\n        });\n      });\n    }\n    // let myMapFunction = (doc) => {\n    //     emit(doc.title);\n    // }\n\n    // let searchItem = (text) => {\n    //   var s = text.text;\n    //   // console.log(s.text);\n    //   /* MAP QUERY METHOD */\n    //   var myMapReduceFun = {\n    //     map: function (doc) {\n    //       emit(doc.title, null);\n    //     }\n    //   };\n    //   this.db.query(myMapReduceFun, {startkey: s, endkey: s+'\\uffff'}).then(function (result) {\n    //     self.trigger(riot.EVT.searchItemSuccess, result.rows);\n    //     // console.log(result.rows);\n    //     return Promise.resolve(result);\n    //   }).catch(function (err) {\n    //     console.log(err);\n    //   });\n\n    //   /* FIND METHOD */\n    //   // this.db.createIndex({\n    //   //   index: {\n    //   //       fields: ['title'],\n    //   //       limit:2,\n    //   //       name: 'myindex',\n    //   //     }\n    //   // }).then(function () {\n        \n    //   //   return self.db.find({\n    //   //     selector: {title: {$regex: s.text}},\n    //   //     limit:5\n    //   //   }).then(function (result) {\n    //   //     // console.log(result);\n    //   //     self.trigger(riot.EVT.searchItemSuccess, result);\n    //   //     return Promise.resolve(result);\n    //   //   }).catch(function (err) {\n    //   //     console.log(err);\n    //   //   });\n    //   // }).then(function () {\n    //   //   return self.db.getIndexes().then(function (result) {\n    //   //     result.indexes.forEach(function (value, i) {\n    //   //       if(value.name == \"myindex\") {\n    //   //         self.db.deleteIndex({\n    //   //           \"name\": \"myindex\",\n    //   //           \"ddoc\": value.ddoc,\n    //   //         })  \n    //   //       }\n    //   //     });\n    //   //   }).catch(function (err) {\n    //   //     // ouch, an error\n    //   //   });\n    //   // });\n    // }\n\n    this.on(riot.EVT.productLoadItems_, () => {\n      productLoadItems_();\n    });\n\n    this.on(riot.EVT.productLoadItems, (opts) => {\n      try {\n        this.offset = ((parseFloat(opts.page) - 1) * this.pageSize);\n      } catch(e) {\n        this.offset = riot.offset\n      } \n      productLoadItems();\n    });\n\n    this.on(riot.EVT.productRemoveItem, (opts) => {\n      productRemoveTodo(opts);\n    });\n\n    this.on(riot.EVT.productSaveItem, (opts) => {\n      // console.log(opts);\n      if(opts._id) {\n        self.edit_id = opts._id;\n      }\n\n      var _myId = opts.title;\n      _myId = _myId.replace(/\\W/g,'');\n\n      var createdOn = Math.floor((Date.now() + (riot.timezone*60*60*1000)) / 1000)\n\n      var item = {\n        _id: 'item_'+_myId,\n        title: opts.title,\n        price: opts.price,\n        stock: opts.stock,\n        type: 'item',\n        created: createdOn\n      };\n      \n      if(self.edit_id) {\n        productUpdateTodo(item);\n      } else {\n        productAddTodo(item);\n      }\n\n    });\n\n    // this.on(riot.EVT.clearDb, () => {\n    //   clearDB();\n    // });\n\n    this.on(riot.EVT.productSearchItem, (s) => {\n      productSearchItem(s);\n    });\n  }\n\n}\n\n// add store to riot control\nlet productStore = new ProductStore();\nriot.control.addStore(productStore);\n\nexport default productStore;\n\n\n/** WEBPACK FOOTER **\n ** ./src/stores/productstore.js\n **/","import { toTimestamp, fromTimestampToString } from '../helper.js';\n\nclass SaleStore{\n\n  constructor(){\n    riot.observable(this);\n    this.productItems = [];\n\n    this.db = riot.db;\n    this.pageSize = riot.pageSize;\n    this.offset = riot.offset;\n    this.bindEvents();\n  }\n\n  bindEvents(){\n    var self = this;\n    let salesTriggerChangeds = (d) => {\n      // console.log(d)\n      this.trigger(riot.EVT.salesLoadItemsSuccess, d);  \n    };\n\n    let salesTotalTriggerChangeds = (d) => {\n      \n      var grandTotal = _.sumBy(d.docs, function(o) { return o.total; })\n      // console.log(grandTotal)\n      this.trigger(riot.EVT.salesTotalSuccess, grandTotal);  \n    };\n\n    let salesSave = (item) => {\n      // console.log(item);\n      this.db.put(item, function callback(err, result) {\n        if (!err) {\n          this.trigger(riot.EVT.salesSaveSuccess, item._id);\n        } else {\n          console.log(err);\n        }\n      }.bind(this)); \n    };\n\n    let salesGet = (id) => {\n      this.db.allDocs({\n        startkey: id, \n        endkey: id+'\\uffff', \n        include_docs: true,\n      }).then(function (result) {\n        // handle result\n        // productsTriggerChangeds(result.rows.map(function(r){ \n          // console.log(result.rows[0].doc);\n          self.trigger(riot.EVT.salesGetSuccess, result.rows[0].doc);\n        // return r.doc;\n        // }));\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n\n    let salesLoadItems = (date) => {\n      /* FIND METHOD */\n      var startdate = toTimestamp(fromTimestampToString(date) + \" 00:00:00\");\n      var enddate = toTimestamp(fromTimestampToString(date) + \" 23:59:00\");\n      self.db.createIndex({\n           index: {\n            fields: ['created', 'type'],\n            name: 'mysalesindex',\n            ddoc: 'mysalestdoc',\n            type: 'json',\n          }\n      }).then(function() {\n          return self.db.find({\n              selector: {'created': {$gt:startdate, $lt:enddate}, 'type': 'sales'},\n              fields: ['created', 'discount','type','payment', '_id', 'total', 'cash', 'items'],\n              sort: [{'created': 'desc'}],\n              limit: self.pageSize, skip: self.offset, include_docs : true\n          }).then(function (result) {\n            // console.log(result);\n            // return result.docs;\n            salesTriggerChangeds(result);\n            // self.trigger(riot.EVT.searchItemSuccess, result);\n            // return Promise.resolve(result);\n          }).catch(function (err) {\n            console.log(err);\n          });\n      }).then(function () {\n        return self.db.getIndexes().then(function (result) {\n          result.indexes.forEach(function (value, i) {\n            if(value.name == \"mysalesindex\") {\n              self.db.deleteIndex({\n                \"name\": \"mysalesindex\",\n                \"ddoc\": value.ddoc,\n              })  \n            }\n          });\n        }).catch(function (err) {\n          // ouch, an error\n        });\n      });\n\n    }\n\n    let salesTotal = (date) => {\n      \n      /* FIND METHOD */\n      var startdate = toTimestamp(fromTimestampToString(date) + \" 00:00:00\");\n      var enddate = toTimestamp(fromTimestampToString(date) + \" 23:59:00\");\n      self.db.createIndex({\n           index: {\n            fields: ['created', 'type'],\n            name: 'mysalestotalindex',\n            ddoc: 'mysalestotaldoc',\n            type: 'json',\n          }\n      }).then(function() {\n          return self.db.find({\n              selector: {'created': {$gte:startdate, $lte:enddate}, 'type': 'sales'},\n              fields: ['created', 'type','total'],\n              sort: [{'created': 'desc'}],\n              include_docs : true\n          }).then(function (result) {\n            // console.log(result);\n            // return result.docs;\n            salesTotalTriggerChangeds(result);\n            // self.trigger(riot.EVT.searchItemSuccess, result);\n            // return Promise.resolve(result);\n          }).catch(function (err) {\n            console.log(err);\n          });\n      }).then(function () {\n        return self.db.getIndexes().then(function (result) {\n          result.indexes.forEach(function (value, i) {\n            if(value.name == \"mysalestotalindex\") {\n              self.db.deleteIndex({\n                \"name\": \"mysalestotalindex\",\n                \"ddoc\": value.ddoc,\n              })  \n            }\n          });\n        }).catch(function (err) {\n          // ouch, an error\n        });\n      });\n    }\n\n    let salesSearchItem = (text) => {\n      var s = text.text;\n      var regexp = new RegExp(s, 'i'); // Case Insensitive\n      this.db.find({\n        selector: {\n            type: \"sales\",\n            title: {$regex: regexp}\n          }\n      }).then(function (result) {\n        console.log(result.docs);\n        self.trigger(riot.EVT.salesSearchItemSuccess, result.docs);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n\n    this.on(riot.EVT.salesSave, (opts) => {\n      salesSave(opts);\n    });\n\n    this.on(riot.EVT.salesLoadItems, (opts) => {\n      if(opts.page) {\n        this.offset = ((parseFloat(opts.page) - 1) * this.pageSize);\n      }\n\n      // var date = Math.floor(Date.now() / 1000)\n      // if(typeof (opts.date) > 0) date = opts.date;\n      salesLoadItems(opts.date);\n    });\n\n\n    this.on(riot.EVT.salesSearchItem, (s) => {\n      salesSearchItem(s);\n    });\n\n    this.on(riot.EVT.salesGet, (id) => {\n      salesGet(id);\n    });\n\n    this.on(riot.EVT.salesTotal, (date) => {\n      salesTotal(date)\n    });\n  }\n\n}\n\n// add store to riot control\nlet saleStore = new SaleStore();\nriot.control.addStore(saleStore);\n\nexport default saleStore;\n\n\n/** WEBPACK FOOTER **\n ** ./src/stores/salestore.js\n **/","class ShopStore{\n\n  constructor(){\n    riot.observable(this);\n    this.productItems = [];\n\n    this.db = riot.db;\n    this.edit_id = false;\n    this.pageSize = riot.pageSize;\n    this.offset = riot.offset;\n    this.bindEvents();\n  }\n\n  bindEvents(){\n    var self = this;\n    \n\n    let shopLoadData = () => {\n      /* ALLDOCS METHOD */\n      // this.db.allDocs({\n      //     // descending: true,\n      //     startkey: 'cartitem_', \n      //     endkey: 'cartitem_\\uffff', \n      //     include_docs: true}, function(err, doc) {\n      //       console.log(doc);\n      //   cartTriggerChangeds(doc.rows.map(function(r){ return r.doc;}));\n      // });\n\n      /* QUERY METHOD */\n      var myMapReduceFun2 = {\n        map: function (doc) {\n          if (doc.type==\"shop\") {\n            // emit([doc.name.toLowerCase(), doc.cat.toLowerCase()])\n            emit(doc.value, null);\n          }\n        }\n      };\n      this.db.query(myMapReduceFun2, {include_docs : false}).then(function (result) {\n\n        var uu = []\n\n        uu = result.rows.map(function(r){ \n          if(r.id === \"shop_name\") return {'name': r.key}\n          if(r.id === \"shop_timezone\") return {'timezone': r.key}\n        })\n\n        var items = [];\n        for (var key in result.rows) {\n          var type = result.rows[key].id\n          var value = result.rows[key].key\n          if(type === \"shop_name\") items['name'] = value;\n          if(type === \"shop_timezone\") items['timezone'] = value;\n        }\n        self.trigger(riot.EVT.shopLoadDataSuccess, items);  \n        // return (result.rows[0].key)\n        \n      }).catch(function (err) {\n        console.log(err);\n      });\n\n      \n    }\n\n    let shopSaveData = (item) => {\n      \n      this.db.put(item, function callback(err, result) {\n        if (!err) {\n          self.trigger(riot.EVT.shopSaveSuccess, item.value);\n        } else {\n          if(err.status == 409) {\n            shopUpdateData(item, {value:item.value})\n          } else {\n            console.log(err);\n          }\n        }\n      }); \n    };\n\n    let shopUpdateData = (item, params) => {\n      // console.log(item);\n      this.db.get(item._id).then(function (origDoc) {\n        item._rev = origDoc._rev;\n        item.value = params.value;\n        self.trigger(riot.EVT.shopUpdateSuccess, item.value);\n        return self.db.put(item);\n      }).catch(function (err) {\n        if (err.status === 409) {\n          console.log(err);\n        } else { // new doc\n          return self.db.put(item);\n        }\n      });\n    };\n\n    this.on(riot.EVT.shopSaveName, (s) => {\n      var updatedOn = Math.floor((Date.now() + (riot.timezone*60*60*1000)) / 1000)\n      var item = {\n        _id: 'shop_name',\n        value: s,\n        type: 'shop',\n        updated: updatedOn\n      };\n      shopSaveData(item);\n    });\n\n    this.on(riot.EVT.shopSaveTimezone, (s) => {\n      var updatedOn = Math.floor((Date.now() + (riot.timezone*60*60*1000)) / 1000)\n      var item = {\n        _id: 'shop_timezone',\n        value: s,\n        type: 'shop',\n        updated: updatedOn\n      };\n      shopSaveData(item);\n    });\n\n\n    this.on(riot.EVT.shopLoadData, () => {\n      shopLoadData();\n    });\n  }\n\n}\n\n// add store to riot control\nlet shopStore = new ShopStore();\nriot.control.addStore(shopStore);\n\nexport default shopStore;\n\n\n/** WEBPACK FOOTER **\n ** ./src/stores/shopstore.js\n **/","var RiotControl = {\n  _stores: [],\n  addStore: function(store) {\n    this._stores.push(store);\n  }\n};\n\n['on','one','off','trigger'].forEach(function(api){\n  RiotControl[api] = function() {\n    var args = [].slice.call(arguments);\n    this._stores.forEach(function(el){\n      el[api].apply(null, args);\n    });\n  };\n});\n\nif (typeof(module) !== 'undefined') module.exports = RiotControl;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/riotcontrol/riotcontrol.js\n ** module id = 28\n ** module chunks = 0\n **/","module.exports = __webpack_amd_options__;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/amd-options.js\n ** module id = 29\n ** module chunks = 0\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 30\n ** module chunks = 0\n **/"],"sourceRoot":""}